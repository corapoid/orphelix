---
title: 'ConfigMaps & Secrets'
description: 'Manage Kubernetes configuration and secrets - view, edit, and track usage across deployments'
---

## Overview

ConfigMaps and Secrets store configuration data and sensitive information used by your applications. Orphelix provides both table and grid views for easy management and tracks which resources use each ConfigMap or Secret.

<img src="/images/configmaps-secrets.png" alt="ConfigMaps and Secrets" />

## ConfigMaps

### What are ConfigMaps?

ConfigMaps store non-confidential configuration data in key-value pairs. They decouple configuration from container images, making applications more portable.

**Common Use Cases:**
- Application configuration files
- Environment variables
- Command-line arguments
- Configuration properties
- Feature flags

### List View

<CardGroup cols={2}>
  <Card title="Table View" icon="table">
    Traditional table format with sorting and filtering
  </Card>
  <Card title="Grid View" icon="grid">
    Card-based layout for better visualization
  </Card>
</CardGroup>

**Table Columns:**
- **Name**: ConfigMap name (clickable)
- **Data Keys**: Number of key-value pairs
- **Age**: Time since creation
- **Usage**: Number of resources using this ConfigMap
- **Actions**: View, Edit, Delete

### Detail View

Click any ConfigMap name to view details:

<Steps>
  <Step title="Metadata">
    - **Name**: ConfigMap identifier
    - **Namespace**: Current namespace
    - **Labels**: Key-value labels
    - **Annotations**: Metadata annotations
    - **Created**: Creation timestamp
  </Step>

  <Step title="Data">
    All key-value pairs stored in the ConfigMap:
    
    <img src="/images/configmap-data.png" alt="ConfigMap Data" />
    
    - **Key**: Configuration key name
    - **Value**: Configuration value (can be multi-line)
    - **Size**: Value size in bytes
    
    <Tip>
      Values are displayed with syntax highlighting for YAML, JSON, XML, and properties files
    </Tip>
  </Step>

  <Step title="Usage Tracking">
    Shows which resources reference this ConfigMap:
    
    - **Deployments**: As volumes or environment variables
    - **StatefulSets**: Configuration mounts
    - **DaemonSets**: Node-specific config
    - **Pods**: Direct references
    
    <Note>
      Click resource names to navigate to their detail pages
    </Note>
  </Step>

  <Step title="Events">
    Recent events related to this ConfigMap:
    - Created
    - Updated
    - Mounted by pod
    - Mount failures
  </Step>
</Steps>

### Creating ConfigMaps

ConfigMaps can be created from:

<Tabs>
  <Tab title="Literal Values">
    Create from command-line literals:
    
    ```bash
    kubectl create configmap app-config \
      --from-literal=database.host=postgres \
      --from-literal=database.port=5432 \
      --from-literal=log.level=info
    ```
    
    Result:
    ```yaml
    data:
      database.host: postgres
      database.port: "5432"
      log.level: info
    ```
  </Tab>

  <Tab title="Files">
    Create from configuration files:
    
    ```bash
    kubectl create configmap app-config \
      --from-file=application.yaml \
      --from-file=logging.properties
    ```
    
    Result:
    ```yaml
    data:
      application.yaml: |
        server:
          port: 8080
      logging.properties: |
        log.level=DEBUG
    ```
  </Tab>

  <Tab title="Directory">
    Create from all files in a directory:
    
    ```bash
    kubectl create configmap app-config \
      --from-file=./config/
    ```
    
    Creates one key per file in directory
  </Tab>

  <Tab title="YAML Manifest">
    Create from YAML file:
    
    ```yaml
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name: app-config
    data:
      database.host: postgres
      database.port: "5432"
      application.yaml: |
        server:
          port: 8080
          timeout: 30
    ```
  </Tab>
</Tabs>

### Using ConfigMaps

ConfigMaps can be consumed by pods in several ways:

#### As Environment Variables

<Tabs>
  <Tab title="All Keys">
    Import all ConfigMap keys as environment variables:
    
    ```yaml
    envFrom:
    - configMapRef:
        name: app-config
    ```
    
    Creates one env var per key
  </Tab>

  <Tab title="Specific Keys">
    Import specific keys:
    
    ```yaml
    env:
    - name: DATABASE_HOST
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: database.host
    - name: DATABASE_PORT
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: database.port
    ```
  </Tab>
</Tabs>

#### As Volume Mounts

Mount ConfigMap as files in pod:

```yaml
volumes:
- name: config
  configMap:
    name: app-config
    items:  # Optional: select specific keys
    - key: application.yaml
      path: app-config.yaml

containers:
- name: app
  volumeMounts:
  - name: config
    mountPath: /etc/config
    readOnly: true
```

Files appear at:
- `/etc/config/application.yaml`
- `/etc/config/database.host`
- `/etc/config/database.port`

<Warning>
  ConfigMap updates propagate to mounted volumes after a delay (kubelet sync period). Pods don't automatically restart - you must restart them to use new values.
</Warning>

### Grid View

Alternative card-based layout for ConfigMaps:

<img src="/images/configmap-grid.png" alt="ConfigMap Grid View" />

**Card Contents:**
- ConfigMap name
- Number of data keys
- Age
- Used by X resources (badge)
- Quick actions menu

**Benefits:**
- Better for browsing many ConfigMaps
- Visual grouping by namespace
- Quick access to most-used ConfigMaps

## Secrets

### What are Secrets?

Secrets store sensitive information like passwords, tokens, and keys. They're similar to ConfigMaps but designed for confidential data.

<Warning>
  Secrets are only base64-encoded, not encrypted. Use encryption at rest and RBAC to secure them properly.
</Warning>

**Common Use Cases:**
- Database credentials
- API keys and tokens
- TLS certificates
- SSH keys
- Docker registry credentials
- OAuth tokens

### Secret Types

<AccordionGroup>
  <Accordion icon="key" title="Opaque">
    Generic secret for arbitrary data (default type)
    
    ```yaml
    apiVersion: v1
    kind: Secret
    metadata:
      name: db-secret
    type: Opaque
    data:
      username: YWRtaW4=  # base64 encoded
      password: cGFzc3dvcmQ=
    ```
  </Accordion>

  <Accordion icon="lock" title="kubernetes.io/tls">
    TLS certificate and private key
    
    ```yaml
    apiVersion: v1
    kind: Secret
    metadata:
      name: tls-secret
    type: kubernetes.io/tls
    data:
      tls.crt: <base64-encoded-cert>
      tls.key: <base64-encoded-key>
    ```
    
    Used by Ingress for HTTPS
  </Accordion>

  <Accordion icon="docker" title="kubernetes.io/dockerconfigjson">
    Docker registry credentials
    
    ```yaml
    apiVersion: v1
    kind: Secret
    metadata:
      name: regcred
    type: kubernetes.io/dockerconfigjson
    data:
      .dockerconfigjson: <base64-encoded-config>
    ```
    
    Used in imagePullSecrets
  </Accordion>

  <Accordion icon="user" title="kubernetes.io/basic-auth">
    Basic authentication credentials
    
    ```yaml
    apiVersion: v1
    kind: Secret
    metadata:
      name: basic-auth
    type: kubernetes.io/basic-auth
    data:
      username: <base64-username>
      password: <base64-password>
    ```
  </Accordion>

  <Accordion icon="key" title="kubernetes.io/ssh-auth">
    SSH private key
    
    ```yaml
    apiVersion: v1
    kind: Secret
    metadata:
      name: ssh-key
    type: kubernetes.io/ssh-auth
    data:
      ssh-privatekey: <base64-key>
    ```
  </Accordion>

  <Accordion icon="id-badge" title="kubernetes.io/service-account-token">
    ServiceAccount token (auto-created)
    
    Automatically created for each ServiceAccount
  </Accordion>
</AccordionGroup>

### List View

Same table and grid views as ConfigMaps:

**Table Columns:**
- **Name**: Secret name
- **Type**: Secret type (Opaque, TLS, etc.)
- **Data Keys**: Number of keys
- **Age**: Time since creation
- **Usage**: Resources using this Secret

<Note>
  Secret values are never displayed in the list view for security
</Note>

### Detail View

<Steps>
  <Step title="Metadata">
    - **Name**: Secret identifier
    - **Type**: Secret type
    - **Namespace**: Current namespace
    - **Labels & Annotations**: Metadata
    - **Created**: Creation timestamp
  </Step>

  <Step title="Data">
    Keys are displayed, but values are **masked** for security:
    
    <img src="/images/secret-data.png" alt="Secret Data (Masked)" />
    
    - **Key**: Data key name
    - **Value**: `••••••••` (masked)
    - **Size**: Value size in bytes
    
    <Warning>
      Secret values are intentionally hidden in Orphelix UI. Use kubectl to view them if needed.
    </Warning>
  </Step>

  <Step title="Usage Tracking">
    Shows which resources reference this Secret (same as ConfigMaps)
  </Step>

  <Step title="Events">
    Secret-related events (creation, mounting, errors)
  </Step>
</Steps>

### Creating Secrets

<Tabs>
  <Tab title="From Literal">
    Create from command-line:
    
    ```bash
    kubectl create secret generic db-secret \
      --from-literal=username=admin \
      --from-literal=password='S3cr3t!'
    ```
  </Tab>

  <Tab title="From File">
    Create from files:
    
    ```bash
    kubectl create secret generic tls-secret \
      --from-file=tls.crt=./cert.pem \
      --from-file=tls.key=./key.pem
    ```
  </Tab>

  <Tab title="TLS Secret">
    Create TLS secret:
    
    ```bash
    kubectl create secret tls tls-secret \
      --cert=path/to/cert.pem \
      --key=path/to/key.pem
    ```
  </Tab>

  <Tab title="Docker Registry">
    Create registry secret:
    
    ```bash
    kubectl create secret docker-registry regcred \
      --docker-server=registry.example.com \
      --docker-username=user \
      --docker-password=pass \
      --docker-email=user@example.com
    ```
  </Tab>
</Tabs>

### Using Secrets

#### As Environment Variables

```yaml
env:
- name: DB_USERNAME
  valueFrom:
    secretKeyRef:
      name: db-secret
      key: username
- name: DB_PASSWORD
  valueFrom:
    secretKeyRef:
      name: db-secret
      key: password
```

<Warning>
  Environment variables are visible in pod spec. Use volume mounts for highly sensitive data.
</Warning>

#### As Volume Mounts

```yaml
volumes:
- name: secrets
  secret:
    secretName: db-secret
    items:
    - key: username
      path: db-username
    - key: password
      path: db-password

containers:
- name: app
  volumeMounts:
  - name: secrets
    mountPath: /etc/secrets
    readOnly: true
```

Files appear at:
- `/etc/secrets/db-username`
- `/etc/secrets/db-password`

#### As ImagePullSecrets

For private container registries:

```yaml
spec:
  imagePullSecrets:
  - name: regcred
  containers:
  - name: app
    image: registry.example.com/app:latest
```

## Usage Tracking

Orphelix tracks which resources use each ConfigMap or Secret:

<img src="/images/config-usage.png" alt="Config Usage Tracking" />

**Tracking Information:**
- **Resource Type**: Deployment, StatefulSet, Pod, etc.
- **Resource Name**: Specific resource using config
- **Mount Type**: Environment variable or volume
- **Keys Used**: Which keys are referenced
- **Path**: Mount path (for volumes)

**Benefits:**
- Identify unused ConfigMaps/Secrets
- Find dependencies before deletion
- Audit configuration usage
- Plan configuration updates

<Tip>
  Before deleting a ConfigMap/Secret, check the usage section to ensure no resources depend on it
</Tip>

## Best Practices

<AccordionGroup>
  <Accordion icon="check" title="Use Secrets for Sensitive Data">
    Never store credentials in ConfigMaps - always use Secrets
  </Accordion>

  <Accordion icon="check" title="Enable Encryption at Rest">
    Configure Kubernetes to encrypt Secrets in etcd:
    
    ```yaml
    # EncryptionConfiguration
    apiVersion: apiserver.config.k8s.io/v1
    kind: EncryptionConfiguration
    resources:
    - resources:
      - secrets
      providers:
      - aescbc:
          keys:
          - name: key1
            secret: <base64-key>
    ```
  </Accordion>

  <Accordion icon="check" title="Use RBAC">
    Limit who can read Secrets:
    
    ```yaml
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      name: secret-reader
    rules:
    - apiGroups: [""]
      resources: ["secrets"]
      verbs: ["get", "list"]
    ```
  </Accordion>

  <Accordion icon="check" title="Rotate Secrets Regularly">
    Update secrets periodically and restart pods to use new values
  </Accordion>

  <Accordion icon="check" title="Use External Secret Managers">
    Consider tools like:
    - AWS Secrets Manager
    - HashiCorp Vault
    - Azure Key Vault
    - Google Secret Manager
    
    With operators like External Secrets Operator
  </Accordion>

  <Accordion icon="check" title="Namespace Secrets Appropriately">
    Create secrets in the same namespace as pods using them
  </Accordion>

  <Accordion icon="check" title="Document Secret Keys">
    Use labels/annotations to document secret purpose and key meanings
  </Accordion>
</AccordionGroup>

## Troubleshooting

### Pod Can't Mount ConfigMap/Secret

**Symptom:** Pod stuck in ContainerCreating

**Check Events:**
```
MountVolume.SetUp failed: configmap "app-config" not found
```

**Solutions:**
1. Verify ConfigMap/Secret exists: `kubectl get configmap app-config`
2. Check namespace - must be same as pod
3. Verify name spelling in pod spec
4. Check RBAC permissions

### Application Not Using Updated Config

**Symptom:** Config changes don't take effect

**Reasons:**
1. **Environment Variables**: Don't update automatically - must restart pod
2. **Volume Mounts**: Update after sync period (up to 1 minute + cache TTL)
3. **Application Cache**: App may cache config internally

**Solutions:**
- Restart deployment: `kubectl rollout restart deployment/app`
- Use ConfigMap/Secret update strategy with versioned names
- Implement file watch in application

### Secret Values Not Working

**Symptom:** Application authentication fails

**Check:**
1. **Base64 Encoding**: Ensure values are properly encoded
   ```bash
   echo -n 'mypassword' | base64
   # Result: bXlwYXNzd29yZA==
   ```

2. **No Trailing Newlines**: Use `echo -n` to avoid newlines

3. **Special Characters**: Quote complex passwords in manifests

4. **Key Names**: Verify key names match application expectations

## Next Steps

<CardGroup cols={2}>
  <Card title="Deployments" icon="layer-group" href="/user/deployments">
    See how to use ConfigMaps in deployments
  </Card>
  <Card title="Pods" icon="cube" href="/user/pods">
    View which pods use configurations
  </Card>
  <Card title="Topology" icon="diagram-project" href="/user/topology">
    Visualize configuration relationships
  </Card>
  <Card title="GitHub Integration" icon="github" href="/user/github/overview">
    Edit configs with GitOps workflow
  </Card>
</CardGroup>
