(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,549638,e=>{"use strict";var t=e.i(843476),a=e.i(586653),r=e.i(126863),o=e.i(236807),s=e.i(67719);let n=(0,e.i(454624).default)((0,t.jsx)("path",{d:"M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19z"}),"Inbox");function l({icon:e=n,title:l,description:i,action:d}){return(0,t.jsxs)(s.default,{sx:{p:6,textAlign:"center",bgcolor:"background.default",border:"2px dashed",borderColor:"divider"},children:[(0,t.jsx)(a.default,{sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:80,height:80,borderRadius:"50%",bgcolor:"action.hover",mb:3},children:(0,t.jsx)(e,{sx:{fontSize:40,color:"text.secondary"}})}),(0,t.jsx)(r.default,{variant:"h6",sx:{fontWeight:600,mb:1},children:l}),i&&(0,t.jsx)(r.default,{variant:"body2",color:"text.secondary",sx:{mb:3,maxWidth:400,mx:"auto"},children:i}),d&&(0,t.jsx)(o.default,{variant:"contained",onClick:d.onClick,children:d.label})]})}e.s(["EmptyState",()=>l],549638)},654895,e=>{"use strict";var t=e.i(843476),a=e.i(289590),r=e.i(514570),r=r,o=e.i(3626),o=o,s=e.i(103737),s=s,n=e.i(571604),n=n,l=e.i(955668),l=l,i=e.i(117693),i=i,d=e.i(332963);function u({rows:e=5,columns:u=6,showHeader:c=!0}){return(0,t.jsx)(n.default,{component:d.Paper,children:(0,t.jsxs)(r.default,{children:[c&&(0,t.jsx)(l.default,{children:(0,t.jsx)(i.default,{children:Array.from({length:u}).map((e,r)=>(0,t.jsx)(s.default,{children:(0,t.jsx)(a.Skeleton,{variant:"text",width:"80%",height:24})},`header-${r}`))})}),(0,t.jsx)(o.default,{children:Array.from({length:e}).map((e,r)=>(0,t.jsx)(i.default,{children:Array.from({length:u}).map((e,o)=>(0,t.jsx)(s.default,{children:(0,t.jsx)(a.Skeleton,{variant:"text",width:0===o?"60%":"80%",height:20})},`cell-${r}-${o}`))},`row-${r}`))})]})})}e.s(["TableSkeleton",()=>u],654895)},226519,e=>{"use strict";var t=e.i(271645);function a(e,r=null,o="asc"){let[s,n]=(0,t.useState)(r),[l,i]=(0,t.useState)(o),[d,u]=(0,t.useState)(new Map);return{sortedData:(0,t.useMemo)(()=>s?[...e].sort((e,t)=>{let a=d.get(String(s));if(a)return a(e,t,l);let r=e[s],o=t[s];if(null==r&&null==o)return 0;if(null==r)return"asc"===l?1:-1;if(null==o)return"asc"===l?-1:1;if("string"==typeof r&&"string"==typeof o){let e=r.localeCompare(o);return"asc"===l?e:-e}if("number"==typeof r&&"number"==typeof o)return"asc"===l?r-o:o-r;let n=String(r),i=String(o),u=n.localeCompare(i);return"asc"===l?u:-u}):e,[e,s,l,d]),sortField:s,sortOrder:l,handleSort:(e,t)=>{s===e?i("asc"===l?"desc":"asc"):(n(e),i("asc"),t&&u(a=>{let r=new Map(a);return r.set(String(e),t),r}))}}}e.s(["useSortableTable",()=>a])},26777,e=>{"use strict";var t=e.i(266027),a=e.i(913662),r=e.i(684074);function o(e){let o=(0,a.useModeStore)(e=>e.mode),s=(0,a.useModeStore)(e=>e.selectedNamespace),n=(0,a.useModeStore)(e=>e.selectedContext);return(0,t.useQuery)({queryKey:["pods",o,s,e],queryFn:async()=>{if("demo"===o){await new Promise(e=>setTimeout(e,300));let t=(0,r.generateMockPods)();return e?t.filter(t=>t.status===e):t}if(!s)throw Error("Namespace is required");let t=e?`/api/pods?namespace=${encodeURIComponent(s)}&context=${encodeURIComponent(n?.name||"")}&status=${e}`:`/api/pods?namespace=${encodeURIComponent(s)}&context=${encodeURIComponent(n?.name||"")}`,a=await fetch(t);if(!a.ok)throw Error("Failed to fetch pods");return a.json()},enabled:"demo"===o||!!s})}function s(e){let o=(0,a.useModeStore)(e=>e.mode),s=(0,a.useModeStore)(e=>e.selectedNamespace),n=(0,a.useModeStore)(e=>e.selectedContext);return(0,t.useQuery)({queryKey:["pod",e,o,s,n?.name||""],queryFn:async()=>{if("demo"===o){await new Promise(e=>setTimeout(e,200));let t=(0,r.generateMockPods)().find(t=>t.name===e);if(!t)throw Error("Pod not found");return t}if(!s)throw Error("Namespace is required");let t=await fetch(`/api/pods/${e}?namespace=${encodeURIComponent(s)}&context=${encodeURIComponent(n?.name||"")}`);if(!t.ok)throw Error("Failed to fetch pod");return t.json()},enabled:!!e&&("demo"===o||!!s)})}function n(e,r,o=100){let s=(0,a.useModeStore)(e=>e.mode),l=(0,a.useModeStore)(e=>e.selectedNamespace),i=(0,a.useModeStore)(e=>e.selectedContext);return(0,t.useQuery)({queryKey:["pod-logs",e,r,o,s,l],queryFn:async()=>{if("demo"===s){await new Promise(e=>setTimeout(e,400));let e=[],t=["2024-01-15","2024-01-16","2024-01-17"],a=["INFO","WARN","ERROR","DEBUG"],s=["Application started successfully","Connected to database","Processing request from user","Cache miss for key","Request completed in 45ms","Memory usage: 512MB","Health check passed","Scheduled task executed"];for(let n=0;n<o;n++){let o=t[Math.floor(Math.random()*t.length)],n=`${Math.floor(24*Math.random()).toString().padStart(2,"0")}:${Math.floor(60*Math.random()).toString().padStart(2,"0")}:${Math.floor(60*Math.random()).toString().padStart(2,"0")}`,l=a[Math.floor(Math.random()*a.length)],i=s[Math.floor(Math.random()*s.length)];e.push(`${o} ${n} [${l}] ${r} - ${i}`)}return{logs:e.join("\n"),parsed:void 0}}if(!l)throw Error("Namespace is required");let t=await fetch(`/api/pods/${e}/logs?namespace=${encodeURIComponent(l)}&context=${encodeURIComponent(i?.name||"")}&container=${r}&tail=${o}`);if(!t.ok)throw Error("Failed to fetch pod logs");let a=await t.json();return{logs:a.logs,parsed:a.parsed}},enabled:!!e&&!!r&&("demo"===s||!!l),refetchInterval:!1,staleTime:1/0})}e.s(["usePod",()=>s,"usePodLogs",()=>n,"usePods",()=>o])},617480,e=>{"use strict";var t=e.i(266027),a=e.i(913662),r=e.i(684074);function o(e){let o=(0,a.useModeStore)(e=>e.mode);return(0,t.useQuery)({queryKey:["nodes",o,e],queryFn:async()=>{if("demo"===o){await new Promise(e=>setTimeout(e,300));let t=(0,r.generateMockNodes)();return e?t.filter(t=>t.status===e):t}let t=e?`/api/nodes?status=${e}`:"/api/nodes",a=await fetch(t);if(!a.ok)throw Error("Failed to fetch nodes");return a.json()}})}function s(e){let o=(0,a.useModeStore)(e=>e.mode);return(0,t.useQuery)({queryKey:["node",e,o],queryFn:async()=>{if("demo"===o){await new Promise(e=>setTimeout(e,200));let t=(0,r.generateMockNodes)().find(t=>t.name===e);if(!t)throw Error("Node not found");return t}let t=await fetch(`/api/nodes/${e}`);if(!t.ok)throw Error("Failed to fetch node");return t.json()},enabled:!!e})}function n(r){let o=(0,a.useModeStore)(e=>e.mode),s=(0,a.useModeStore)(e=>e.selectedNamespace);return(0,t.useQuery)({queryKey:["node-pods",r,o,s],queryFn:async()=>{if("demo"===o){await new Promise(e=>setTimeout(e,200));let{generateMockPods:t}=await e.A(977370);return t().filter(e=>e.nodeName===r)}let t=s?`/api/nodes/${r}/pods?namespace=${s}`:`/api/nodes/${r}/pods`,a=await fetch(t);if(!a.ok){if(403===a.status)return console.warn("Node pods: insufficient permissions (403)"),[];throw Error("Failed to fetch node pods")}return a.json()},enabled:!!r,retry:!1})}e.s(["useNode",()=>s,"useNodePods",()=>n,"useNodes",()=>o])},137137,e=>{"use strict";var t=e.i(843476),a=e.i(586653),r=e.i(514570),o=e.i(3626),s=e.i(103737),n=e.i(571604),l=e.i(955668),i=e.i(117693),d=e.i(67719),u=e.i(828637),c=e.i(739147),f=e.i(926678),m=e.i(828642),h=e.i(271645),p=e.i(367882),x=e.i(549638),y=e.i(654895),g=e.i(498915),b=e.i(916155),S=e.i(226519),j=e.i(10612),M=e.i(8353);function w({title:e,resourceName:w,resourceNamePlural:v,icon:$,data:C,isLoading:N,error:R,refetch:P,searchPlaceholder:k,searchFilter:F,filters:T=[],customFilter:E,columns:q,defaultSortField:A,defaultSortOrder:I="asc",getRowKey:U,onRowClick:H,showClusterAlert:K=!0,emptyStateDescription:L}){let O=(0,M.usePageSearch)(k);(0,j.useAutoRefresh)(P);let B=(0,h.useMemo)(()=>{if(!C)return[];let e=C;return E&&(e=e.filter(E)),O&&(e=e.filter(e=>F(e,O))),e},[C,O,F,E]),{sortedData:Q,sortField:z,sortOrder:D,handleSort:V}=(0,S.useSortableTable)(B,A,I);return N?(0,t.jsxs)(a.default,{children:[(0,t.jsx)(p.PageHeader,{title:e,onRefresh:P}),(0,t.jsx)(y.TableSkeleton,{rows:8,columns:q.length})]}):R?(0,t.jsxs)(a.default,{children:[(0,t.jsx)(p.PageHeader,{title:e,onRefresh:P}),(0,t.jsx)(g.ErrorState,{error:R,onRetry:P,title:`Failed to Load ${e}`})]}):(0,t.jsxs)(a.default,{children:[(0,t.jsx)(p.PageHeader,{title:e,subtitle:`${C?.length||0} ${C?.length===1?w:v} in this namespace`,onRefresh:P,isRefreshing:N,filters:T.length>0?(0,t.jsx)(a.default,{sx:{display:"flex",gap:1,alignItems:"center"},children:T.map(e=>(0,t.jsxs)(u.default,{size:"small",sx:{minWidth:150},children:[(0,t.jsx)(c.default,{children:e.label}),(0,t.jsx)(f.default,{value:e.value,label:e.label,onChange:t=>e.onChange(t.target.value),children:e.options.map(e=>(0,t.jsx)(m.default,{value:e.value,children:e.label},e.value))})]},e.label))}):void 0}),K&&(0,t.jsx)(b.ClusterConnectionAlert,{minimal:!0}),C&&0!==C.length?0===B.length?(0,t.jsx)(x.EmptyState,{icon:$,title:`No matching ${v}`,description:`No ${v} match your search or filters.`}):(0,t.jsx)(n.default,{component:d.default,children:(0,t.jsxs)(r.default,{children:[(0,t.jsx)(l.default,{children:(0,t.jsx)(i.default,{children:q.map(e=>(0,t.jsxs)(s.default,{align:e.align||"left",sx:{cursor:!1!==e.sortable?"pointer":"default"},onClick:!1!==e.sortable?()=>V(e.field,e.customSortFn):void 0,children:[e.label,!1!==e.sortable&&z===e.field&&("asc"===D?" ↑":" ↓")]},String(e.field)))})}),(0,t.jsx)(o.default,{children:Q.map(e=>(0,t.jsx)(i.default,{hover:!0,sx:{cursor:H?"pointer":"default"},onClick:H?()=>H(e):void 0,children:q.map(a=>(0,t.jsx)(s.default,{align:a.align||"left",children:a.render?a.render(e):String(e[a.field]??"")},String(a.field)))},U(e)))})]})}):(0,t.jsx)(x.EmptyState,{icon:$,title:`No ${v} found`,description:L||`There are no ${v} in this namespace yet.`})]})}e.s(["TableOnlyResourceList",()=>w])},442027,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(618566),o=e.i(986867);let s=(0,e.i(454624).default)((0,t.jsx)("path",{d:"M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1M7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2M20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1M7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"Dns");var n=e.i(617480),l=e.i(26777),i=e.i(913662),d=e.i(658606),u=e.i(137137);function c(e){let t=e.match(/^(\d+(?:\.\d+)?)(.*?)$/);if(!t)return 0;let a=parseFloat(t[1]),r=t[2];return r?a*(({Ki:1024,Mi:1048576,Gi:0x40000000,Ti:0x10000000000,k:1e3,M:1e6,G:1e9,T:1e12,m:.001})[r]||1):a}function f(e,t){let a=c(e),r=c(t);return 0===r?0:Math.round(a/r*100)}function m(){let e=(0,o.useNavigateTo)(),c=(0,r.useSearchParams)(),m=(0,i.useModeStore)(e=>e.selectedNamespace),[h,p]=(0,a.useState)("all"),{data:x,isLoading:y,error:g,refetch:b}=(0,n.useNodes)(),{data:S}=(0,l.usePods)();(0,a.useEffect)(()=>{let e=c.get("status");e&&("Ready"===e||"NotReady"===e)&&p(e)},[c]);let j=(0,a.useMemo)(()=>S&&m?new Set(S.map(e=>e.nodeName).filter(Boolean)):new Set,[S,m]);return(0,t.jsx)(u.TableOnlyResourceList,{title:"Nodes",resourceName:"node",resourceNamePlural:"nodes",icon:s,data:x,isLoading:y,error:g,refetch:b,searchPlaceholder:"Search nodes...",searchFilter:(e,t)=>e.name.toLowerCase().includes(t.toLowerCase()),filters:[{label:"Status",value:h,options:[{label:"All",value:"all"},{label:"Ready",value:"Ready"},{label:"Not Ready",value:"NotReady"}],onChange:p}],customFilter:e=>(!m||!(j.size>0)||!!j.has(e.name))&&("all"===h||e.status===h),columns:[{field:"name",label:"Name",sortable:!0},{field:"status",label:"Status",sortable:!0,render:e=>(0,t.jsx)(d.StatusBadge,{status:e.status})},{field:"version",label:"Version",sortable:!0},{field:"cpu",label:"CPU",render:e=>(0,t.jsxs)(t.Fragment,{children:[e.allocatable.cpu," / ",e.capacity.cpu," (",f(e.allocatable.cpu,e.capacity.cpu),"%)"]})},{field:"memory",label:"Memory",render:e=>(0,t.jsxs)(t.Fragment,{children:[e.allocatable.memory," / ",e.capacity.memory," (",f(e.allocatable.memory,e.capacity.memory),"%)"]})},{field:"pods",label:"Pods",render:e=>(0,t.jsxs)(t.Fragment,{children:[e.allocatable.pods," / ",e.capacity.pods]})},{field:"age",label:"Age",sortable:!0}],defaultSortField:"name",defaultSortOrder:"asc",getRowKey:e=>e.name,onRowClick:t=>e(`/nodes/${t.name}`),emptyStateDescription:m?`No nodes have pods in namespace: ${m}`:"There are no nodes in this cluster yet."})}e.s(["default",()=>m],442027)},977370,e=>{e.v(e=>Promise.resolve().then(()=>e(684074)))}]);