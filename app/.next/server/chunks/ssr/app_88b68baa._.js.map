{"version":3,"sources":["../../../../../app/lib/hooks/use-daemonsets.ts","../../../../../app/app/daemonsets/page.tsx","../../../../../app/app/components/daemonsets/daemonset-card.tsx"],"sourcesContent":["import { useQuery } from '@tanstack/react-query'\nimport { useModeStore } from '@/lib/core/store'\nimport { generateMockDaemonSets } from '@/lib/mocks/data'\nimport type { DaemonSet } from '@/types/kubernetes'\n\n/**\n * Hook to fetch all daemonsets\n */\nexport function useDaemonSets() {\n  const mode = useModeStore((state) => state.mode)\n  const namespace = useModeStore((state) => state.selectedNamespace)\n  const selectedContext = useModeStore((state) => state.selectedContext)\n\n  return useQuery<DaemonSet[]>({\n    queryKey: ['daemonsets', mode, namespace, selectedContext?.name || ''],\n    queryFn: async () => {\n      if (mode === 'demo') {\n        await new Promise((resolve) => setTimeout(resolve, 300))\n        return generateMockDaemonSets()\n      }\n\n      // Real mode: fetch from API route (server-side)\n      const response = await fetch(\n        `/api/daemonsets?namespace=${encodeURIComponent(namespace)}&context=${encodeURIComponent(selectedContext?.name || '')}`\n      )\n      if (!response.ok) throw new Error('Failed to fetch daemonsets')\n      return response.json()\n    },\n  })\n}\n\n/**\n * Hook to fetch a single daemonset by name\n */\nexport function useDaemonSet(name: string) {\n  const mode = useModeStore((state) => state.mode)\n  const namespace = useModeStore((state) => state.selectedNamespace)\n  const selectedContext = useModeStore((state) => state.selectedContext)\n\n  return useQuery<DaemonSet>({\n    queryKey: ['daemonset', name, mode, namespace, selectedContext?.name || ''],\n    queryFn: async () => {\n      if (mode === 'demo') {\n        await new Promise((resolve) => setTimeout(resolve, 200))\n        const daemonsets = generateMockDaemonSets()\n        const daemonset = daemonsets.find((ds) => ds.name === name)\n        if (!daemonset) throw new Error('DaemonSet not found')\n        return daemonset\n      }\n\n      // Real mode: fetch from API route (server-side)\n      const response = await fetch(\n        `/api/daemonsets/${name}?namespace=${encodeURIComponent(namespace)}&context=${encodeURIComponent(selectedContext?.name || '')}`\n      )\n      if (!response.ok) throw new Error('Failed to fetch daemonset')\n      return response.json()\n    },\n    enabled: !!name && (mode === 'demo' || !!namespace),\n  })\n}\n","'use client'\n\nimport Typography from '@mui/material/Typography'\nimport IconButton from '@mui/material/IconButton'\nimport SettingsSystemDaydreamIcon from '@mui/icons-material/SettingsSystemDaydream'\nimport VisibilityIcon from '@mui/icons-material/Visibility'\nimport { useState, useEffect } from 'react'\nimport { useSearchParams } from 'next/navigation'\nimport { useNavigateTo } from '@/lib/hooks/use-navigate-to'\nimport { useDaemonSets } from '@/lib/hooks/use-daemonsets'\nimport { StatusBadge } from '@/app/components/common/status-badge'\nimport { ResourceListView, TableColumn } from '@/app/components/common/resource-list-view'\nimport { DaemonSetCard } from '@/app/components/daemonsets/daemonset-card'\nimport type { DaemonSet, DeploymentStatus } from '@/types/kubernetes'\n\nexport default function DaemonSetsPage() {\n  const navigateTo = useNavigateTo()\n  const searchParams = useSearchParams()\n  const [statusFilter, setStatusFilter] = useState<DeploymentStatus | ''>('')\n  const { data: daemonsets, isLoading, error, refetch } = useDaemonSets()\n\n  // Set filter from URL on mount\n  useEffect(() => {\n    const status = searchParams.get('status')\n    if (status && (status === 'Healthy' || status === 'Degraded' || status === 'Not Ready')) {\n      setStatusFilter(status as DeploymentStatus)\n    }\n  }, [searchParams])\n\n  const columns: TableColumn<DaemonSet>[] = [\n    {\n      field: 'name',\n      label: 'Name',\n      render: (ds) => (\n        <Typography variant=\"body2\" fontWeight=\"medium\">\n          {ds.name}\n        </Typography>\n      ),\n    },\n    {\n      field: 'status',\n      label: 'Status',\n      render: (ds) => <StatusBadge status={ds.status} />,\n    },\n    {\n      field: 'desired',\n      label: 'Desired',\n      align: 'center',\n      customSortFn: (a, b, order) => {\n        return order === 'asc' ? a.desired - b.desired : b.desired - a.desired\n      },\n    },\n    {\n      field: 'current',\n      label: 'Current',\n      align: 'center',\n      customSortFn: (a, b, order) => {\n        return order === 'asc' ? a.current - b.current : b.current - a.current\n      },\n    },\n    {\n      field: 'ready',\n      label: 'Ready',\n      align: 'center',\n      customSortFn: (a, b, order) => {\n        return order === 'asc' ? a.ready - b.ready : b.ready - a.ready\n      },\n    },\n    {\n      field: 'upToDate',\n      label: 'Up-to-date',\n      align: 'center',\n      customSortFn: (a, b, order) => {\n        return order === 'asc' ? a.upToDate - b.upToDate : b.upToDate - a.upToDate\n      },\n    },\n    {\n      field: 'available',\n      label: 'Available',\n      align: 'center',\n      customSortFn: (a, b, order) => {\n        return order === 'asc' ? a.available - b.available : b.available - a.available\n      },\n    },\n    {\n      field: 'age',\n      label: 'Age',\n    },\n    {\n      field: 'actions',\n      label: 'Actions',\n      align: 'right',\n      sortable: false,\n      render: (ds) => (\n        <IconButton\n          size=\"small\"\n          onClick={(e) => {\n            e.stopPropagation()\n            navigateTo(`/daemonsets/${ds.name}`)\n          }}\n        >\n          <VisibilityIcon fontSize=\"small\" />\n        </IconButton>\n      ),\n    },\n  ]\n\n  return (\n    <ResourceListView\n      title=\"DaemonSets\"\n      resourceName=\"daemonset\"\n      resourceNamePlural=\"daemonsets\"\n      icon={SettingsSystemDaydreamIcon}\n      data={daemonsets}\n      isLoading={isLoading}\n      error={error}\n      refetch={refetch}\n      searchPlaceholder=\"Search daemonsets...\"\n      searchFilter={(ds, query) =>\n        ds.name.toLowerCase().includes(query.toLowerCase())\n      }\n      customFilter={\n        statusFilter\n          ? (ds) => ds.status === statusFilter\n          : undefined\n      }\n      filters={[\n        {\n          label: 'Status',\n          value: statusFilter,\n          options: [\n            { label: 'All Statuses', value: '' },\n            { label: 'Healthy', value: 'Healthy' },\n            { label: 'Degraded', value: 'Degraded' },\n            { label: 'Not Ready', value: 'Not Ready' },\n          ],\n          onChange: (value) => setStatusFilter(value as DeploymentStatus | ''),\n        },\n      ]}\n      columns={columns}\n      defaultSortField=\"name\"\n      defaultSortOrder=\"asc\"\n      getRowKey={(ds) => ds.name}\n      onRowClick={(ds) => navigateTo(`/daemonsets/${ds.name}`)}\n      renderCard={(ds, onClick) => (\n        <DaemonSetCard daemonSet={ds} onClick={onClick} />\n      )}\n      emptyStateDescription=\"There are no daemonsets in this namespace.\"\n    />\n  )\n}\n","import Box from '@mui/material/Box'\nimport Typography from '@mui/material/Typography'\nimport SettingsSystemDaydreamIcon from '@mui/icons-material/SettingsSystemDaydream'\nimport { StatusBadge } from '@/app/components/common/status-badge'\nimport { ResourceCard } from '@/app/components/common/resource-card'\nimport type { DaemonSet } from '@/types/kubernetes'\n\ninterface DaemonSetCardProps {\n  daemonSet: DaemonSet\n  onClick?: () => void\n}\n\nexport function DaemonSetCard({ daemonSet, onClick }: DaemonSetCardProps) {\n  const resourceColor = '#9333EA' // Purple for daemonsets\n\n  return (\n    <ResourceCard\n      name={daemonSet.name}\n      resourceType=\"DaemonSet\"\n      resourceColor={resourceColor}\n      icon={SettingsSystemDaydreamIcon}\n      onClick={onClick}\n      statusBadge={<StatusBadge status={daemonSet.status} />}\n      metrics={\n        <Box sx={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 1.5 }}>\n          <Box>\n            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mb: 0.5 }}>\n              Desired\n            </Typography>\n            <Typography variant=\"h6\" fontWeight={700}>\n              {daemonSet.desired}\n            </Typography>\n          </Box>\n          <Box>\n            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mb: 0.5 }}>\n              Ready\n            </Typography>\n            <Typography variant=\"h6\" fontWeight={700}>\n              {daemonSet.ready}\n            </Typography>\n          </Box>\n          <Box>\n            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mb: 0.5 }}>\n              Available\n            </Typography>\n            <Typography variant=\"body2\" fontWeight={600}>\n              {daemonSet.available}\n            </Typography>\n          </Box>\n          <Box>\n            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mb: 0.5 }}>\n              Up-to-date\n            </Typography>\n            <Typography variant=\"body2\" fontWeight={600}>\n              {daemonSet.upToDate}\n            </Typography>\n          </Box>\n        </Box>\n      }\n      footer={\n        <Typography variant=\"caption\" color=\"text.secondary\">\n          Age: {daemonSet.age}\n        </Typography>\n      }\n    />\n  )\n}\n"],"names":[],"mappings":"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"}