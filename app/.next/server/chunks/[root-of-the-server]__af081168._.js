module.exports=[666680,(e,t,n)=>{t.exports=e.x("node:crypto",()=>require("node:crypto"))},951615,(e,t,n)=>{t.exports=e.x("node:buffer",()=>require("node:buffer"))},490553,e=>{"use strict";let t;var n=e.i(742701),i=e.i(158445),r=e.i(762199),o=e.i(10591);function a(e){let t=e.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(t.baseUrl)?"https://github.com":t.baseUrl.replace("/api/v3","")}async function s(e,t,n){let i={baseUrl:a(e),headers:{accept:"application/json"},...n},r=await e(t,i);if("error"in r.data){let n=new o.RequestError(`${r.data.error_description} (${r.data.error}, ${r.data.error_uri})`,400,{request:e.endpoint.merge(t,i)});throw n.response=r,n}return r}async function c(e){let t=e.request||r.request,n=await s(t,"POST /login/oauth/access_token",{client_id:e.clientId,client_secret:e.clientSecret,code:e.code,redirect_uri:e.redirectUrl}),i={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:n.data.access_token,scopes:n.data.scope.split(/\s+/).filter(Boolean)};if("github-app"===e.clientType){if("refresh_token"in n.data){let e=new Date(n.headers.date).getTime();i.refreshToken=n.data.refresh_token,i.expiresAt=l(e,n.data.expires_in),i.refreshTokenExpiresAt=l(e,n.data.refresh_token_expires_in)}delete i.scopes}return{...n,authentication:i}}function l(e,t){return new Date(e+1e3*t).toISOString()}async function u(e){let t=e.request||r.request,n={client_id:e.clientId};return"scopes"in e&&Array.isArray(e.scopes)&&(n.scope=e.scopes.join(" ")),s(t,"POST /login/device/code",n)}async function p(e){let t=e.request||r.request,n=await s(t,"POST /login/oauth/access_token",{client_id:e.clientId,device_code:e.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),i={clientType:e.clientType,clientId:e.clientId,token:n.data.access_token,scopes:n.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in e&&(i.clientSecret=e.clientSecret),"github-app"===e.clientType){if("refresh_token"in n.data){let e=new Date(n.headers.date).getTime();i.refreshToken=n.data.refresh_token,i.expiresAt=d(e,n.data.expires_in),i.refreshTokenExpiresAt=d(e,n.data.refresh_token_expires_in)}delete i.scopes}return{...n,authentication:i}}function d(e,t){return new Date(e+1e3*t).toISOString()}async function h(e){let t=e.request||r.request,n=await t("POST /applications/{client_id}/token",{headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`},client_id:e.clientId,access_token:e.token}),i={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:e.token,scopes:n.data.scopes};return n.data.expires_at&&(i.expiresAt=n.data.expires_at),"github-app"===e.clientType&&delete i.scopes,{...n,authentication:i}}async function y(e){let t=e.request||r.request,n=await s(t,"POST /login/oauth/access_token",{client_id:e.clientId,client_secret:e.clientSecret,grant_type:"refresh_token",refresh_token:e.refreshToken}),i=new Date(n.headers.date).getTime(),o={clientType:"github-app",clientId:e.clientId,clientSecret:e.clientSecret,token:n.data.access_token,refreshToken:n.data.refresh_token,expiresAt:_(i,n.data.expires_in),refreshTokenExpiresAt:_(i,n.data.refresh_token_expires_in)};return{...n,authentication:o}}function _(e,t){return new Date(e+1e3*t).toISOString()}async function f(e){let{request:t,clientType:n,clientId:i,clientSecret:o,token:a,...s}=e,c=e.request||r.request,l=await c("POST /applications/{client_id}/token/scoped",{headers:{authorization:`basic ${btoa(`${i}:${o}`)}`},client_id:i,access_token:a,...s}),u=Object.assign({clientType:n,clientId:i,clientSecret:o,token:l.data.token},l.data.expires_at?{expiresAt:l.data.expires_at}:{});return{...l,authentication:u}}async function k(e){let t=e.request||r.request,n=btoa(`${e.clientId}:${e.clientSecret}`),i=await t("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${n}`},client_id:e.clientId,access_token:e.token}),o={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:i.data.token,scopes:i.data.scopes};return i.data.expires_at&&(o.expiresAt=i.data.expires_at),"github-app"===e.clientType&&delete o.scopes,{...i,authentication:o}}async function g(e){let t=e.request||r.request,n=btoa(`${e.clientId}:${e.clientSecret}`);return t("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${n}`},client_id:e.clientId,access_token:e.token})}async function m(e){let t=e.request||r.request,n=btoa(`${e.clientId}:${e.clientSecret}`);return t("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${n}`},client_id:e.clientId,access_token:e.token})}async function w(e,t){let n=function(e,t){if(!0===t.refresh||!e.authentication)return!1;if("github-app"===e.clientType)return e.authentication;let n=e.authentication;return("scopes"in t&&t.scopes||e.scopes).join(" ")===n.scopes.join(" ")&&n}(e,t.auth);if(n)return n;let{data:i}=await u({clientType:e.clientType,clientId:e.clientId,request:t.request||e.request,scopes:t.auth.scopes||e.scopes});await e.onVerification(i);let r=await v(t.request||e.request,e.clientId,e.clientType,i);return e.authentication=r,r}async function b(e){await new Promise(t=>setTimeout(t,1e3*e))}async function v(e,t,n,i){try{let r={clientId:t,request:e,code:i.device_code},{authentication:o}="oauth-app"===n?await p({...r,clientType:"oauth-app"}):await p({...r,clientType:"github-app"});return{type:"token",tokenType:"oauth",...o}}catch(o){if(!o.response)throw o;let r=o.response.data.error;if("authorization_pending"===r)return await b(i.interval),v(e,t,n,i);if("slow_down"===r)return await b(i.interval+7),v(e,t,n,i);throw o}}async function T(e,t){return w(e,{auth:t})}async function I(e,t,n,i){let r=t.endpoint.merge(n,i);if(/\/login\/(oauth\/access_token|device\/code)$/.test(r.url))return t(r);let{token:o}=await w(e,{request:t,auth:{type:"oauth"}});return r.headers.authorization=`token ${o}`,t(r)}var S="0.0.0-development";async function q(e){if("code"in e.strategyOptions){let{authentication:t}=await c({clientId:e.clientId,clientSecret:e.clientSecret,clientType:e.clientType,onTokenCreated:e.onTokenCreated,...e.strategyOptions,request:e.request});return{type:"token",tokenType:"oauth",...t}}if("onVerification"in e.strategyOptions){let t=function(e){let t=e.request||r.request.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/0.0.0-development ${(0,i.getUserAgent)()}`}}),{request:n=t,...o}=e,a="github-app"===e.clientType?{...o,clientType:"github-app",request:n}:{...o,clientType:"oauth-app",request:n,scopes:e.scopes||[]};if(!e.clientId)throw Error('[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');if(!e.onVerification)throw Error('[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');return Object.assign(T.bind(null,a),{hook:I.bind(null,a)})}({clientType:e.clientType,clientId:e.clientId,onTokenCreated:e.onTokenCreated,...e.strategyOptions,request:e.request}),n=await t({type:"oauth"});return{clientSecret:e.clientSecret,...n}}if("token"in e.strategyOptions)return{type:"token",tokenType:"oauth",clientId:e.clientId,clientSecret:e.clientSecret,clientType:e.clientType,onTokenCreated:e.onTokenCreated,...e.strategyOptions};throw Error("[@octokit/auth-oauth-user] Invalid strategy options")}async function A(e,t={}){if(e.authentication||(e.clientType,e.authentication=await q(e)),e.authentication.invalid)throw Error("[@octokit/auth-oauth-user] Token is invalid");let n=e.authentication;if("expiresAt"in n&&("refresh"===t.type||new Date(n.expiresAt)<new Date)){let{authentication:t}=await y({clientType:"github-app",clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:n.refreshToken,request:e.request});e.authentication={tokenType:"oauth",type:"token",...t}}if("refresh"===t.type){if("oauth-app"===e.clientType)throw Error("[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens");if(!n.hasOwnProperty("expiresAt"))throw Error("[@octokit/auth-oauth-user] Refresh token missing");await e.onTokenCreated?.(e.authentication,{type:t.type})}if("check"===t.type||"reset"===t.type){let n="check"===t.type?h:k;try{let{authentication:i}=await n({clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:e.authentication.token,request:e.request});return e.authentication={tokenType:"oauth",type:"token",...i},"reset"===t.type&&await e.onTokenCreated?.(e.authentication,{type:t.type}),e.authentication}catch(t){throw 404===t.status&&(t.message="[@octokit/auth-oauth-user] Token is invalid",e.authentication.invalid=!0),t}}if("delete"===t.type||"deleteAuthorization"===t.type){let n="delete"===t.type?g:m;try{await n({clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:e.authentication.token,request:e.request})}catch(e){if(404!==e.status)throw e}e.authentication.invalid=!0}return e.authentication}var E=/\/applications\/[^/]+\/(token|grant)s?/;function j(e){return e&&E.test(e)}async function O(e,t,n,i={}){let r=t.endpoint.merge(n,i);if(/\/login\/(oauth\/access_token|device\/code)$/.test(r.url))return t(r);if(j(r.url)){let n=btoa(`${e.clientId}:${e.clientSecret}`);return r.headers.authorization=`basic ${n}`,t(r)}let{token:o}=(e.clientType,await A({...e,request:t}));return r.headers.authorization="token "+o,t(r)}function x({clientId:e,clientSecret:t,clientType:n="oauth-app",request:o=r.request.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${S} ${(0,i.getUserAgent)()}`}}),onTokenCreated:a,...s}){let c=Object.assign({clientType:n,clientId:e,clientSecret:t,onTokenCreated:a,strategyOptions:s,request:o});return Object.assign(A.bind(null,c),{hook:O.bind(null,c)})}async function $(e,t){if("oauth-app"===t.type)return{type:"oauth-app",clientId:e.clientId,clientSecret:e.clientSecret,clientType:e.clientType,headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`}};if("factory"in t){let{type:n,...i}={...t,...e};return t.factory(i)}let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.request,...t};return(e.clientType,await x({...n,clientType:e.clientType}))()}async function P(e,t,n,i){let r=t.endpoint.merge(n,i);if(/\/login\/(oauth\/access_token|device\/code)$/.test(r.url))return t(r);if("github-app"===e.clientType&&!j(r.url))throw Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${r.method} ${r.url}" is not supported.`);let o=btoa(`${e.clientId}:${e.clientSecret}`);r.headers.authorization=`basic ${o}`;try{return await t(r)}catch(e){if(401!==e.status)throw e;throw e.message=`[@octokit/auth-oauth-app] "${r.method} ${r.url}" does not support clientId/clientSecret basic authentication.`,e}}function U(e){let t=Object.assign({request:r.request.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/0.0.0-development ${(0,i.getUserAgent)()}`}}),clientType:"oauth-app"},e);return Object.assign($.bind(null,t),{hook:P.bind(null,t)})}function z(e){return e.includes("-----BEGIN RSA PRIVATE KEY-----")}function H(e){let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0,i=e.length;t<i;t++)n[t]=e.charCodeAt(t);return t}function N(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function R(e){return N(btoa(JSON.stringify(e)))}x.VERSION=S;var D=e.i(666680);async function C({privateKey:e,payload:t}){var n;let i=z(e)?(0,D.createPrivateKey)(e).export({type:"pkcs8",format:"pem"}):e;if(z(i))throw Error("[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");if(i.includes("-----BEGIN OPENSSH PRIVATE KEY-----"))throw Error("[universal-github-app-jwt] Private Key is in OpenSSH format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");let r={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},o=H(atob(i.trim().split("\n").slice(1,-1).join(""))),a=await D.subtle.importKey("pkcs8",o,r,!1,["sign"]),s=(n={alg:"RS256",typ:"JWT"},`${R(n)}.${R(t)}`),c=H(s),l=function(e){for(var t="",n=new Uint8Array(e),i=n.byteLength,r=0;r<i;r++)t+=String.fromCharCode(n[r]);return N(btoa(t))}(await D.subtle.sign(r.name,a,c));return`${s}.${l}`}async function G({id:e,privateKey:t,now:n=Math.floor(Date.now()/1e3)}){let i=t.replace(/\\n/g,"\n"),r=n-30,o=r+600;return{appId:e,expiration:o,token:await C({privateKey:i,payload:{iat:r,exp:o,iss:e}})}}class K{constructor(e=1e3,t=0){if(isNaN(e)||e<0)throw Error("Invalid max value");if(isNaN(t)||t<0)throw Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=t}bumpLru(e){if(this.last===e)return;let t=this.last,n=e.next,i=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=t,t.next=e,null!==i&&(i.next=n),null!==n&&(n.prev=i),this.last=e}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let t=this.items[e];delete this.items[e],this.size--,null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}}deleteMany(e){for(var t=0;t<e.length;t++)this.delete(e[t])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],0==--this.size?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let t=this.items[e];return this.ttl>0&&t.expiry<=Date.now()?void this.delete(e):(this.bumpLru(t),t.value)}}getMany(e){let t=[];for(var n=0;n<e.length;n++)t.push(this.get(e[n]));return t}keys(){return Object.keys(this.items)}set(e,t){if(Object.prototype.hasOwnProperty.call(this.items,e)){let n=this.items[e];n.value=t,n.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==n&&this.bumpLru(n);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};this.items[e]=n,1==++this.size?this.first=n:this.last.next=n,this.last=n}}async function L({appId:e,privateKey:t,timeDifference:n,createJwt:i}){try{if(i){let{jwt:t,expiresAt:r}=await i(e,n);return{type:"app",token:t,appId:e,expiresAt:r}}let r={id:e,privateKey:t};n&&Object.assign(r,{now:Math.floor(Date.now()/1e3)+n});let o=await G(r);return{type:"app",token:o.token,appId:o.appId,expiresAt:new Date(1e3*o.expiration).toISOString()}}catch(e){if("-----BEGIN RSA PRIVATE KEY-----"===t)throw Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'");throw e}}async function B(e,t){let n=F(t),i=await e.get(n);if(!i)return;let[r,o,a,s,c,l]=i.split("|");return{token:r,createdAt:o,expiresAt:a,permissions:t.permissions||c.split(/,/).reduce((e,t)=>(/!$/.test(t)?e[t.slice(0,-1)]="write":e[t]="read",e),{}),repositoryIds:t.repositoryIds,repositoryNames:t.repositoryNames,singleFileName:l,repositorySelection:s}}async function V(e,t,n){let i=F(t),r=t.permissions?"":Object.keys(n.permissions).map(e=>`${e}${"write"===n.permissions[e]?"!":""}`).join(","),o=[n.token,n.createdAt,n.expiresAt,n.repositorySelection,r,n.singleFileName].join("|");await e.set(i,o)}function F({installationId:e,permissions:t={},repositoryIds:n=[],repositoryNames:i=[]}){let r=Object.keys(t).sort().map(e=>"read"===t[e]?e:`${e}!`).join(",");return[e,n.sort().join(","),i.join(","),r].filter(Boolean).join("|")}function M({installationId:e,token:t,createdAt:n,expiresAt:i,repositorySelection:r,permissions:o,repositoryIds:a,repositoryNames:s,singleFileName:c}){return Object.assign({type:"token",tokenType:"installation",token:t,installationId:e,permissions:o,createdAt:n,expiresAt:i,repositorySelection:r},a?{repositoryIds:a}:null,s?{repositoryNames:s}:null,c?{singleFileName:c}:null)}async function W(e,t,n){let i=Number(t.installationId||e.installationId);if(!i)throw Error("[@octokit/auth-app] installationId option is required for installation authentication.");if(t.factory){let{type:n,factory:i,oauthApp:r,...o}={...e,...t};return i(o)}let r=n||e.request;var o=e,a={...t,installationId:i},s=r;let c=F(a);if(J.has(c))return J.get(c);let l=Y(o,a,s).finally(()=>J.delete(c));return J.set(c,l),l}var J=new Map;async function Y(e,t,n){if(!t.refresh){let n=await B(e.cache,t);if(n){let{token:e,createdAt:i,expiresAt:r,permissions:o,repositoryIds:a,repositoryNames:s,singleFileName:c,repositorySelection:l}=n;return M({installationId:t.installationId,token:e,createdAt:i,expiresAt:r,permissions:o,repositorySelection:l,repositoryIds:a,repositoryNames:s,singleFileName:c})}}let i=await L(e),r={installation_id:t.installationId,mediaType:{previews:["machine-man"]},headers:{authorization:`bearer ${i.token}`}};t.repositoryIds&&Object.assign(r,{repository_ids:t.repositoryIds}),t.repositoryNames&&Object.assign(r,{repositories:t.repositoryNames}),t.permissions&&Object.assign(r,{permissions:t.permissions});let{data:{token:o,expires_at:a,repositories:s,permissions:c,repository_selection:l,single_file:u}}=await n("POST /app/installations/{installation_id}/access_tokens",r),p=c||{},d=l||"all",h=s?s.map(e=>e.id):void 0,y=s?s.map(e=>e.name):void 0,_=new Date().toISOString();u&&Object.assign(r,{singleFileName:u}),await V(e.cache,t,{token:o,createdAt:_,expiresAt:a,repositorySelection:d,permissions:p,repositoryIds:h,repositoryNames:y});let f={installationId:t.installationId,token:o,createdAt:_,expiresAt:a,repositorySelection:d,permissions:p,repositoryIds:h,repositoryNames:y};return u&&Object.assign(f,{singleFileName:u}),M(f)}async function Q(e,t){switch(t.type){case"app":return L(e);case"oauth-app":return e.oauthApp({type:"oauth-app"});case"installation":return W(e,{...t,type:"installation"});case"oauth-user":return e.oauthApp(t);default:throw Error(`Invalid auth type: ${t.type}`)}}var X=(t=["/app","/app/hook/config","/app/hook/deliveries","/app/hook/deliveries/{delivery_id}","/app/hook/deliveries/{delivery_id}/attempts","/app/installations","/app/installations/{installation_id}","/app/installations/{installation_id}/access_tokens","/app/installations/{installation_id}/suspended","/app/installation-requests","/marketplace_listing/accounts/{account_id}","/marketplace_listing/plan","/marketplace_listing/plans","/marketplace_listing/plans/{plan_id}/accounts","/marketplace_listing/stubbed/accounts/{account_id}","/marketplace_listing/stubbed/plan","/marketplace_listing/stubbed/plans","/marketplace_listing/stubbed/plans/{plan_id}/accounts","/orgs/{org}/installation","/repos/{owner}/{repo}/installation","/users/{username}/installation"].map(e=>e.split("/").map(e=>e.startsWith("{")?"(?:.+?)":e).join("/")),RegExp(`^(?:${t.map(e=>`(?:${e})`).join("|")})$`,"i"));async function Z(e,t,n,i){var r;let o=t.endpoint.merge(n,i),a=o.url;if(/\/login\/oauth\/access_token$/.test(a))return t(o);if((r=a.replace(t.endpoint.DEFAULTS.baseUrl,""))&&X.test(r.split("?")[0])){let n,{token:i}=await L(e);o.headers.authorization=`bearer ${i}`;try{n=await t(o)}catch(r){if(!(r.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||r.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))||void 0===r.response.headers.date)throw r;let n=Math.floor((Date.parse(r.response.headers.date)-Date.parse(new Date().toString()))/1e3);e.log.warn(r.message),e.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${n} seconds. Retrying request with the difference accounted for.`);let{token:i}=await L({...e,timeDifference:n});return o.headers.authorization=`bearer ${i}`,t(o)}return n}if(j(a)){let n=await e.oauthApp({type:"oauth-app"});return o.headers.authorization=n.headers.authorization,t(o)}let{token:s,createdAt:c}=await W(e,{},t.defaults({baseUrl:o.baseUrl}));return o.headers.authorization=`token ${s}`,ee(e,t,o,c)}async function ee(e,t,n,i,r=0){let o=new Date-new Date(i);try{return await t(n)}catch(s){if(401!==s.status)throw s;if(o>=5e3)throw r>0&&(s.message=`After ${r} retries within ${o/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),s;let a=1e3*++r;return e.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${r}, wait: ${a/1e3}s)`),await new Promise(e=>setTimeout(e,a)),ee(e,t,n,i,r)}}function et(e){if(!e.appId)throw Error("[@octokit/auth-app] appId option is required");if(e.privateKey||e.createJwt){if(e.privateKey&&e.createJwt)throw Error("[@octokit/auth-app] privateKey and createJwt options are mutually exclusive")}else throw Error("[@octokit/auth-app] privateKey option is required");if("installationId"in e&&!e.installationId)throw Error("[@octokit/auth-app] installationId is set to a falsy value");let t=e.log||{};"function"!=typeof t.warn&&(t.warn=console.warn.bind(console));let n=e.request||r.request.defaults({headers:{"user-agent":`octokit-auth-app.js/8.1.2 ${(0,i.getUserAgent)()}`}}),o=Object.assign({request:n,cache:new K(15e3,354e4)},e,e.installationId?{installationId:Number(e.installationId)}:{},{log:t,oauthApp:U({clientType:"github-app",clientId:e.clientId||"",clientSecret:e.clientSecret||"",request:n})});return Object.assign(Q.bind(null,o),{hook:Z.bind(null,o)})}async function en(e){return{type:"unauthenticated",reason:e}}var ei=/\babuse\b/i;async function er(e,t,n,i){let r=t.endpoint.merge(n,i);return t(r).catch(t=>{if(404===t.status)throw t.message=`Not found. May be due to lack of authentication. Reason: ${e}`,t;if(403===t.status&&t.response&&"0"===t.response.headers["x-ratelimit-remaining"])throw t.message=`API rate limit exceeded. This maybe caused by the lack of authentication. Reason: ${e}`,t;if(403===t.status&&ei.test(t.message))throw t.message=`You have triggered an abuse detection mechanism. This maybe caused by the lack of authentication. Reason: ${e}`,t;if(401===t.status)throw t.message=`Unauthorized. "${r.method} ${r.url}" failed most likely due to lack of authentication. Reason: ${e}`,t;throw t.status>=400&&t.status<500&&(t.message=t.message.replace(/\.?$/,`. May be caused by lack of authentication (${e}).`)),t})}var eo=function(e){if(!e||!e.reason)throw Error("[@octokit/auth-unauthenticated] No reason passed to createUnauthenticatedAuth");return Object.assign(en.bind(null,e.reason),{hook:er.bind(null,e.reason)})},ea="8.0.3",es=n.Octokit.defaults({userAgent:`octokit-oauth-app.js/${ea} ${(0,i.getUserAgent)()}`});async function ec(e,t){let{name:n,action:i}=t;if(e.eventHandlers[`${n}.${i}`])for(let r of e.eventHandlers[`${n}.${i}`])await r(t);if(e.eventHandlers[n])for(let i of e.eventHandlers[n])await i(t)}async function el(e,t){return e.octokit.auth({type:"oauth-user",...t,async factory(t){let n=new e.Octokit({authStrategy:x,auth:t}),i=await n.auth({type:"get"});return await ec(e,{name:"token",action:"created",token:i.token,scopes:i.scopes,authentication:i,octokit:n}),n}})}function eu(e,t){let n={clientId:e.clientId,request:e.octokit.request,...t,allowSignup:e.allowSignup??t.allowSignup,redirectUrl:t.redirectUrl??e.redirectUrl,scopes:t.scopes??e.defaultScopes};return function({request:e=r.request,...t}){let n=a(e);return function(e){var t,n;let i,r,o=e.clientType||"oauth-app",a=e.baseUrl||"https://github.com",s={clientType:o,allowSignup:!1!==e.allowSignup,clientId:e.clientId,login:e.login||null,redirectUrl:e.redirectUrl||null,state:e.state||Math.random().toString(36).substr(2),url:""};if("oauth-app"===o){let t="scopes"in e?e.scopes:[];s.scopes="string"==typeof t?t.split(/[,\s]+/).filter(Boolean):t}return t=`${a}/login/oauth/authorize`,n=s,i={allowSignup:"allow_signup",clientId:"client_id",login:"login",redirectUrl:"redirect_uri",scopes:"scope",state:"state"},r=t,Object.keys(i).filter(e=>null!==n[e]).filter(e=>"scopes"!==e||"github-app"!==n.clientType&&(!Array.isArray(n[e])||n[e].length>0)).map(e=>[i[e],`${n[e]}`]).forEach(([e,t],n)=>{r+=0===n?"?":"&",r+=`${e}=${encodeURIComponent(t)}`}),s.url=r,s}({...t,baseUrl:n})}({clientType:e.clientType,...n})}async function ep(e,t){let n=await e.octokit.auth({type:"oauth-user",...t});return await ec(e,{name:"token",action:"created",token:n.token,scopes:n.scopes,authentication:n,octokit:new e.Octokit({authStrategy:x,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:n.token,scopes:n.scopes,refreshToken:n.refreshToken,expiresAt:n.expiresAt,refreshTokenExpiresAt:n.refreshTokenExpiresAt}})}),{authentication:n}}async function ed(e,t){let n=await h({clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t});return Object.assign(n.authentication,{type:"token",tokenType:"oauth"}),n}async function eh(e,t){let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t};if("oauth-app"===e.clientType){let t=await k({clientType:"oauth-app",...n}),i=Object.assign(t.authentication,{type:"token",tokenType:"oauth"});return await ec(e,{name:"token",action:"reset",token:t.authentication.token,scopes:t.authentication.scopes||void 0,authentication:i,octokit:new e.Octokit({authStrategy:x,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:t.authentication.token,scopes:t.authentication.scopes}})}),{...t,authentication:i}}let i=await k({clientType:"github-app",...n}),r=Object.assign(i.authentication,{type:"token",tokenType:"oauth"});return await ec(e,{name:"token",action:"reset",token:i.authentication.token,authentication:r,octokit:new e.Octokit({authStrategy:x,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:i.authentication.token}})}),{...i,authentication:r}}async function ey(e,t){if("oauth-app"===e.clientType)throw Error("[@octokit/oauth-app] app.refreshToken() is not supported for OAuth Apps");let n=await y({clientType:"github-app",clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,refreshToken:t.refreshToken}),i=Object.assign(n.authentication,{type:"token",tokenType:"oauth"});return await ec(e,{name:"token",action:"refreshed",token:n.authentication.token,authentication:i,octokit:new e.Octokit({authStrategy:x,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:n.authentication.token}})}),{...n,authentication:i}}async function e_(e,t){if("oauth-app"===e.clientType)throw Error("[@octokit/oauth-app] app.scopeToken() is not supported for OAuth Apps");let n=await f({clientType:"github-app",clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t}),i=Object.assign(n.authentication,{type:"token",tokenType:"oauth"});return await ec(e,{name:"token",action:"scoped",token:n.authentication.token,authentication:i,octokit:new e.Octokit({authStrategy:x,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:n.authentication.token}})}),{...n,authentication:i}}async function ef(e,t){let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t},i="oauth-app"===e.clientType?await g({clientType:"oauth-app",...n}):await g({clientType:"github-app",...n});return await ec(e,{name:"token",action:"deleted",token:t.token,octokit:new e.Octokit({authStrategy:eo,auth:{reason:'Handling "token.deleted" event. The access for the token has been revoked.'}})}),i}async function ek(e,t){let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t},i="oauth-app"===e.clientType?await m({clientType:"oauth-app",...n}):await m({clientType:"github-app",...n});return await ec(e,{name:"token",action:"deleted",token:t.token,octokit:new e.Octokit({authStrategy:eo,auth:{reason:'Handling "token.deleted" event. The access for the token has been revoked.'}})}),await ec(e,{name:"authorization",action:"deleted",token:t.token,octokit:new e.Octokit({authStrategy:eo,auth:{reason:'Handling "authorization.deleted" event. The access for the app has been revoked.'}})}),i}var eg=class{static VERSION=ea;static defaults(e){return class extends this{constructor(...t){super({...e,...t[0]})}}}constructor(e){const t=e.Octokit||es;this.type=e.clientType||"oauth-app";const n=new t({authStrategy:U,auth:{clientType:this.type,clientId:e.clientId,clientSecret:e.clientSecret}}),i={clientType:this.type,clientId:e.clientId,clientSecret:e.clientSecret,defaultScopes:e.defaultScopes||[],allowSignup:e.allowSignup,baseUrl:e.baseUrl,redirectUrl:e.redirectUrl,log:e.log,Octokit:t,octokit:n,eventHandlers:{}};this.on=(function e(t,n,i){if(Array.isArray(n)){for(let r of n)e(t,r,i);return}t.eventHandlers[n]||(t.eventHandlers[n]=[]),t.eventHandlers[n].push(i)}).bind(null,i),this.octokit=n,this.getUserOctokit=el.bind(null,i),this.getWebFlowAuthorizationUrl=eu.bind(null,i),this.createToken=ep.bind(null,i),this.checkToken=ed.bind(null,i),this.resetToken=eh.bind(null,i),this.refreshToken=ey.bind(null,i),this.scopeToken=e_.bind(null,i),this.deleteToken=ef.bind(null,i),this.deleteAuthorization=ek.bind(null,i)}type;on;octokit;getUserOctokit;getWebFlowAuthorizationUrl;createToken;checkToken;resetToken;refreshToken;scopeToken;deleteToken;deleteAuthorization},em=e.i(951615),ew="6.0.0";async function eb(e,t){if(!e||!t)throw TypeError("[@octokit/webhooks-methods] secret & payload required for sign()");if("string"!=typeof t)throw TypeError("[@octokit/webhooks-methods] payload must be a string");let n="sha256";return`${n}=${(0,D.createHmac)(n,e).update(t).digest("hex")}`}async function ev(e,t,n){if(!e||!t||!n)throw TypeError("[@octokit/webhooks-methods] secret, eventPayload & signature required");if("string"!=typeof t)throw TypeError("[@octokit/webhooks-methods] eventPayload must be a string");let i=em.Buffer.from(n),r=em.Buffer.from(await eb(e,t));return i.length===r.length&&(0,D.timingSafeEqual)(i,r)}async function eT(e,t,n,i){if(await ev(e,t,n))return!0;if(void 0!==i)for(let e of i){let i=await ev(e,t,n);if(i)return i}return!1}eb.VERSION=ew,ev.VERSION=ew;var eI=(e={})=>("function"!=typeof e.debug&&(e.debug=()=>{}),"function"!=typeof e.info&&(e.info=()=>{}),"function"!=typeof e.warn&&(e.warn=console.warn.bind(console)),"function"!=typeof e.error&&(e.error=console.error.bind(console)),e),eS=["branch_protection_configuration","branch_protection_configuration.disabled","branch_protection_configuration.enabled","branch_protection_rule","branch_protection_rule.created","branch_protection_rule.deleted","branch_protection_rule.edited","check_run","check_run.completed","check_run.created","check_run.requested_action","check_run.rerequested","check_suite","check_suite.completed","check_suite.requested","check_suite.rerequested","code_scanning_alert","code_scanning_alert.appeared_in_branch","code_scanning_alert.closed_by_user","code_scanning_alert.created","code_scanning_alert.fixed","code_scanning_alert.reopened","code_scanning_alert.reopened_by_user","commit_comment","commit_comment.created","create","custom_property","custom_property.created","custom_property.deleted","custom_property.promote_to_enterprise","custom_property.updated","custom_property_values","custom_property_values.updated","delete","dependabot_alert","dependabot_alert.auto_dismissed","dependabot_alert.auto_reopened","dependabot_alert.created","dependabot_alert.dismissed","dependabot_alert.fixed","dependabot_alert.reintroduced","dependabot_alert.reopened","deploy_key","deploy_key.created","deploy_key.deleted","deployment","deployment.created","deployment_protection_rule","deployment_protection_rule.requested","deployment_review","deployment_review.approved","deployment_review.rejected","deployment_review.requested","deployment_status","deployment_status.created","discussion","discussion.answered","discussion.category_changed","discussion.closed","discussion.created","discussion.deleted","discussion.edited","discussion.labeled","discussion.locked","discussion.pinned","discussion.reopened","discussion.transferred","discussion.unanswered","discussion.unlabeled","discussion.unlocked","discussion.unpinned","discussion_comment","discussion_comment.created","discussion_comment.deleted","discussion_comment.edited","fork","github_app_authorization","github_app_authorization.revoked","gollum","installation","installation.created","installation.deleted","installation.new_permissions_accepted","installation.suspend","installation.unsuspend","installation_repositories","installation_repositories.added","installation_repositories.removed","installation_target","installation_target.renamed","issue_comment","issue_comment.created","issue_comment.deleted","issue_comment.edited","issues","issues.assigned","issues.closed","issues.deleted","issues.demilestoned","issues.edited","issues.labeled","issues.locked","issues.milestoned","issues.opened","issues.pinned","issues.reopened","issues.transferred","issues.typed","issues.unassigned","issues.unlabeled","issues.unlocked","issues.unpinned","issues.untyped","label","label.created","label.deleted","label.edited","marketplace_purchase","marketplace_purchase.cancelled","marketplace_purchase.changed","marketplace_purchase.pending_change","marketplace_purchase.pending_change_cancelled","marketplace_purchase.purchased","member","member.added","member.edited","member.removed","membership","membership.added","membership.removed","merge_group","merge_group.checks_requested","merge_group.destroyed","meta","meta.deleted","milestone","milestone.closed","milestone.created","milestone.deleted","milestone.edited","milestone.opened","org_block","org_block.blocked","org_block.unblocked","organization","organization.deleted","organization.member_added","organization.member_invited","organization.member_removed","organization.renamed","package","package.published","package.updated","page_build","personal_access_token_request","personal_access_token_request.approved","personal_access_token_request.cancelled","personal_access_token_request.created","personal_access_token_request.denied","ping","project","project.closed","project.created","project.deleted","project.edited","project.reopened","project_card","project_card.converted","project_card.created","project_card.deleted","project_card.edited","project_card.moved","project_column","project_column.created","project_column.deleted","project_column.edited","project_column.moved","projects_v2","projects_v2.closed","projects_v2.created","projects_v2.deleted","projects_v2.edited","projects_v2.reopened","projects_v2_item","projects_v2_item.archived","projects_v2_item.converted","projects_v2_item.created","projects_v2_item.deleted","projects_v2_item.edited","projects_v2_item.reordered","projects_v2_item.restored","projects_v2_status_update","projects_v2_status_update.created","projects_v2_status_update.deleted","projects_v2_status_update.edited","public","pull_request","pull_request.assigned","pull_request.auto_merge_disabled","pull_request.auto_merge_enabled","pull_request.closed","pull_request.converted_to_draft","pull_request.demilestoned","pull_request.dequeued","pull_request.edited","pull_request.enqueued","pull_request.labeled","pull_request.locked","pull_request.milestoned","pull_request.opened","pull_request.ready_for_review","pull_request.reopened","pull_request.review_request_removed","pull_request.review_requested","pull_request.synchronize","pull_request.unassigned","pull_request.unlabeled","pull_request.unlocked","pull_request_review","pull_request_review.dismissed","pull_request_review.edited","pull_request_review.submitted","pull_request_review_comment","pull_request_review_comment.created","pull_request_review_comment.deleted","pull_request_review_comment.edited","pull_request_review_thread","pull_request_review_thread.resolved","pull_request_review_thread.unresolved","push","registry_package","registry_package.published","registry_package.updated","release","release.created","release.deleted","release.edited","release.prereleased","release.published","release.released","release.unpublished","repository","repository.archived","repository.created","repository.deleted","repository.edited","repository.privatized","repository.publicized","repository.renamed","repository.transferred","repository.unarchived","repository_advisory","repository_advisory.published","repository_advisory.reported","repository_dispatch","repository_dispatch.sample.collected","repository_import","repository_ruleset","repository_ruleset.created","repository_ruleset.deleted","repository_ruleset.edited","repository_vulnerability_alert","repository_vulnerability_alert.create","repository_vulnerability_alert.dismiss","repository_vulnerability_alert.reopen","repository_vulnerability_alert.resolve","secret_scanning_alert","secret_scanning_alert.created","secret_scanning_alert.publicly_leaked","secret_scanning_alert.reopened","secret_scanning_alert.resolved","secret_scanning_alert.validated","secret_scanning_alert_location","secret_scanning_alert_location.created","secret_scanning_scan","secret_scanning_scan.completed","security_advisory","security_advisory.published","security_advisory.updated","security_advisory.withdrawn","security_and_analysis","sponsorship","sponsorship.cancelled","sponsorship.created","sponsorship.edited","sponsorship.pending_cancellation","sponsorship.pending_tier_change","sponsorship.tier_changed","star","star.created","star.deleted","status","sub_issues","sub_issues.parent_issue_added","sub_issues.parent_issue_removed","sub_issues.sub_issue_added","sub_issues.sub_issue_removed","team","team.added_to_repository","team.created","team.deleted","team.edited","team.removed_from_repository","team_add","watch","watch.started","workflow_dispatch","workflow_job","workflow_job.completed","workflow_job.in_progress","workflow_job.queued","workflow_job.waiting","workflow_run","workflow_run.completed","workflow_run.in_progress","workflow_run.requested"];function eq(e,t,n){e.hooks[t]||(e.hooks[t]=[]),e.hooks[t].push(n)}function eA(e,t){eq(e,"*",t)}function eE(e,t){eq(e,"error",t)}function ej(e,t){let n;try{n=e(t)}catch(e){console.log('FATAL: Error occurred in "error" event handler'),console.log(e)}n&&n.catch&&n.catch(e=>{console.log('FATAL: Error occurred in "error" event handler'),console.log(e)})}function eO(e,t){var n,i;let r,o=e.hooks.error||[];if(t instanceof Error){let e=Object.assign(AggregateError([t],t.message),{event:t});return o.forEach(t=>ej(t,e)),Promise.reject(e)}if(!t||!t.name||!t.payload){let e=Error("Event name not passed");throw AggregateError([e],e.message)}let a=(n="action"in t.payload?t.payload.action:null,i=t.name,r=[e.hooks[i],e.hooks["*"]],n&&r.unshift(e.hooks[`${i}.${n}`]),[].concat(...r.filter(Boolean)));if(0===a.length)return Promise.resolve();let s=[];return Promise.all(a.map(n=>{let i=Promise.resolve(t);return e.transform&&(i=i.then(e.transform)),i.then(e=>n(e)).catch(e=>s.push(Object.assign(e,{event:t})))})).then(()=>{if(0===s.length)return;let e=AggregateError(s,s.map(e=>e.message).join("\n"));throw Object.assign(e,{event:t}),o.forEach(t=>ej(t,e)),e})}async function ex(e,t){let n;if(!await eT(e.secret,t.payload,t.signature,e.additionalSecrets).catch(()=>!1)){let n=Error("[@octokit/webhooks] signature does not match event payload and secret");return n.event=t,n.status=400,e.eventHandler.receive(n)}try{n=JSON.parse(t.payload)}catch(e){throw e.message="Invalid JSON",e.status=400,AggregateError([e],e.message)}return e.eventHandler.receive({id:t.id,name:t.name,payload:n})}var e$=new TextDecoder("utf-8",{fatal:!1}),eP=(e$.decode.bind(e$),class{sign;verify;on;onAny;onError;removeListener;receive;verifyAndReceive;constructor(e){if(!e||!e.secret)throw Error("[@octokit/webhooks] options.secret required");const t={eventHandler:function(e){let t={hooks:{},log:eI(e&&e.log)};return e&&e.transform&&(t.transform=e.transform),{on:(function e(t,n,i){Array.isArray(n)?n.forEach(n=>e(t,n,i)):(!function(e,t={}){if("string"!=typeof e)throw TypeError("eventName must be of type string");if("*"===e)throw TypeError('Using the "*" event with the regular Webhooks.on() function is not supported. Please use the Webhooks.onAny() method instead');if("error"===e)throw TypeError('Using the "error" event with the regular Webhooks.on() function is not supported. Please use the Webhooks.onError() method instead');if("ignore"!==t.onUnknownEventName&&!eS.includes(e))if("warn"!==t.onUnknownEventName)throw TypeError(`"${e}" is not a known webhook name (https://developer.github.com/v3/activity/events/types/)`);else(t.log||console).warn(`"${e}" is not a known webhook name (https://developer.github.com/v3/activity/events/types/)`)}(n,{onUnknownEventName:"warn",log:t.log}),eq(t,n,i))}).bind(null,t),onAny:eA.bind(null,t),onError:eE.bind(null,t),removeListener:(function e(t,n,i){if(Array.isArray(n))return void n.forEach(n=>e(t,n,i));if(t.hooks[n]){for(let e=t.hooks[n].length-1;e>=0;e--)if(t.hooks[n][e]===i)return void t.hooks[n].splice(e,1)}}).bind(null,t),receive:eO.bind(null,t)}}(e),secret:e.secret,additionalSecrets:e.additionalSecrets,hooks:{},log:eI(e.log)};this.sign=eb.bind(null,e.secret),this.verify=ev.bind(null,e.secret),this.on=t.eventHandler.on,this.onAny=t.eventHandler.onAny,this.onError=t.eventHandler.onError,this.removeListener=t.eventHandler.removeListener,this.receive=t.eventHandler.receive,this.verifyAndReceive=ex.bind(null,t)}}),eU=e.i(662760);async function ez(e,t){return e.octokit.auth({type:"installation",installationId:t,factory(e){let n={...e.octokitOptions,authStrategy:et,...{auth:{...e,installationId:t}}};return new e.octokit.constructor(n)}})}async function eH(e,t){let n=eN(e)[Symbol.asyncIterator](),i=await n.next();for(;!i.done;)await t(i.value),i=await n.next()}function eN(e){return{async *[Symbol.asyncIterator](){for await(let{data:t}of eU.composePaginateRest.iterator(e.octokit,"GET /app/installations"))for(let n of t){let t=await ez(e,n.id);yield{octokit:t,installation:n}}}}}async function eR(e,t,n){let i=eD(e,n?t:void 0)[Symbol.asyncIterator](),r=await i.next();for(;!r.done;)n?await n(r.value):await t(r.value),r=await i.next()}function eD(e,t){return{async *[Symbol.asyncIterator](){var n;for await(let{octokit:i}of t?(n=t.installationId,{async *[Symbol.asyncIterator](){yield{octokit:await e.getInstallationOctokit(n)}}}):e.eachInstallation.iterator())for await(let{data:e}of eU.composePaginateRest.iterator(i,"GET /installation/repositories"))for(let t of e)yield{octokit:i,repository:t}}}}async function eC(e){let{data:t}=await e.octokit.request("GET /app");if(!t)throw Error("[@octokit/app] unable to fetch metadata for app");return`${t.html_url}/installations/new`}var eG=class{static VERSION="16.1.2";static defaults(e){return class extends this{constructor(...t){super({...e,...t[0]})}}}octokit;webhooks;oauth;getInstallationOctokit;eachInstallation;eachRepository;getInstallationUrl;log;constructor(e){const t=e.Octokit||n.Octokit,i={authStrategy:et,auth:Object.assign({appId:e.appId,privateKey:e.privateKey},e.oauth?{clientId:e.oauth.clientId,clientSecret:e.oauth.clientSecret}:{})};"log"in e&&void 0!==e.log&&(i.log=e.log),this.octokit=new t(i),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),e.webhooks?this.webhooks=function(e,t){return new eP({secret:t.secret,transform:async t=>{if(!("installation"in t.payload)||"object"!=typeof t.payload.installation){let n=new e.constructor({authStrategy:eo,auth:{reason:'"installation" key missing in webhook event payload'}});return{...t,octokit:n}}let n=t.payload.installation.id,i=await e.auth({type:"installation",installationId:n,factory:e=>new e.octokit.constructor({...e.octokitOptions,authStrategy:et,...{auth:{...e,installationId:n}}})});return i.hook.before("request",e=>{e.headers["x-github-delivery"]=t.id}),{...t,octokit:i}}})}(this.octokit,e.webhooks):Object.defineProperty(this,"webhooks",{get(){throw Error("[@octokit/app] webhooks option not set")}}),e.oauth?this.oauth=new eg({...e.oauth,clientType:"github-app",Octokit:t}):Object.defineProperty(this,"oauth",{get(){throw Error("[@octokit/app] oauth.clientId / oauth.clientSecret options are not set")}}),this.getInstallationOctokit=ez.bind(null,this),this.eachInstallation=function(e){return Object.assign(eH.bind(null,e),{iterator:eN.bind(null,e)})}(this),this.eachRepository=function(e){return Object.assign(eR.bind(null,e),{iterator:eD.bind(null,e)})}(this),this.getInstallationUrl=function(e){let t;return async function(n={}){t||(t=eC(e));let i=new URL(await t);return void 0!==n.target_id&&(i.pathname+="/permissions",i.searchParams.append("target_id",n.target_id.toFixed())),void 0!==n.state&&i.searchParams.append("state",n.state),i.href}}(this)}};let eK=new class{app=null;constructor(){const e=process.env.GITHUB_APP_ID,t=process.env.GITHUB_APP_PRIVATE_KEY,n=process.env.GITHUB_APP_CLIENT_ID,i=process.env.GITHUB_APP_CLIENT_SECRET;if(!e||!t||!n||!i)return void console.warn("GitHub App credentials not configured");this.app=new eG({appId:e,privateKey:t.replace(/\\n/g,"\n"),oauth:{clientId:n,clientSecret:i}})}isConfigured(){return null!==this.app}getApp(){if(!this.app)throw Error("GitHub App not configured");return this.app}getInstallationUrl(){if(!process.env.GITHUB_APP_CLIENT_ID)throw Error("GITHUB_APP_CLIENT_ID not configured");return`https://github.com/apps/${process.env.GITHUB_APP_SLUG}/installations/new`}async exchangeCode(e){if(!this.app)throw Error("GitHub App not configured");let t=await this.app.oauth.createToken({code:e});return{token:t.authentication.token,expiresAt:t.authentication.expiresAt||"",refreshToken:t.authentication.refreshToken||"",refreshTokenExpiresAt:t.authentication.refreshTokenExpiresAt||""}}async refreshToken(e){if(!this.app)throw Error("GitHub App not configured");let t=await this.app.oauth.refreshToken({refreshToken:e});return{token:t.authentication.token,expiresAt:t.authentication.expiresAt||"",refreshToken:t.authentication.refreshToken||"",refreshTokenExpiresAt:t.authentication.refreshTokenExpiresAt||""}}async getInstallationToken(e){if(!this.app)throw Error("GitHub App not configured");let t=await this.app.getInstallationOctokit(e),{data:n}=await t.rest.apps.createInstallationAccessToken({installation_id:e});return n.token}async getUserInstallations(t){if(!this.app)throw Error("GitHub App not configured");let{Octokit:n}=await e.A(864584),i=new n({auth:t}),{data:r}=await i.rest.apps.listInstallationsForAuthenticatedUser();return r.installations}};e.s(["githubApp",0,eK],490553)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__af081168._.js.map