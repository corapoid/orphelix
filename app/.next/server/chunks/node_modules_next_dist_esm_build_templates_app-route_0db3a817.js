module.exports=[269069,e=>{"use strict";var t=e.i(747909),r=e.i(174017),n=e.i(996250),a=e.i(759756),o=e.i(561916),i=e.i(114444),l=e.i(837092),s=e.i(869741),c=e.i(316795),u=e.i(487718),d=e.i(995169),p=e.i(47587),f=e.i(666012),m=e.i(570101),h=e.i(626937),g=e.i(10372),y=e.i(193695);e.i(52474);var R=e.i(600220),v=e.i(89171),E=e.i(304323);function w(e){if(!e)return e;let t=JSON.parse(JSON.stringify(e));return t.metadata&&(delete t.metadata.uid,delete t.metadata.resourceVersion,delete t.metadata.generation,delete t.metadata.creationTimestamp,delete t.metadata.managedFields,delete t.metadata.selfLink),delete t.status,t}function x(e,t){if(!e&&!t)return 1;if(!e||!t)return 0;let r=Object.keys(e),n=Object.keys(t);if(0===r.length&&0===n.length)return 1;if(0===r.length||0===n.length)return 0;let a=0,o=Math.max(r.length,n.length);for(let n of r)t[n]===e[n]&&a++;return a/o}function C(e){return e.toLowerCase().replace(/[-_\s]/g,"").replace(/^(k8s|kube|app|service|svc|deploy|deployment|cm|configmap|config|secret|sec)[-_]?/i,"").replace(/[-_]?(deployment|deploy|service|svc|configmap|cm|config|secret|sec)$/i,"").trim()}class b{async findMatchingFile(e,t){if(0===t.length)return{file:null,method:"none",score:0};let r=t.filter(t=>(function(e,t){let r=e.path.toLowerCase(),n=e.name.toLowerCase();if(["kustomization.yaml","kustomization.yml","kustomize.yaml","kustomize.yml",".helmignore","chart.yaml","chart.yml","values.yaml","values.yml","readme.md","readme.txt"].includes(n))return!1;let a={deployment:["deployment","deploy"],configmap:["configmap","config-map","cm"],secret:["secret","sec"]};for(let e of a[t]||[])if(n.includes(e)||r.includes(`/${e}/`)||r.includes(`/${e}s/`))return!0;for(let e of Object.keys(a).filter(e=>e!==t))for(let t of a[e])if(n.includes(t))return!1;return!0})(t,e.type));if(r.length>0&&r.length,0===r.length)return{file:null,method:"none",score:0};if(1===r.length)return{file:r[0],method:"exact",confidence:1,score:100};if(e.clusterYaml){let t=r.filter(e=>e.content);if(t.length>0){let r=t.map(t=>({file:t,score:function(e,t){try{let r=E.default.load(e),n=E.default.load(t);if(!r||!n)return 0;let a=w(r),o=w(n),i=0,l=0;return a.kind===o.kind&&(i+=25),l+=25,a.metadata?.name===o.metadata?.name&&(i+=15),l+=15,a.metadata?.namespace===o.metadata?.namespace&&(i+=10),l+=10,i+=15*x(a.metadata?.labels,o.metadata?.labels),l+=15,i+=35*function(e,t,r){if(!e&&!t)return 1;if(!e||!t)return 0;let n=0,a=0;for(let o of r)(void 0!==e[o]||void 0!==t[o])&&(a++,JSON.stringify(e[o])===JSON.stringify(t[o])?n+=1:"object"==typeof e[o]&&"object"==typeof t[o]&&(n+=.5*x(e[o],t[o])));return a>0?n/a:0}(a.spec,o.spec,["replicas","template","selector","data"]),l+=35,Math.round(i/l*100)}catch(e){return console.error("YAML comparison error:",e),0}}(e.clusterYaml,t.content)}));r.sort((e,t)=>t.score-e.score);let n=r[0];if(n.score>=70)return{file:n.file,method:"content",confidence:n.score/100,score:n.score}}}let n=this.scoreAllFiles(e,r);n.sort((e,t)=>t.score-e.score);let a=n[0];if(a.score<30)return{file:null,method:"none",score:a.score};let o="fuzzy";return a.score>=90?o="exact":a.score>=70?o="directory":a.score>=50&&(o="namespace"),{file:a.file,method:o,confidence:a.score/100,score:a.score}}scoreAllFiles(e,t){let r=C(e.name),n=C(e.namespace);return t.map(t=>{let a=0,o="none",i=C(t.name.replace(/\.ya?ml$/i,"")),l=t.path.split("/").slice(0,-1).reverse(),s=C(t.path);i===r?(a+=50,o="exact"):i.includes(r)?(a+=40,o="filename-partial"):a+=Math.floor(.3*function(e,t){if(e===t)return 100;if(e.includes(t)||t.includes(e))return 80;let r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(0===r.length)return 100;let a=0;for(let e=0;e<n.length;e++)r.includes(n[e])&&a++;return Math.floor(a/r.length*100)}(i,r));for(let e=0;e<l.length;e++){let t=C(l[e]);if(t===r){a+=40-5*e,o="directory";break}(t.includes(r)||r.includes(t))&&(a+=20-3*e,"none"===o&&(o="directory-partial"))}for(let t of(s.includes(n)&&(a+=15,"none"===o&&(o="namespace")),({deployment:["deployment","deploy","deployments"],configmap:["configmap","config","configs","cm"],secret:["secret","secrets","sec"]})[e.type]||[]))if(s.includes(t)){a+=10;break}return t.path.startsWith("base/")?a+=5:(a+=35,"none"===o&&(o="environment")),{file:t,score:a,method:o}})}}async function A(e,t){return new b().findMatchingFile(e,t)}async function N(e){try{let{resource:t,yamlFiles:r}=await e.json();if(!t||!r)return v.NextResponse.json({error:"Missing required fields: resource, yamlFiles"},{status:400});let n=await A(t,r);return v.NextResponse.json({matchedFile:n.file,method:n.method,confidence:n.confidence})}catch(e){return console.error("Error matching file:",e),v.NextResponse.json({error:"Failed to match file"},{status:500})}}async function O(){return v.NextResponse.json({status:"ok",method:"pattern-matching"})}e.s(["GET",()=>O,"POST",()=>N,"dynamic",0,"force-dynamic","runtime",0,"nodejs"],933877);var k=e.i(933877);let T=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/github/match-file/route",pathname:"/api/github/match-file",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/app/api/github/match-file/route.ts",nextConfigOutput:"",userland:k}),{workAsyncStorage:S,workUnitAsyncStorage:M,serverHooks:P}=T;function _(){return(0,n.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:M})}async function j(e,t,n){T.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/github/match-file/route";v=v.replace(/\/index$/,"")||"/";let E=await T.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!E)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:w,params:x,nextConfig:C,parsedUrl:b,isDraftMode:A,prerenderManifest:N,routerServerContext:O,isOnDemandRevalidate:k,revalidateOnlyGenerated:S,resolvedPathname:M,clientReferenceManifest:P,serverActionsManifest:_}=E,j=(0,s.normalizeAppPath)(v),H=!!(N.dynamicRoutes[j]||N.routes[M]),F=async()=>((null==O?void 0:O.render404)?await O.render404(e,t,b,!1):t.end("This page could not be found"),null);if(H&&!A){let e=!!N.routes[M],t=N.dynamicRoutes[j];if(t&&!1===t.fallback&&!e){if(C.experimental.adapterPath)return await F();throw new y.NoFallbackError}}let U=null;!H||T.isDev||A||(U="/index"===(U=M)?"/":U);let q=!0===T.isDev||!H,I=H&&!q;_&&P&&(0,i.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:P,serverActionsManifest:_,serverModuleMap:(0,l.createServerModuleMap)({serverActionsManifest:_})});let D=e.method||"GET",$=(0,o.getTracer)(),L=$.getActiveScopeSpan(),K={params:x,prerenderManifest:N,renderOpts:{experimental:{authInterrupts:!!C.experimental.authInterrupts},cacheComponents:!!C.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:C.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>T.onRequestError(e,t,n,O)},sharedContext:{buildId:w}},z=new c.NodeNextRequest(e),B=new c.NodeNextResponse(t),G=u.NextRequestAdapter.fromNodeNextRequest(z,(0,u.signalFromNodeResponse)(t));try{let i=async e=>T.handle(G,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=$.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${D} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${D} ${v}`)}),l=!!(0,a.getRequestMeta)(e,"minimalMode"),s=async a=>{var o,s;let c=async({previousCacheEntry:r})=>{try{if(!l&&k&&S&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await i(a);e.fetchMetrics=K.renderOpts.fetchMetrics;let s=K.renderOpts.pendingWaitUntil;s&&n.waitUntil&&(n.waitUntil(s),s=void 0);let c=K.renderOpts.collectedTags;if(!H)return await (0,f.sendResponse)(z,B,o,K.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(o.headers);c&&(t[g.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,n=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:R.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await T.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:I,isOnDemandRevalidate:k})},O),t}},u=await T.handleResponse({req:e,nextConfig:C,cacheKey:U,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:N,isRoutePPREnabled:!1,isOnDemandRevalidate:k,revalidateOnlyGenerated:S,responseGenerator:c,waitUntil:n.waitUntil,isMinimalMode:l});if(!H)return null;if((null==u||null==(o=u.value)?void 0:o.kind)!==R.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(s=u.value)?void 0:s.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",k?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),A&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,m.fromNodeOutgoingHttpHeaders)(u.value.headers);return l&&H||d.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,h.getCacheControlHeader)(u.cacheControl)),await (0,f.sendResponse)(z,B,new Response(u.value.body,{headers:d,status:u.value.status||200})),null};L?await s(L):await $.withPropagatedContext(e.headers,()=>$.trace(d.BaseServerSpan.handleRequest,{spanName:`${D} ${v}`,kind:o.SpanKind.SERVER,attributes:{"http.method":D,"http.target":e.url}},s))}catch(t){if(t instanceof y.NoFallbackError||await T.onRequestError(e,t,{routerKind:"App Router",routePath:j,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:I,isOnDemandRevalidate:k})}),H)throw t;return await (0,f.sendResponse)(z,B,new Response(null,{status:500})),null}}e.s(["handler",()=>j,"patchFetch",()=>_,"routeModule",()=>T,"serverHooks",()=>P,"workAsyncStorage",()=>S,"workUnitAsyncStorage",()=>M],269069)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_0db3a817.js.map