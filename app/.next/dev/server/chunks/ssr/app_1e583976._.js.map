{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/app/app/components/repo-browser/file-tree.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Box from '@mui/material/Box'\nimport List from '@mui/material/List'\nimport ListItem from '@mui/material/ListItem'\nimport ListItemButton from '@mui/material/ListItemButton'\nimport ListItemIcon from '@mui/material/ListItemIcon'\nimport ListItemText from '@mui/material/ListItemText'\nimport Collapse from '@mui/material/Collapse'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport FolderIcon from '@mui/icons-material/Folder'\nimport FolderOpenIcon from '@mui/icons-material/FolderOpen'\nimport InsertDriveFileIcon from '@mui/icons-material/InsertDriveFile'\nimport CodeIcon from '@mui/icons-material/Code'\nimport DescriptionIcon from '@mui/icons-material/Description'\nimport ImageIcon from '@mui/icons-material/Image'\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess'\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore'\nimport FiberManualRecordIcon from '@mui/icons-material/FiberManualRecord'\nimport { GlassPanel } from '@orphelix/ui'\nimport { useGitHubStore, useModeStore } from '@/lib/core/store'\n\ninterface TreeItem {\n  name: string\n  path: string\n  type: 'file' | 'dir'\n  size?: number\n}\n\ninterface FileTreeProps {\n  owner: string\n  repo: string\n  branch: string\n  onFileSelect: (path: string) => void\n  selectedFile?: string\n  searchQuery?: string\n}\n\nexport function FileTree({ owner, repo, branch, onFileSelect, selectedFile, searchQuery = '' }: FileTreeProps) {\n  const { editBasket } = useGitHubStore()\n  const mode = useModeStore((state) => state.mode)\n  const [expandedDirs, setExpandedDirs] = useState<Set<string>>(new Set(['/']))\n  const [dirContents, setDirContents] = useState<Record<string, TreeItem[]>>({})\n  const [loadingDirs, setLoadingDirs] = useState<Set<string>>(new Set())\n  const [expandedStateLoaded, setExpandedStateLoaded] = useState(false)\n  const [wasSearching, setWasSearching] = useState(false)\n  const [preSearchExpanded, setPreSearchExpanded] = useState<Set<string>>(new Set())\n\n  const storageKey = `file-tree-expanded-${owner}-${repo}-${branch}`\n\n  // Load expanded dirs from localStorage on mount\n  useEffect(() => {\n    setExpandedStateLoaded(false)\n    setDirContents({})\n    setLoadingDirs(new Set<string>())\n    setWasSearching(false)\n    setPreSearchExpanded(new Set<string>())\n\n    const fallback = new Set<string>(['/'])\n\n    if (typeof window === 'undefined') {\n      setExpandedDirs(fallback)\n      setExpandedStateLoaded(true)\n      return\n    }\n\n    const saved = window.localStorage.getItem(storageKey)\n    if (saved) {\n      try {\n        const parsed = JSON.parse(saved) as string[]\n        const dirs = new Set<string>(parsed)\n        dirs.add('/') // Ensure root is always expanded\n        setExpandedDirs(dirs)\n      } catch (error) {\n        console.error('Failed to restore expanded directories', error)\n        setExpandedDirs(fallback)\n      }\n    } else {\n      setExpandedDirs(fallback)\n    }\n\n    setExpandedStateLoaded(true)\n  }, [storageKey])\n\n  // Save expanded dirs to localStorage (only after initial load and when not searching)\n  useEffect(() => {\n    if (!expandedStateLoaded || searchQuery || typeof window === 'undefined') {\n      return\n    }\n    window.localStorage.setItem(storageKey, JSON.stringify(Array.from(expandedDirs)))\n  }, [expandedDirs, searchQuery, storageKey, expandedStateLoaded])\n\n  const loadDirectory = async (path: string) => {\n    if (dirContents[path] && dirContents[path].length > 0) return // Already loaded\n\n    setLoadingDirs(prev => new Set(prev).add(path))\n\n    try {\n      const modeParam = mode === 'demo' ? '&mode=demo' : ''\n      const url = `/api/github/tree?owner=${owner}&repo=${repo}&ref=${branch}&path=${encodeURIComponent(path === '/' ? '' : path)}${modeParam}`\n\n      const response = await fetch(url)\n\n      if (response.ok) {\n        const items: TreeItem[] = await response.json()\n        setDirContents(prev => ({ ...prev, [path]: items }))\n      } else {\n        console.error(`[FileTree] Failed to load ${path}:`, response.status, await response.text())\n      }\n    } catch (error) {\n      console.error(`Failed to load directory ${path}:`, error)\n    } finally {\n      setLoadingDirs(prev => {\n        const next = new Set(prev)\n        next.delete(path)\n        return next\n      })\n    }\n  }\n\n  // Load root directory on mount and expanded directories\n  useEffect(() => {\n    if (!expandedStateLoaded) {\n      return\n    }\n\n    loadDirectory('/')\n    // Load all expanded directories\n    expandedDirs.forEach(dir => {\n      if (dir !== '/') {\n        loadDirectory(dir)\n      }\n    })\n  }, [owner, repo, branch, expandedDirs, expandedStateLoaded])\n\n  // Auto-expand directories when searching, restore when search cleared\n  useEffect(() => {\n    if (searchQuery && dirContents['/']) {\n      // Starting a search - save current state\n      if (!wasSearching) {\n        setWasSearching(true)\n        setPreSearchExpanded(new Set(expandedDirs))\n      }\n\n      const expandAll = (items: TreeItem[]) => {\n        items.forEach(item => {\n          if (item.type === 'dir') {\n            setExpandedDirs(prev => new Set(prev).add(item.path))\n            loadDirectory(item.path)\n            if (dirContents[item.path]) {\n              expandAll(dirContents[item.path])\n            }\n          }\n        })\n      }\n      expandAll(dirContents['/'])\n    } else if (!searchQuery && wasSearching) {\n      // Search cleared - restore previous state\n      setWasSearching(false)\n      setExpandedDirs(preSearchExpanded.size > 0 ? preSearchExpanded : new Set(['/']))\n    }\n  }, [searchQuery])\n\n  const toggleDirectory = (path: string) => {\n    const isExpanded = expandedDirs.has(path)\n\n    if (isExpanded) {\n      setExpandedDirs(prev => {\n        const next = new Set(prev)\n        next.delete(path)\n        return next\n      })\n    } else {\n      setExpandedDirs(prev => new Set(prev).add(path))\n      loadDirectory(path)\n    }\n  }\n\n  const getFileIcon = (filename: string) => {\n    const ext = filename.split('.').pop()?.toLowerCase()\n\n    if (ext === 'yml' || ext === 'yaml' || ext === 'json') {\n      return <CodeIcon sx={{ fontSize: 16 }} />\n    }\n    if (ext === 'md' || ext === 'txt') {\n      return <DescriptionIcon sx={{ fontSize: 16 }} />\n    }\n    if (ext === 'png' || ext === 'jpg' || ext === 'svg') {\n      return <ImageIcon sx={{ fontSize: 16 }} />\n    }\n    return <InsertDriveFileIcon sx={{ fontSize: 16 }} />\n  }\n\n  // Check if item or any of its children match the search query\n  const matchesSearch = (item: TreeItem, query: string): boolean => {\n    if (!query) return true\n\n    const fileName = item.name.toLowerCase()\n    const normalizedFile = fileName.replace(/[-_.\\s]/g, '')\n    const normalizedQuery = query.replace(/[-_.\\s]/g, '')\n\n    // Check if current item matches\n    if (fileName.includes(query) || normalizedFile.includes(normalizedQuery)) {\n      return true\n    }\n\n    // If it's a directory, check if any children match\n    if (item.type === 'dir' && dirContents[item.path]) {\n      return dirContents[item.path].some(child => matchesSearch(child, query))\n    }\n\n    return false\n  }\n\n  const renderTree = (items: TreeItem[], _parentPath: string = '', level: number = 0) => {\n    const query = searchQuery.toLowerCase()\n\n    // Filter items - show if they match or have matching children\n    const filteredItems = searchQuery\n      ? items.filter(item => matchesSearch(item, query))\n      : items\n\n    return filteredItems.map((item) => {\n      const fullPath = item.path\n      const isExpanded = expandedDirs.has(fullPath)\n      const isLoading = loadingDirs.has(fullPath)\n      const isSelected = selectedFile === fullPath\n\n      if (item.type === 'dir') {\n        return (\n          <Box key={fullPath}>\n            <ListItem disablePadding>\n              <ListItemButton\n                onClick={() => toggleDirectory(fullPath)}\n                selected={isSelected}\n                sx={{\n                  pl: 1 + level * 1.5,\n                  py: 0.25,\n                  minHeight: 28,\n                }}\n              >\n                <ListItemIcon sx={{ minWidth: 24, mr: 0.5 }}>\n                  {isExpanded ? <FolderOpenIcon sx={{ fontSize: 16 }} /> : <FolderIcon sx={{ fontSize: 16 }} />}\n                </ListItemIcon>\n                <ListItemText\n                  primary={item.name}\n                  primaryTypographyProps={{\n                    fontSize: '0.8125rem',\n                    fontWeight: isExpanded ? 600 : 400,\n                  }}\n                />\n                {isLoading ? (\n                  <CircularProgress size={14} />\n                ) : isExpanded ? (\n                  <ExpandLessIcon sx={{ fontSize: 16 }} />\n                ) : (\n                  <ExpandMoreIcon sx={{ fontSize: 16 }} />\n                )}\n              </ListItemButton>\n            </ListItem>\n            <Collapse in={isExpanded} timeout=\"auto\" unmountOnExit>\n              <List component=\"div\" disablePadding>\n                {dirContents[fullPath] && renderTree(dirContents[fullPath], fullPath, level + 1)}\n              </List>\n            </Collapse>\n          </Box>\n        )\n      }\n\n      const isModified = editBasket.has(fullPath)\n\n      return (\n        <ListItem key={fullPath} disablePadding>\n          <ListItemButton\n            onClick={() => onFileSelect(fullPath)}\n            selected={isSelected}\n            sx={{\n              pl: 1 + level * 1.5,\n              py: 0.25,\n              minHeight: 28,\n              ...(isModified && {\n                bgcolor: (theme) =>\n                  theme.palette.mode === 'dark'\n                    ? 'rgba(255, 193, 7, 0.08)'\n                    : 'rgba(255, 193, 7, 0.12)',\n              }),\n            }}\n          >\n            <ListItemIcon sx={{ minWidth: 24, mr: 0.5 }}>\n              {getFileIcon(item.name)}\n            </ListItemIcon>\n            <ListItemText\n              primary={item.name}\n              primaryTypographyProps={{\n                fontSize: '0.8125rem',\n                fontWeight: isModified ? 600 : 400,\n                color: isModified ? 'warning.main' : 'inherit',\n              }}\n            />\n            {isModified && (\n              <FiberManualRecordIcon\n                sx={{\n                  fontSize: 8,\n                  color: 'warning.main',\n                  ml: 0.5,\n                }}\n              />\n            )}\n          </ListItemButton>\n        </ListItem>\n      )\n    })\n  }\n\n  return (\n    <GlassPanel\n      animationType=\"none\"\n      sx={{\n        width: '100%',\n        height: '100%',\n        overflow: 'auto',\n        p: 0,\n      }}\n    >\n      <List dense sx={{ py: 1, px: 1 }}>\n        {renderTree(dirContents['/'] || [])}\n      </List>\n    </GlassPanel>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 459, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/app/app/components/repo-browser/file-viewer.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Box from '@mui/material/Box'\nimport Typography from '@mui/material/Typography'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport Alert from '@mui/material/Alert'\nimport { useTheme } from '@mui/material/styles'\nimport Editor from '@monaco-editor/react'\nimport type { editor } from 'monaco-editor'\nimport SaveIcon from '@mui/icons-material/Save'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle'\nimport { useGitHubStore, useModeStore } from '@/lib/core/store'\nimport { GlassButton, GlassPanel } from '@orphelix/ui'\n\ninterface FileViewerProps {\n  owner: string\n  repo: string\n  branch: string\n  filePath: string\n  onCreatePR?: (content: string, originalContent: string, sha: string) => void\n}\n\nexport function FileViewer({ owner, repo, branch, filePath }: FileViewerProps) {\n  const theme = useTheme()\n  const { addToBasket, editBasket, removeFromBasket } = useGitHubStore()\n  const mode = useModeStore((state) => state.mode)\n  const [content, setContent] = useState('')\n  const [originalContent, setOriginalContent] = useState('')\n  const [fileSha, setFileSha] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [isSaved, setIsSaved] = useState(false)\n  const [monacoInstance, setMonacoInstance] = useState<typeof import('monaco-editor') | null>(null)\n  const [editorInstance, setEditorInstance] = useState<editor.IStandaloneCodeEditor | null>(null)\n\n  // Load file on mount or when file path changes\n  useEffect(() => {\n    const loadFile = async () => {\n      setIsLoading(true)\n      setError(null)\n\n      try {\n        const modeParam = mode === 'demo' ? '&mode=demo' : ''\n        const response = await fetch(\n          `/api/github/file?owner=${owner}&repo=${repo}&path=${encodeURIComponent(filePath)}&ref=${branch}${modeParam}`\n        )\n\n        if (!response.ok) {\n          throw new Error(`Failed to load file: ${response.statusText}`)\n        }\n\n        const data = await response.json()\n\n        // Check if this file is in the basket\n        const basketEdit = editBasket.get(filePath)\n        const newContent = basketEdit ? basketEdit.content : data.content\n        const newOriginalContent = basketEdit ? basketEdit.originalContent : data.content\n\n        setContent(newContent)\n        setOriginalContent(newOriginalContent)\n        setFileSha(basketEdit ? basketEdit.sha : data.sha)\n        setIsSaved(!!basketEdit)\n      } catch (err) {\n        const error = err as Error\n        setError(error.message || 'Failed to load file')\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    loadFile()\n  }, [owner, repo, branch, filePath, editBasket])\n\n  const hasChanges = content !== originalContent\n  const fileExtension = filePath.split('.').pop()?.toLowerCase()\n  const editorLanguage = fileExtension === 'json' ? 'json' : fileExtension === 'md' ? 'markdown' : 'yaml'\n\n  const handleSave = () => {\n    if (!hasChanges) return\n\n    addToBasket({\n      filePath,\n      content,\n      originalContent,\n      sha: fileSha,\n    })\n    setIsSaved(true)\n  }\n\n  const handleDiscard = () => {\n    removeFromBasket(filePath)\n    setContent(originalContent)\n    setIsSaved(false)\n  }\n\n  // Keyboard shortcut: Cmd+S / Ctrl+S\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === 's') {\n        e.preventDefault()\n        handleSave()\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyDown)\n    return () => window.removeEventListener('keydown', handleKeyDown)\n  }, [content, originalContent, filePath, fileSha])\n\n  // Update isSaved state when content changes\n  useEffect(() => {\n    const basketEdit = editBasket.get(filePath)\n    if (basketEdit && basketEdit.content === content) {\n      setIsSaved(true)\n    } else {\n      setIsSaved(false)\n    }\n  }, [content, editBasket, filePath])\n\n  const handleEditorMount = (editorRef: editor.IStandaloneCodeEditor, monaco: typeof import('monaco-editor')) => {\n    setMonacoInstance(monaco)\n    setEditorInstance(editorRef)\n\n    monaco.editor.defineTheme('kubevista-theme', {\n      base: theme.palette.mode === 'dark' ? 'vs-dark' : 'vs',\n      inherit: true,\n      rules: [],\n      colors: {\n        'editor.background': theme.palette.mode === 'dark' ? '#1a1b26' : '#f5f5f5',\n        'editor.foreground': theme.palette.mode === 'dark' ? '#e0e0e0' : '#1e1e1e',\n        'editorLineNumber.foreground': theme.palette.mode === 'dark' ? '#858585' : '#999999',\n        'editorCursor.foreground': theme.palette.primary.main.startsWith('#') ? theme.palette.primary.main : '#007acc',\n        'editor.selectionBackground': theme.palette.mode === 'dark' ? '#264f78' : '#c8ddff',\n        'editor.lineHighlightBackground': theme.palette.mode === 'dark' ? '#2a2d2e' : '#eeeeee',\n        'editorIndentGuide.background': theme.palette.mode === 'dark' ? '#404040' : '#e0e0e0',\n        'editorIndentGuide.activeBackground': theme.palette.mode === 'dark' ? '#707070' : '#b0b0b0',\n      },\n    })\n    monaco.editor.setTheme('kubevista-theme')\n  }\n\n  // Update editor language when file changes\n  useEffect(() => {\n    if (!editorInstance || !monacoInstance) return\n\n    const model = editorInstance.getModel()\n    if (model) {\n      monacoInstance.editor.setModelLanguage(model, editorLanguage)\n    }\n  }, [editorLanguage, editorInstance, monacoInstance])\n\n  // Update editor theme when theme mode changes\n  useEffect(() => {\n    if (!monacoInstance) return\n\n    monacoInstance.editor.defineTheme('kubevista-theme', {\n      base: theme.palette.mode === 'dark' ? 'vs-dark' : 'vs',\n      inherit: true,\n      rules: [],\n      colors: {\n        'editor.background': theme.palette.mode === 'dark' ? '#1a1b26' : '#f5f5f5',\n        'editor.foreground': theme.palette.mode === 'dark' ? '#e0e0e0' : '#1e1e1e',\n        'editorLineNumber.foreground': theme.palette.mode === 'dark' ? '#858585' : '#999999',\n        'editorCursor.foreground': theme.palette.primary.main.startsWith('#') ? theme.palette.primary.main : '#007acc',\n        'editor.selectionBackground': theme.palette.mode === 'dark' ? '#264f78' : '#c8ddff',\n        'editor.lineHighlightBackground': theme.palette.mode === 'dark' ? '#2a2d2e' : '#eeeeee',\n        'editorIndentGuide.background': theme.palette.mode === 'dark' ? '#404040' : '#e0e0e0',\n        'editorIndentGuide.activeBackground': theme.palette.mode === 'dark' ? '#707070' : '#b0b0b0',\n      },\n    })\n    monacoInstance.editor.setTheme('kubevista-theme')\n  }, [theme.palette.mode, monacoInstance, theme.palette.primary.main])\n\n  if (error) {\n    return <Alert severity=\"error\">{error}</Alert>\n  }\n\n  return (\n    <Box sx={{ height: '100%', display: 'flex', flexDirection: 'column', pt: 0, px: 3, pb: 0 }}>\n      {/* Header */}\n      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2, pt: 1 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n          <Typography variant=\"h6\">{filePath}</Typography>\n          {isSaved && hasChanges && (\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5, color: 'success.main' }}>\n              <CheckCircleIcon fontSize=\"small\" />\n              <Typography variant=\"body2\">Saved</Typography>\n            </Box>\n          )}\n          {!isSaved && hasChanges && (\n            <Typography variant=\"body2\" sx={{ color: 'warning.main' }}>\n              Unsaved changes\n            </Typography>\n          )}\n        </Box>\n        <Box sx={{ display: 'flex', gap: 1 }}>\n          {isSaved && (\n            <GlassButton\n              color=\"warning\"\n              onClick={handleDiscard}\n              sx={{\n                textTransform: 'none',\n                py: 0.75,\n                px: 2,\n                minWidth: 'auto',\n                borderColor: 'warning.main',\n                color: 'warning.main',\n                '&:hover': {\n                  borderColor: 'warning.dark',\n                },\n              }}\n            >\n              Discard Changes\n            </GlassButton>\n          )}\n          <GlassButton\n            disabled={!hasChanges}\n            onClick={handleSave}\n            startIcon={isSaved ? <CheckCircleIcon /> : <SaveIcon />}\n            sx={{\n              textTransform: 'none',\n              fontWeight: 600,\n              minWidth: 140,\n              px: 3,\n              py: 0.75,\n              justifyContent: 'center',\n              ...(isSaved && {\n                color: 'success.main',\n                borderColor: 'success.main',\n              }),\n            }}\n          >\n            {isSaved ? 'Saved' : 'Save'}\n          </GlassButton>\n        </Box>\n      </Box>\n\n      {/* Editor */}\n      <GlassPanel\n        animationType=\"none\"\n        sx={{\n          flex: 1,\n          overflow: 'hidden',\n          p: 0,\n          display: 'flex',\n          flexDirection: 'column',\n        }}\n      >\n        <Box sx={{ flex: 1, minHeight: 0 }}>\n          {monacoInstance || !isLoading ? (\n            <Editor\n              height=\"100%\"\n              language={editorLanguage}\n              value={content}\n              theme={theme.palette.mode === 'dark' ? 'vs-dark' : 'vs'}\n              onChange={(value) => setContent(value || '')}\n              onMount={handleEditorMount}\n              options={{\n                minimap: { enabled: false },\n                fontSize: 13,\n                lineNumbers: 'on',\n                scrollBeyondLastLine: false,\n                scrollbar: {\n                  vertical: 'visible',\n                  horizontal: 'visible',\n                  useShadows: false,\n                  verticalScrollbarSize: 10,\n                  horizontalScrollbarSize: 10,\n                },\n                hideCursorInOverviewRuler: true,\n                overviewRulerLanes: 0,\n                readOnly: isLoading,\n              }}\n            />\n          ) : (\n            <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\n              <CircularProgress />\n            </Box>\n          )}\n        </Box>\n      </GlassPanel>\n    </Box>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 879, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/app/lib/github/template-generator.ts"],"sourcesContent":["/**\n * Kubernetes Manifest Template Generator\n *\n * Generates Deployment, Service, and Kustomization manifests\n * based on user input and repository structure\n */\n\nimport type { RepoStructure } from './repo-analyzer'\n\nexport interface ResourcePreset {\n  name: 'small' | 'medium' | 'large' | 'custom'\n  requests: { memory: string; cpu: string }\n  limits: { memory: string; cpu: string }\n}\n\nexport interface AppTemplate {\n  name: string\n  namespace: string\n  replicas: number\n  resources: ResourcePreset\n  image: string\n  port?: number\n  type: 'deployment' | 'statefulset'\n  env?: Array<{ name: string; value: string }>\n  repoUrl?: string\n  autoscaling?: {\n    enabled: boolean\n    minReplicas: number\n    maxReplicas: number\n    targetCPU: number\n    targetMemory: number\n  }\n}\n\nexport interface GeneratedFile {\n  path: string\n  content: string\n  sha?: string // For existing files that need update\n}\n\nexport interface GeneratedFiles {\n  deployment: GeneratedFile\n  service?: GeneratedFile\n  hpa?: GeneratedFile\n  kustomization?: GeneratedFile\n  overlays?: GeneratedFile[]\n}\n\n/**\n * Resource presets for common workload sizes\n */\nexport const RESOURCE_PRESETS: Record<string, ResourcePreset> = {\n  small: {\n    name: 'small',\n    requests: { memory: '128Mi', cpu: '250m' },\n    limits: { memory: '256Mi', cpu: '500m' },\n  },\n  medium: {\n    name: 'medium',\n    requests: { memory: '256Mi', cpu: '500m' },\n    limits: { memory: '512Mi', cpu: '1000m' },\n  },\n  large: {\n    name: 'large',\n    requests: { memory: '512Mi', cpu: '1000m' },\n    limits: { memory: '1Gi', cpu: '2000m' },\n  },\n}\n\n/**\n * Generate all necessary manifests for a new application\n */\nexport function generateManifests(\n  template: AppTemplate,\n  repoStructure: RepoStructure\n): GeneratedFiles {\n  const files: GeneratedFiles = {\n    deployment: generateDeployment(template, repoStructure),\n  }\n\n  // Generate service if port is specified\n  if (template.port) {\n    files.service = generateService(template, repoStructure)\n  }\n\n  // Generate HPA if autoscaling is enabled\n  if (template.autoscaling?.enabled) {\n    files.hpa = generateHPA(template, repoStructure)\n  }\n\n  // Generate/update kustomization.yaml if repo uses Kustomize\n  if (repoStructure.hasKustomize && repoStructure.baseDir) {\n    files.kustomization = generateKustomization(template, repoStructure, files)\n\n    // Generate overlay kustomizations for each environment\n    if (repoStructure.overlayDirs.length > 0) {\n      files.overlays = generateOverlays(template, repoStructure)\n    }\n  }\n\n  return files\n}\n\n/**\n * Generate Deployment or StatefulSet manifest\n */\nfunction generateDeployment(\n  template: AppTemplate,\n  repoStructure: RepoStructure\n): GeneratedFile {\n  const { name, namespace, replicas, resources, image, port, type, env, repoUrl } = template\n\n  // Determine file path based on repo structure\n  let path: string\n  if (repoStructure.structure === 'kustomize' && repoStructure.baseDir) {\n    path = `${repoStructure.baseDir}/${name}-${type}.yaml`\n  } else if (repoStructure.deploymentDirs.length > 0) {\n    path = `${repoStructure.deploymentDirs[0]}/${name}.yaml`\n  } else {\n    // Default to k8s/deployments\n    path = `k8s/deployments/${name}.yaml`\n  }\n\n  const kind = type === 'statefulset' ? 'StatefulSet' : 'Deployment'\n  const apiVersion = type === 'statefulset' ? 'apps/v1' : 'apps/v1'\n\n  // Build container spec\n  const containerPorts = port\n    ? `\\n        ports:\\n        - containerPort: ${port}\\n          protocol: TCP`\n    : ''\n\n  const envVars = env && env.length > 0\n    ? `\\n        env:\\n` + env.map(e => `        - name: ${e.name}\\n          value: \"${e.value}\"`).join('\\n')\n    : ''\n\n  // Build annotations\n  const annotations = repoUrl\n    ? `\\n  annotations:\\n    orphelix.io/repository: \"${repoUrl}\"`\n    : ''\n\n  // Generate YAML content\n  const content = `apiVersion: ${apiVersion}\nkind: ${kind}\nmetadata:\n  name: ${name}\n  namespace: ${namespace}${annotations}\n  labels:\n    app: ${name}\n    managed-by: orphelix\nspec:\n  replicas: ${replicas}\n  selector:\n    matchLabels:\n      app: ${name}\n  template:\n    metadata:\n      labels:\n        app: ${name}\n    spec:\n      containers:\n      - name: ${name}\n        image: ${image}${containerPorts}${envVars}\n        resources:\n          requests:\n            memory: \"${resources.requests.memory}\"\n            cpu: \"${resources.requests.cpu}\"\n          limits:\n            memory: \"${resources.limits.memory}\"\n            cpu: \"${resources.limits.cpu}\"\n${type === 'statefulset' ? `  serviceName: ${name}` : ''}\n`\n\n  return { path, content }\n}\n\n/**\n * Generate Service manifest\n */\nfunction generateService(\n  template: AppTemplate,\n  repoStructure: RepoStructure\n): GeneratedFile {\n  const { name, namespace, port } = template\n\n  // Determine file path\n  let path: string\n  if (repoStructure.structure === 'kustomize' && repoStructure.baseDir) {\n    path = `${repoStructure.baseDir}/${name}-service.yaml`\n  } else if (repoStructure.serviceDirs.length > 0) {\n    path = `${repoStructure.serviceDirs[0]}/${name}-svc.yaml`\n  } else {\n    path = `k8s/services/${name}-svc.yaml`\n  }\n\n  const content = `apiVersion: v1\nkind: Service\nmetadata:\n  name: ${name}-svc\n  namespace: ${namespace}\n  labels:\n    app: ${name}\n    managed-by: orphelix\nspec:\n  type: ClusterIP\n  selector:\n    app: ${name}\n  ports:\n  - port: ${port}\n    targetPort: ${port}\n    protocol: TCP\n    name: http\n`\n\n  return { path, content }\n}\n\n/**\n * Generate HorizontalPodAutoscaler manifest\n */\nfunction generateHPA(\n  template: AppTemplate,\n  repoStructure: RepoStructure\n): GeneratedFile {\n  const { name, namespace, autoscaling } = template\n\n  if (!autoscaling) {\n    throw new Error('Autoscaling configuration is required')\n  }\n\n  // Determine file path\n  let path: string\n  if (repoStructure.structure === 'kustomize' && repoStructure.baseDir) {\n    path = `${repoStructure.baseDir}/${name}-hpa.yaml`\n  } else {\n    path = `k8s/hpa/${name}-hpa.yaml`\n  }\n\n  const content = `apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: ${name}-hpa\n  namespace: ${namespace}\n  labels:\n    app: ${name}\n    managed-by: orphelix\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: ${name}\n  minReplicas: ${autoscaling.minReplicas}\n  maxReplicas: ${autoscaling.maxReplicas}\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: ${autoscaling.targetCPU}\n  - type: Resource\n    resource:\n      name: memory\n      target:\n        type: Utilization\n        averageUtilization: ${autoscaling.targetMemory}\n  behavior:\n    scaleDown:\n      stabilizationWindowSeconds: 300\n      policies:\n      - type: Percent\n        value: 50\n        periodSeconds: 15\n    scaleUp:\n      stabilizationWindowSeconds: 0\n      policies:\n      - type: Percent\n        value: 100\n        periodSeconds: 15\n      - type: Pods\n        value: 2\n        periodSeconds: 15\n      selectPolicy: Max\n`\n\n  return { path, content }\n}\n\n/**\n * Generate or update kustomization.yaml\n */\nfunction generateKustomization(\n  template: AppTemplate,\n  repoStructure: RepoStructure,\n  generatedFiles: Pick<GeneratedFiles, 'deployment' | 'service' | 'hpa'>\n): GeneratedFile {\n  const { name } = template\n\n  if (!repoStructure.baseDir) {\n    throw new Error('Base directory not found for Kustomize structure')\n  }\n\n  const path = `${repoStructure.baseDir}/kustomization.yaml`\n\n  // Build list of resources to include\n  const resources: string[] = []\n\n  // Add deployment file (just the filename, not full path)\n  const deploymentFile = generatedFiles.deployment.path.split('/').pop()!\n  resources.push(deploymentFile)\n\n  // Add service file if it exists\n  if (generatedFiles.service) {\n    const serviceFile = generatedFiles.service.path.split('/').pop()!\n    resources.push(serviceFile)\n  }\n\n  // Add HPA file if it exists\n  if (generatedFiles.hpa) {\n    const hpaFile = generatedFiles.hpa.path.split('/').pop()!\n    resources.push(hpaFile)\n  }\n\n  // Generate kustomization.yaml content\n  // Note: In a real implementation, you might want to fetch the existing\n  // kustomization.yaml and append to it rather than replacing it\n  const content = `apiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\n\n# Auto-generated by Orphelix\n# Application: ${name}\n\nresources:\n${resources.map(r => `- ${r}`).join('\\n')}\n\ncommonLabels:\n  managed-by: orphelix\n`\n\n  return { path, content }\n}\n\n/**\n * Generate overlay kustomization.yaml files for each environment\n */\nfunction generateOverlays(\n  template: AppTemplate,\n  repoStructure: RepoStructure\n): GeneratedFile[] {\n  const { name, replicas } = template\n  const overlays: GeneratedFile[] = []\n\n  for (const overlayDir of repoStructure.overlayDirs) {\n    // Extract environment name from path (e.g., \"k8s/overlays/dev\" -> \"dev\")\n    const envName = overlayDir.split('/').pop() || 'unknown'\n\n    // Determine replica count based on environment\n    // prod gets the requested replicas, dev gets 1, others get 1\n    const envReplicas = envName === 'prod' || envName === 'production' ? replicas : 1\n\n    const path = `${overlayDir}/kustomization.yaml`\n\n    const content = `apiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\n\n# Auto-generated by Orphelix\n# Application: ${name}\n# Environment: ${envName}\n\nbases:\n- ../../base\n\nnameSuffix: -${envName}\n\nreplicas:\n- name: ${name}\n  count: ${envReplicas}\n\ncommonLabels:\n  environment: ${envName}\n`\n\n    overlays.push({ path, content })\n  }\n\n  return overlays\n}\n\n/**\n * Helper: Validate application name\n */\nexport function validateAppName(name: string): { valid: boolean; error?: string } {\n  if (!name) {\n    return { valid: false, error: 'Name is required' }\n  }\n\n  if (name.length > 63) {\n    return { valid: false, error: 'Name must be 63 characters or less' }\n  }\n\n  // Kubernetes naming rules: lowercase alphanumeric + hyphens\n  const regex = /^[a-z0-9]([-a-z0-9]*[a-z0-9])?$/\n  if (!regex.test(name)) {\n    return {\n      valid: false,\n      error: 'Name must be lowercase alphanumeric characters or hyphens, and must start/end with alphanumeric'\n    }\n  }\n\n  return { valid: true }\n}\n\n/**\n * Helper: Validate Docker image\n */\nexport function validateDockerImage(image: string): { valid: boolean; error?: string } {\n  if (!image) {\n    return { valid: false, error: 'Image is required' }\n  }\n\n  // Basic image format validation (registry/repository:tag or repository:tag)\n  const regex = /^([a-z0-9.-]+\\/)?[a-z0-9._-]+(\\/[a-z0-9._-]+)*(:[a-z0-9._-]+)?$/i\n  if (!regex.test(image)) {\n    return {\n      valid: false,\n      error: 'Invalid Docker image format. Example: nginx:latest or myregistry.com/myapp:v1.0'\n    }\n  }\n\n  return { valid: true }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1238, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/app/app/components/repo-browser/add-app-modal.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Dialog from '@mui/material/Dialog'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogActions from '@mui/material/DialogActions'\nimport Button from '@mui/material/Button'\nimport Box from '@mui/material/Box'\nimport Typography from '@mui/material/Typography'\nimport TextField from '@mui/material/TextField'\nimport Stepper from '@mui/material/Stepper'\nimport Step from '@mui/material/Step'\nimport StepLabel from '@mui/material/StepLabel'\nimport Radio from '@mui/material/Radio'\nimport RadioGroup from '@mui/material/RadioGroup'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport FormControl from '@mui/material/FormControl'\nimport FormLabel from '@mui/material/FormLabel'\nimport Slider from '@mui/material/Slider'\nimport Switch from '@mui/material/Switch'\nimport Select from '@mui/material/Select'\nimport MenuItem from '@mui/material/MenuItem'\nimport InputLabel from '@mui/material/InputLabel'\nimport Autocomplete from '@mui/material/Autocomplete'\nimport Chip from '@mui/material/Chip'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport Alert from '@mui/material/Alert'\nimport Tabs from '@mui/material/Tabs'\nimport Tab from '@mui/material/Tab'\nimport Snackbar from '@mui/material/Snackbar'\nimport Editor from '@monaco-editor/react'\nimport { useTheme } from '@mui/material/styles'\nimport { useTheme as useOrphelixTheme } from '@orphelix/ui'\nimport type { RepoStructure } from '@/lib/github/repo-analyzer'\nimport {\n  type AppTemplate,\n  RESOURCE_PRESETS,\n  generateManifests,\n  validateAppName,\n  validateDockerImage,\n} from '@/lib/github/template-generator'\nimport { useGitHubStore, useModeStore } from '@/lib/core/store'\nimport { GlassButton } from '@orphelix/ui'\n\ninterface AddAppModalProps {\n  open: boolean\n  onClose: () => void\n}\n\nconst STEPS = ['Type', 'Configure', 'Autoscaling', 'Preview', 'Summary']\n\nconst POPULAR_IMAGES = [\n  'nginx:latest',\n  'nginx:alpine',\n  'redis:latest',\n  'postgres:14',\n  'mysql:8',\n  'node:18-alpine',\n  'python:3.11-slim',\n  'busybox:latest',\n]\n\nexport function AddAppModal({ open, onClose }: AddAppModalProps) {\n  const theme = useTheme()\n  const { visualPreset } = useOrphelixTheme()\n  const isGlass = visualPreset !== 'classic'\n  const { selectedRepo, selectedBranch } = useGitHubStore()\n  const { mode, selectedNamespace: currentNamespace } = useModeStore()\n\n  const [activeStep, setActiveStep] = useState(0)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [repoStructure, setRepoStructure] = useState<RepoStructure | null>(null)\n  const [successMessage, setSuccessMessage] = useState<string | null>(null)\n  const [createdPR, setCreatedPR] = useState<{ number: number; url: string; branchName: string } | null>(null)\n  const [isCreatingPR, setIsCreatingPR] = useState(false)\n  const [isMergingPR, setIsMergingPR] = useState(false)\n\n  // Form state\n  const [appType, setAppType] = useState<'deployment' | 'statefulset'>('deployment')\n  const [appName, setAppName] = useState('')\n  const [replicas, setReplicas] = useState(3)\n  const [resourcePreset, setResourcePreset] = useState<keyof typeof RESOURCE_PRESETS>('medium')\n  const [dockerImage, setDockerImage] = useState('')\n  const [port, setPort] = useState<number | ''>('')\n  const [envVars, setEnvVars] = useState<Array<{ name: string; value: string }>>([])\n  const [repoUrl, setRepoUrl] = useState('')\n  const [enableAutoscaling, setEnableAutoscaling] = useState(false)\n  const [minReplicas, setMinReplicas] = useState(1)\n  const [maxReplicas, setMaxReplicas] = useState(10)\n  const [targetCPU, setTargetCPU] = useState(80)\n  const [targetMemory, setTargetMemory] = useState(80)\n\n  // Validation errors\n  const [nameError, setNameError] = useState<string | null>(null)\n  const [imageError, setImageError] = useState<string | null>(null)\n\n  // Preview state\n  const [previewTab, setPreviewTab] = useState(0)\n  const [generatedFiles, setGeneratedFiles] = useState<ReturnType<typeof generateManifests> | null>(null)\n\n  // Load repository structure on mount\n  useEffect(() => {\n    if (!open || !selectedRepo) return\n\n    const loadStructure = async () => {\n      setLoading(true)\n      setError(null)\n\n      try {\n        const modeParam = mode === 'demo' ? '&mode=mock' : ''\n        const response = await fetch(\n          `/api/github/analyze-structure?owner=${selectedRepo.owner}&repo=${selectedRepo.repo}&ref=${selectedBranch}${modeParam}`\n        )\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}))\n          throw new Error(errorData.error || 'Failed to analyze repository structure')\n        }\n\n        const structure: RepoStructure = await response.json()\n        setRepoStructure(structure)\n      } catch (err) {\n        const error = err as Error\n        setError(error.message || 'Failed to load repository structure')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadStructure()\n  }, [open, selectedRepo, selectedBranch, mode])\n\n\n  // Validate app name\n  useEffect(() => {\n    if (!appName) {\n      setNameError(null)\n      return\n    }\n\n    const result = validateAppName(appName)\n    setNameError(result.valid ? null : result.error || 'Invalid name')\n  }, [appName])\n\n  // Validate docker image\n  useEffect(() => {\n    if (!dockerImage) {\n      setImageError(null)\n      return\n    }\n\n    const result = validateDockerImage(dockerImage)\n    setImageError(result.valid ? null : result.error || 'Invalid image')\n  }, [dockerImage])\n\n  const handleNext = () => {\n    if (activeStep === 1) {\n      // Validate form before moving to autoscaling\n      if (!appName || nameError) {\n        setError('Please provide a valid application name')\n        return\n      }\n      if (!dockerImage || imageError) {\n        setError('Please provide a valid Docker image')\n        return\n      }\n    }\n\n    if (activeStep === 2) {\n      // Generate manifests for preview after autoscaling configuration\n      if (repoStructure) {\n        const template: AppTemplate = {\n          name: appName,\n          namespace: currentNamespace || 'default',\n          replicas,\n          resources: RESOURCE_PRESETS[resourcePreset],\n          image: dockerImage,\n          port: port === '' ? undefined : port,\n          type: appType,\n          env: envVars.filter(e => e.name && e.value),\n          repoUrl: repoUrl || undefined,\n          autoscaling: enableAutoscaling ? {\n            enabled: true,\n            minReplicas,\n            maxReplicas,\n            targetCPU,\n            targetMemory,\n          } : undefined,\n        }\n\n        const files = generateManifests(template, repoStructure)\n        setGeneratedFiles(files)\n      }\n    }\n\n    setError(null)\n    setActiveStep((prev) => prev + 1)\n  }\n\n  const handleBack = () => {\n    setError(null)\n    setActiveStep((prev) => prev - 1)\n  }\n\n  const handleCreatePR = async () => {\n    if (!generatedFiles || !selectedRepo) return\n\n    setIsCreatingPR(true)\n    setError(null)\n\n    try {\n      const filesToAdd = []\n      if (generatedFiles.deployment) filesToAdd.push(generatedFiles.deployment)\n      if (generatedFiles.service) filesToAdd.push(generatedFiles.service)\n      if (generatedFiles.hpa) filesToAdd.push(generatedFiles.hpa)\n      if (generatedFiles.kustomization) filesToAdd.push(generatedFiles.kustomization)\n      if (generatedFiles.overlays) filesToAdd.push(...generatedFiles.overlays)\n\n      const branchName = `add-${appName}-${Date.now()}`\n      const commitMessage = `Add ${appName} ${appType}\\n\\nCreated with Orphelix`\n\n      // Create multi-file PR\n      const response = await fetch('/api/github/create-multi-file-pr', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          owner: selectedRepo.owner,\n          repo: selectedRepo.repo,\n          branch: branchName,\n          baseBranch: selectedBranch,\n          files: filesToAdd.map(f => ({ path: f.path, content: f.content })),\n          commitMessage,\n          prTitle: `Add ${appName} application`,\n          prBody: `## New Application: ${appName}\n\n**Type:** ${appType === 'deployment' ? 'Deployment' : 'StatefulSet'}\n**Namespace:** ${currentNamespace || 'default'}\n**Replicas:** ${replicas}${enableAutoscaling ? ` (autoscaling: ${minReplicas}-${maxReplicas})` : ''}\n**Image:** ${dockerImage}\n${port ? `**Port:** ${port}` : ''}\n${repoUrl ? `**Source:** ${repoUrl}` : ''}\n\n### Files Created\n${filesToAdd.map(f => `- \\`${f.path}\\``).join('\\n')}\n\n---\n Generated with Orphelix`,\n        }),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Failed to create PR')\n      }\n\n      const data = await response.json()\n      setCreatedPR({\n        number: data.number,\n        url: data.url,\n        branchName,\n      })\n\n      // Move to summary step\n      setActiveStep(4)\n    } catch (err) {\n      const error = err as Error\n      setError(error.message || 'Failed to create pull request')\n    } finally {\n      setIsCreatingPR(false)\n    }\n  }\n\n  const handleMergePR = async () => {\n    if (!createdPR || !selectedRepo) return\n\n    setIsMergingPR(true)\n    setError(null)\n\n    try {\n      const response = await fetch('/api/github/merge-pr', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          owner: selectedRepo.owner,\n          repo: selectedRepo.repo,\n          pullNumber: createdPR.number,\n        }),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Failed to merge PR')\n      }\n\n      setSuccessMessage(`Pull request #${createdPR.number} merged successfully!`)\n      onClose()\n    } catch (err) {\n      const error = err as Error\n      setError(error.message || 'Failed to merge pull request')\n    } finally {\n      setIsMergingPR(false)\n    }\n  }\n\n  const handleClose = () => {\n    // Reset form\n    setActiveStep(0)\n    setAppName('')\n    setReplicas(3)\n    setResourcePreset('medium')\n    setDockerImage('')\n    setPort('')\n    setEnvVars([])\n    setRepoUrl('')\n    setEnableAutoscaling(false)\n    setMinReplicas(1)\n    setMaxReplicas(10)\n    setTargetCPU(80)\n    setTargetMemory(80)\n    setError(null)\n    setGeneratedFiles(null)\n    setCreatedPR(null)\n    setIsCreatingPR(false)\n    setIsMergingPR(false)\n\n    onClose()\n  }\n\n  const renderStepContent = () => {\n    switch (activeStep) {\n      case 0:\n        return (\n          <Box>\n            <FormControl>\n              <FormLabel>Application Type</FormLabel>\n              <RadioGroup value={appType} onChange={(e) => setAppType(e.target.value as 'deployment' | 'statefulset')}>\n                <FormControlLabel\n                  value=\"deployment\"\n                  control={<Radio />}\n                  label={\n                    <Box>\n                      <Typography variant=\"body1\" fontWeight={600}>Deployment</Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Stateless applications, can scale horizontally\n                      </Typography>\n                    </Box>\n                  }\n                />\n                <FormControlLabel\n                  value=\"statefulset\"\n                  control={<Radio />}\n                  label={\n                    <Box>\n                      <Typography variant=\"body1\" fontWeight={600}>StatefulSet</Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Stateful applications with persistent identity\n                      </Typography>\n                    </Box>\n                  }\n                />\n              </RadioGroup>\n            </FormControl>\n          </Box>\n        )\n\n      case 1:\n        return (\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n            <TextField\n              label=\"Application Name\"\n              value={appName}\n              onChange={(e) => setAppName(e.target.value.toLowerCase())}\n              error={!!nameError}\n              helperText={nameError || 'Lowercase alphanumeric and hyphens only'}\n              fullWidth\n              required\n            />\n\n            <TextField\n              label=\"Namespace\"\n              value={currentNamespace || 'default'}\n              fullWidth\n              disabled\n              helperText=\"Namespace is set from your current context. Change context in Settings to deploy to a different namespace.\"\n            />\n\n            <FormControl fullWidth>\n              <InputLabel>Resource Preset</InputLabel>\n              <Select\n                value={resourcePreset}\n                label=\"Resource Preset\"\n                onChange={(e) => setResourcePreset(e.target.value as keyof typeof RESOURCE_PRESETS)}\n              >\n                <MenuItem value=\"small\">\n                  Small (128Mi/250m  256Mi/500m)\n                </MenuItem>\n                <MenuItem value=\"medium\">\n                  Medium (256Mi/500m  512Mi/1000m)\n                </MenuItem>\n                <MenuItem value=\"large\">\n                  Large (512Mi/1000m  1Gi/2000m)\n                </MenuItem>\n              </Select>\n            </FormControl>\n\n            <Autocomplete\n              freeSolo\n              options={POPULAR_IMAGES}\n              value={dockerImage}\n              onChange={(_, newValue) => setDockerImage(newValue || '')}\n              renderInput={(params) => (\n                <TextField\n                  {...params}\n                  label=\"Docker Image\"\n                  error={!!imageError}\n                  helperText={imageError || 'e.g., nginx:latest or myregistry.com/app:v1.0'}\n                  required\n                />\n              )}\n            />\n\n            <TextField\n              label=\"Port (optional)\"\n              type=\"number\"\n              value={port}\n              onChange={(e) => setPort(e.target.value === '' ? '' : parseInt(e.target.value))}\n              helperText=\"Container port to expose. Service will be created if specified.\"\n              fullWidth\n            />\n\n            <TextField\n              label=\"Repository URL (optional)\"\n              value={repoUrl}\n              onChange={(e) => setRepoUrl(e.target.value)}\n              fullWidth\n              helperText=\"Link to source code repository (e.g., https://github.com/user/repo)\"\n              placeholder=\"https://github.com/...\"\n            />\n          </Box>\n        )\n\n      case 2:\n        return (\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={enableAutoscaling}\n                  onChange={(e) => setEnableAutoscaling(e.target.checked)}\n                />\n              }\n              label=\"Enable Horizontal Pod Autoscaling (HPA)\"\n            />\n\n            {enableAutoscaling ? (\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n                <Alert severity=\"info\">\n                  HPA will automatically scale your application between min and max replicas based on CPU and memory utilization.\n                </Alert>\n\n                <Box>\n                  <Typography gutterBottom>Initial Replicas: {replicas}</Typography>\n                  <Slider\n                    value={replicas}\n                    onChange={(_, value) => setReplicas(value as number)}\n                    min={1}\n                    max={10}\n                    marks\n                    valueLabelDisplay=\"auto\"\n                  />\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Number of replicas to start with before autoscaling takes effect\n                  </Typography>\n                </Box>\n\n                <Box>\n                  <Typography gutterBottom>Min Replicas: {minReplicas}</Typography>\n                  <Slider\n                    value={minReplicas}\n                    onChange={(_, value) => {\n                      const newMin = value as number\n                      setMinReplicas(newMin)\n                      // Ensure max is always >= min\n                      if (maxReplicas < newMin) {\n                        setMaxReplicas(newMin)\n                      }\n                    }}\n                    min={1}\n                    max={20}\n                    marks\n                    valueLabelDisplay=\"auto\"\n                  />\n                </Box>\n\n                <Box>\n                  <Typography gutterBottom>Max Replicas: {maxReplicas}</Typography>\n                  <Slider\n                    value={maxReplicas}\n                    onChange={(_, value) => setMaxReplicas(value as number)}\n                    min={minReplicas}\n                    max={20}\n                    marks\n                    valueLabelDisplay=\"auto\"\n                  />\n                </Box>\n\n                <Box>\n                  <Typography gutterBottom>Target CPU Utilization: {targetCPU}%</Typography>\n                  <Slider\n                    value={targetCPU}\n                    onChange={(_, value) => setTargetCPU(value as number)}\n                    min={10}\n                    max={100}\n                    step={5}\n                    marks={[\n                      { value: 50, label: '50%' },\n                      { value: 80, label: '80%' },\n                    ]}\n                    valueLabelDisplay=\"auto\"\n                  />\n                </Box>\n\n                <Box>\n                  <Typography gutterBottom>Target Memory Utilization: {targetMemory}%</Typography>\n                  <Slider\n                    value={targetMemory}\n                    onChange={(_, value) => setTargetMemory(value as number)}\n                    min={10}\n                    max={100}\n                    step={5}\n                    marks={[\n                      { value: 50, label: '50%' },\n                      { value: 80, label: '80%' },\n                    ]}\n                    valueLabelDisplay=\"auto\"\n                  />\n                </Box>\n              </Box>\n            ) : (\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n                <Alert severity=\"info\">\n                  Autoscaling is disabled. Your application will run with a fixed number of replicas.\n                </Alert>\n\n                <Box>\n                  <Typography gutterBottom>Replicas: {replicas}</Typography>\n                  <Slider\n                    value={replicas}\n                    onChange={(_, value) => setReplicas(value as number)}\n                    min={1}\n                    max={10}\n                    marks\n                    valueLabelDisplay=\"auto\"\n                  />\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Fixed number of pod replicas to run\n                  </Typography>\n                </Box>\n              </Box>\n            )}\n          </Box>\n        )\n\n      case 3:\n        if (!generatedFiles) return <CircularProgress />\n\n        // Flatten all files into a single array for display\n        const allFiles: Array<{ name: string; file: { path: string; content: string } }> = []\n\n        if (generatedFiles.deployment) {\n          allFiles.push({ name: 'Deployment', file: generatedFiles.deployment })\n        }\n        if (generatedFiles.service) {\n          allFiles.push({ name: 'Service', file: generatedFiles.service })\n        }\n        if (generatedFiles.hpa) {\n          allFiles.push({ name: 'HPA', file: generatedFiles.hpa })\n        }\n        if (generatedFiles.kustomization) {\n          allFiles.push({ name: 'Base Kustomization', file: generatedFiles.kustomization })\n        }\n        if (generatedFiles.overlays) {\n          generatedFiles.overlays.forEach((overlay, idx) => {\n            const envName = overlay.path.split('/').filter(p => p !== 'kustomization.yaml').pop() || `overlay-${idx}`\n            allFiles.push({ name: `${envName} Kustomization`, file: overlay })\n          })\n        }\n\n        return (\n          <Box>\n            <Tabs value={previewTab} onChange={(_, val) => setPreviewTab(val)}>\n              {allFiles.map(({ name }) => (\n                <Tab key={name} label={name} />\n              ))}\n            </Tabs>\n\n            <Box sx={{ mt: 2 }}>\n              {allFiles.map(({ name, file }, index) => (\n                <Box key={name} sx={{ display: previewTab === index ? 'block' : 'none' }}>\n                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mb: 1, display: 'block' }}>\n                    {file.path}\n                  </Typography>\n                  <Box\n                    sx={{\n                      borderRadius: (theme) => `${theme.shape.borderRadius}px`,\n                      overflow: 'hidden',\n                      border: 1,\n                      borderColor: 'divider',\n                      height: 400,\n                    }}\n                  >\n                    <Editor\n                      height=\"400px\"\n                      language=\"yaml\"\n                      value={file.content}\n                      options={{\n                        readOnly: true,\n                        minimap: { enabled: false },\n                        fontSize: 13,\n                      }}\n                      theme={theme.palette.mode === 'dark' ? 'vs-dark' : 'vs'}\n                    />\n                  </Box>\n                </Box>\n              ))}\n            </Box>\n          </Box>\n        )\n\n      case 4:\n        if (!createdPR) return null\n\n        return (\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n            <Alert severity=\"success\">\n              Pull request created successfully!\n            </Alert>\n\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                <Typography variant=\"subtitle2\">PR Number:</Typography>\n                <Chip label={`#${createdPR.number}`} color=\"primary\" />\n              </Box>\n\n              <Box>\n                <Typography variant=\"subtitle2\" gutterBottom>PR URL:</Typography>\n                <Typography\n                  component=\"a\"\n                  href={createdPR.url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  sx={{ color: 'primary.main', textDecoration: 'none', '&:hover': { textDecoration: 'underline' } }}\n                >\n                  {createdPR.url}\n                </Typography>\n              </Box>\n\n              <Box>\n                <Typography variant=\"subtitle2\" gutterBottom>Branch:</Typography>\n                <Chip label={createdPR.branchName} variant=\"outlined\" />\n              </Box>\n\n              <Box sx={{ mt: 2 }}>\n                <Typography variant=\"subtitle2\" gutterBottom>Application Summary:</Typography>\n                <Box sx={{ p: 2, bgcolor: 'background.default', borderRadius: (theme) => `${theme.shape.borderRadius}px` }}>\n                  <Typography variant=\"body2\"><strong>Name:</strong> {appName}</Typography>\n                  <Typography variant=\"body2\"><strong>Type:</strong> {appType === 'deployment' ? 'Deployment' : 'StatefulSet'}</Typography>\n                  <Typography variant=\"body2\"><strong>Namespace:</strong> {currentNamespace || 'default'}</Typography>\n                  <Typography variant=\"body2\"><strong>Image:</strong> {dockerImage}</Typography>\n                  {port && <Typography variant=\"body2\"><strong>Port:</strong> {port}</Typography>}\n                  <Typography variant=\"body2\">\n                    <strong>Scaling:</strong> {enableAutoscaling ? `Autoscaling (${minReplicas}-${maxReplicas})` : `Fixed (${replicas})`}\n                  </Typography>\n                </Box>\n              </Box>\n            </Box>\n          </Box>\n        )\n\n      default:\n        return null\n    }\n  }\n\n  if (!selectedRepo) {\n    return null\n  }\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      maxWidth=\"md\"\n      fullWidth\n      PaperProps={{\n        sx: {\n          bgcolor: 'background.paper',\n          ...(isGlass && {\n            backdropFilter: 'blur(60px)',\n          }),\n          border: theme.palette.mode === 'light'\n            ? '1px solid rgba(209, 213, 219, 0.4)'\n            : '1px solid rgba(255, 255, 255, 0.12)',\n        },\n      }}\n    >\n      <DialogTitle>Add New Application</DialogTitle>\n\n      <DialogContent>\n        {loading && (\n          <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n            <CircularProgress />\n          </Box>\n        )}\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => setError(null)}>\n            {error}\n          </Alert>\n        )}\n\n        {!loading && repoStructure && (\n          <>\n            <Stepper activeStep={activeStep} sx={{ mb: 4 }}>\n              {STEPS.map((label) => (\n                <Step key={label}>\n                  <StepLabel>{label}</StepLabel>\n                </Step>\n              ))}\n            </Stepper>\n\n            {renderStepContent()}\n          </>\n        )}\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={handleClose}>Cancel</Button>\n        <Box sx={{ flex: 1 }} />\n        {activeStep > 0 && activeStep < 4 && (\n          <Button onClick={handleBack}>Back</Button>\n        )}\n        {activeStep === 3 ? (\n          // Preview step - Create PR button\n          <GlassButton onClick={handleCreatePR} disabled={isCreatingPR || !generatedFiles}>\n            {isCreatingPR ? <CircularProgress size={24} /> : 'Create Pull Request'}\n          </GlassButton>\n        ) : activeStep === 4 ? (\n          // Summary step - Merge PR button\n          <GlassButton onClick={handleMergePR} disabled={isMergingPR || !createdPR}>\n            {isMergingPR ? <CircularProgress size={24} /> : 'Merge Pull Request'}\n          </GlassButton>\n        ) : (\n          // Steps 0-2 - Next button\n          <GlassButton onClick={handleNext} disabled={loading}>\n            Next\n          </GlassButton>\n        )}\n      </DialogActions>\n\n      <Snackbar\n        open={!!successMessage}\n        autoHideDuration={6000}\n        onClose={() => setSuccessMessage(null)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert\n          onClose={() => setSuccessMessage(null)}\n          severity=\"success\"\n          variant=\"filled\"\n          sx={{ width: '100%' }}\n        >\n          {successMessage}\n        </Alert>\n      </Snackbar>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2721, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/app/app/components/common/refresh-button.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport IconButton from '@mui/material/IconButton'\nimport Tooltip from '@mui/material/Tooltip'\nimport RefreshIcon from '@mui/icons-material/Refresh'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport Box from '@mui/material/Box'\nimport Typography from '@mui/material/Typography'\nimport { useModeStore } from '@/lib/core/store'\n\ninterface RefreshButtonProps {\n  onRefresh: () => unknown\n  isLoading?: boolean\n  size?: 'small' | 'medium' | 'large'\n  showCountdown?: boolean\n}\n\n/**\n * Refresh button with auto-refresh countdown\n *\n * Shows manual refresh button and optional countdown for auto-refresh\n */\nexport function RefreshButton({\n  onRefresh,\n  isLoading = false,\n  size = 'medium',\n  showCountdown = true,\n}: RefreshButtonProps) {\n  const { autoRefreshEnabled, autoRefreshInterval } = useModeStore()\n  const [countdown, setCountdown] = useState(autoRefreshInterval)\n  const [refreshing, setRefreshing] = useState(false)\n\n  // Reset countdown when interval changes\n  useEffect(() => {\n    setCountdown(autoRefreshInterval)\n  }, [autoRefreshInterval])\n\n  // Countdown timer\n  useEffect(() => {\n    if (!autoRefreshEnabled) {\n      setCountdown(autoRefreshInterval)\n      return\n    }\n\n    const timer = setInterval(() => {\n      setCountdown((prev) => {\n        if (prev <= 1) {\n          return autoRefreshInterval\n        }\n        return prev - 1\n      })\n    }, 1000)\n\n    return () => clearInterval(timer)\n  }, [autoRefreshEnabled, autoRefreshInterval])\n\n  const handleRefresh = async () => {\n    setRefreshing(true)\n    setCountdown(autoRefreshInterval) // Reset countdown on manual refresh\n    try {\n      await onRefresh()\n    } finally {\n      setRefreshing(false)\n    }\n  }\n\n  const loading = isLoading || refreshing\n\n  return (\n    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n      {showCountdown && autoRefreshEnabled && (\n        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ minWidth: 40 }}>\n          {countdown}s\n        </Typography>\n      )}\n      <Tooltip title=\"Refresh data\">\n        <IconButton\n          onClick={handleRefresh}\n          disabled={loading}\n          size={size}\n          sx={{\n            '&:hover': {\n              bgcolor: 'action.hover',\n            },\n          }}\n        >\n          {loading ? (\n            <CircularProgress size={size === 'small' ? 16 : 24} />\n          ) : (\n            <RefreshIcon fontSize={size} />\n          )}\n        </IconButton>\n      </Tooltip>\n    </Box>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAuBO,SAAS,cAAc,EAC5B,SAAS,EACT,YAAY,KAAK,EACjB,OAAO,QAAQ,EACf,gBAAgB,IAAI,EACD;IACnB,MAAM,EAAE,kBAAkB,EAAE,mBAAmB,EAAE,GAAG,IAAA,2IAAY;IAChE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,wCAAwC;IACxC,IAAA,kNAAS,EAAC;QACR,aAAa;IACf,GAAG;QAAC;KAAoB;IAExB,kBAAkB;IAClB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,oBAAoB;YACvB,aAAa;YACb;QACF;QAEA,MAAM,QAAQ,YAAY;YACxB,aAAa,CAAC;gBACZ,IAAI,QAAQ,GAAG;oBACb,OAAO;gBACT;gBACA,OAAO,OAAO;YAChB;QACF,GAAG;QAEH,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;QAAoB;KAAoB;IAE5C,MAAM,gBAAgB;QACpB,cAAc;QACd,aAAa,sBAAqB,oCAAoC;QACtE,IAAI;YACF,MAAM;QACR,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,UAAU,aAAa;IAE7B,qBACE,8OAAC,iKAAG;QAAC,IAAI;YAAE,SAAS;YAAQ,YAAY;YAAU,KAAK;QAAE;;YACtD,iBAAiB,oCAChB,8OAAC,+KAAU;gBAAC,SAAQ;gBAAU,OAAM;gBAAiB,IAAI;oBAAE,UAAU;gBAAG;;oBACrE;oBAAU;;;;;;;0BAGf,8OAAC,yKAAO;gBAAC,OAAM;0BACb,cAAA,8OAAC,+KAAU;oBACT,SAAS;oBACT,UAAU;oBACV,MAAM;oBACN,IAAI;wBACF,WAAW;4BACT,SAAS;wBACX;oBACF;8BAEC,wBACC,8OAAC,2LAAgB;wBAAC,MAAM,SAAS,UAAU,KAAK;;;;;6CAEhD,8OAAC,uKAAW;wBAAC,UAAU;;;;;;;;;;;;;;;;;;;;;;AAMnC"}},
    {"offset": {"line": 2850, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/app/app/components/common/page-header.tsx"],"sourcesContent":["'use client'\n\nimport Box from '@mui/material/Box'\nimport Typography from '@mui/material/Typography'\nimport Breadcrumbs from '@mui/material/Breadcrumbs'\nimport Link from '@mui/material/Link'\nimport { RefreshButton } from './refresh-button'\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext'\nimport { useRouter } from 'next/navigation'\n\ninterface BreadcrumbItem {\n  label: string\n  href?: string\n}\n\ninterface PageHeaderProps {\n  title: string | React.ReactNode\n  subtitle?: string\n  metadata?: (string | React.ReactNode)[]  // Array of metadata items to display vertically\n  breadcrumbs?: BreadcrumbItem[]\n  onRefresh?: () => unknown\n  isRefreshing?: boolean\n  actions?: React.ReactNode\n  headerActions?: React.ReactNode  // Actions next to refresh button in breadcrumb line\n  // Filters only (search is now in global header)\n  filters?: React.ReactNode\n}\n\n/**\n * Unified page header component\n *\n * Provides consistent styling across all pages with:\n * - Title and optional subtitle\n * - Breadcrumbs navigation\n * - Filters (on the right, same line as refresh button)\n * - Refresh button\n * - Custom actions\n *\n * Note: Search is now in the global header, not here\n */\nexport function PageHeader({\n  title,\n  subtitle,\n  metadata,\n  breadcrumbs,\n  onRefresh,\n  isRefreshing = false,\n  actions,\n  headerActions,\n  filters,\n}: PageHeaderProps) {\n  const router = useRouter()\n\n  const handleBreadcrumbClick = (href: string) => {\n    router.push(href as never)\n  }\n\n  return (\n    <Box sx={{ mb: 4 }}>\n      {/* Breadcrumbs with refresh button */}\n      {breadcrumbs && breadcrumbs.length > 0 && (\n        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>\n          <Breadcrumbs\n            separator={<NavigateNextIcon fontSize=\"small\" />}\n          >\n            {breadcrumbs.map((crumb, index) => {\n              const isLast = index === breadcrumbs.length - 1\n\n              if (isLast || !crumb.href) {\n                return (\n                  <Typography\n                    key={crumb.label}\n                    color=\"text.primary\"\n                    sx={{ fontSize: '0.875rem', fontWeight: 500 }}\n                  >\n                    {crumb.label}\n                  </Typography>\n                )\n              }\n\n              return (\n                <Link\n                  key={crumb.label}\n                  component=\"button\"\n                  onClick={() => handleBreadcrumbClick(crumb.href!)}\n                  sx={{\n                    fontSize: '0.875rem',\n                    fontWeight: 500,\n                    color: 'text.secondary',\n                    textDecoration: 'none',\n                    cursor: 'pointer',\n                    '&:hover': {\n                      color: 'primary.main',\n                      textDecoration: 'underline',\n                    },\n                  }}\n                >\n                  {crumb.label}\n                </Link>\n              )\n            })}\n          </Breadcrumbs>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            {headerActions}\n            {onRefresh && (\n              <RefreshButton onRefresh={onRefresh} isLoading={isRefreshing} />\n            )}\n          </Box>\n        </Box>\n      )}\n\n      {/* Header with title, filters, and actions on the right */}\n      <Box sx={{ display: 'flex', alignItems: 'flex-start', justifyContent: 'space-between' }}>\n        <Box>\n          {typeof title === 'string' ? (\n            <Typography variant=\"h4\" sx={{ fontWeight: 700, mb: subtitle || metadata ? 0.5 : 0 }}>\n              {title}\n            </Typography>\n          ) : (\n            <Box sx={{ mb: subtitle || metadata ? 0.5 : 0 }}>\n              <Typography variant=\"h4\" component=\"div\" sx={{ fontWeight: 700 }}>\n                {title}\n              </Typography>\n            </Box>\n          )}\n          {subtitle && (\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              {subtitle}\n            </Typography>\n          )}\n          {metadata && metadata.length > 0 && (\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 0.5, mt: 1 }}>\n              {metadata.map((item, index) => (\n                typeof item === 'string' ? (\n                  <Typography key={index} variant=\"body2\" color=\"text.secondary\">\n                    {item}\n                  </Typography>\n                ) : (\n                  <Box key={index}>\n                    {item}\n                  </Box>\n                )\n              ))}\n            </Box>\n          )}\n        </Box>\n\n        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, pt: 0.5 }}>\n          {/* Filters on the right */}\n          {filters}\n          {actions}\n        </Box>\n      </Box>\n    </Box>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAwCO,SAAS,WAAW,EACzB,KAAK,EACL,QAAQ,EACR,QAAQ,EACR,WAAW,EACX,SAAS,EACT,eAAe,KAAK,EACpB,OAAO,EACP,aAAa,EACb,OAAO,EACS;IAChB,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,wBAAwB,CAAC;QAC7B,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC,iKAAG;QAAC,IAAI;YAAE,IAAI;QAAE;;YAEd,eAAe,YAAY,MAAM,GAAG,mBACnC,8OAAC,iKAAG;gBAAC,IAAI;oBAAE,SAAS;oBAAQ,YAAY;oBAAU,gBAAgB;oBAAiB,IAAI;gBAAE;;kCACvF,8OAAC,iLAAW;wBACV,yBAAW,8OAAC,4KAAgB;4BAAC,UAAS;;;;;;kCAErC,YAAY,GAAG,CAAC,CAAC,OAAO;4BACvB,MAAM,SAAS,UAAU,YAAY,MAAM,GAAG;4BAE9C,IAAI,UAAU,CAAC,MAAM,IAAI,EAAE;gCACzB,qBACE,8OAAC,+KAAU;oCAET,OAAM;oCACN,IAAI;wCAAE,UAAU;wCAAY,YAAY;oCAAI;8CAE3C,MAAM,KAAK;mCAJP,MAAM,KAAK;;;;;4BAOtB;4BAEA,qBACE,8OAAC,mKAAI;gCAEH,WAAU;gCACV,SAAS,IAAM,sBAAsB,MAAM,IAAI;gCAC/C,IAAI;oCACF,UAAU;oCACV,YAAY;oCACZ,OAAO;oCACP,gBAAgB;oCAChB,QAAQ;oCACR,WAAW;wCACT,OAAO;wCACP,gBAAgB;oCAClB;gCACF;0CAEC,MAAM,KAAK;+BAfP,MAAM,KAAK;;;;;wBAkBtB;;;;;;kCAEF,8OAAC,iKAAG;wBAAC,IAAI;4BAAE,SAAS;4BAAQ,YAAY;4BAAU,KAAK;wBAAE;;4BACtD;4BACA,2BACC,8OAAC,yKAAa;gCAAC,WAAW;gCAAW,WAAW;;;;;;;;;;;;;;;;;;0BAOxD,8OAAC,iKAAG;gBAAC,IAAI;oBAAE,SAAS;oBAAQ,YAAY;oBAAc,gBAAgB;gBAAgB;;kCACpF,8OAAC,iKAAG;;4BACD,OAAO,UAAU,yBAChB,8OAAC,+KAAU;gCAAC,SAAQ;gCAAK,IAAI;oCAAE,YAAY;oCAAK,IAAI,YAAY,WAAW,MAAM;gCAAE;0CAChF;;;;;qDAGH,8OAAC,iKAAG;gCAAC,IAAI;oCAAE,IAAI,YAAY,WAAW,MAAM;gCAAE;0CAC5C,cAAA,8OAAC,+KAAU;oCAAC,SAAQ;oCAAK,WAAU;oCAAM,IAAI;wCAAE,YAAY;oCAAI;8CAC5D;;;;;;;;;;;4BAIN,0BACC,8OAAC,+KAAU;gCAAC,SAAQ;gCAAQ,OAAM;0CAC/B;;;;;;4BAGJ,YAAY,SAAS,MAAM,GAAG,mBAC7B,8OAAC,iKAAG;gCAAC,IAAI;oCAAE,SAAS;oCAAQ,eAAe;oCAAU,KAAK;oCAAK,IAAI;gCAAE;0CAClE,SAAS,GAAG,CAAC,CAAC,MAAM,QACnB,OAAO,SAAS,yBACd,8OAAC,+KAAU;wCAAa,SAAQ;wCAAQ,OAAM;kDAC3C;uCADc;;;;6DAIjB,8OAAC,iKAAG;kDACD;uCADO;;;;;;;;;;;;;;;;kCASpB,8OAAC,iKAAG;wBAAC,IAAI;4BAAE,SAAS;4BAAQ,YAAY;4BAAc,KAAK;4BAAG,IAAI;wBAAI;;4BAEnE;4BACA;;;;;;;;;;;;;;;;;;;AAKX"}},
    {"offset": {"line": 3083, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/app/app/components/repo-browser/repo-selector.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Box from '@mui/material/Box'\nimport Typography from '@mui/material/Typography'\nimport Button from '@mui/material/Button'\nimport ButtonBase from '@mui/material/ButtonBase'\nimport Avatar from '@mui/material/Avatar'\nimport Chip from '@mui/material/Chip'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport Alert from '@mui/material/Alert'\nimport Grid from '@mui/material/Grid'\nimport GitHubIcon from '@mui/icons-material/GitHub'\nimport LockIcon from '@mui/icons-material/Lock'\nimport PublicIcon from '@mui/icons-material/Public'\nimport SettingsIcon from '@mui/icons-material/Settings'\nimport { useGitHubStore, useModeStore } from '@/lib/core/store'\nimport { useRouter } from 'next/navigation'\nimport { GlassPanel } from '@orphelix/ui'\nimport { PageHeader } from '@/app/components/common/page-header'\n\ninterface Repository {\n  full_name: string\n  name: string\n  owner: {\n    login: string\n    avatar_url?: string\n  }\n  default_branch: string\n  private: boolean\n}\n\nexport function RepoSelector() {\n  const { setSelectedRepo } = useGitHubStore()\n  const mode = useModeStore((state) => state.mode)\n  const router = useRouter()\n  const [loading, setLoading] = useState(false)\n  const [repositories, setRepositories] = useState<Repository[]>([])\n  const [error, setError] = useState<string | null>(null)\n  const [hasCheckedAuth, setHasCheckedAuth] = useState(false)\n\n  useEffect(() => {\n    loadRepositories()\n  }, [])\n\n  const loadRepositories = async () => {\n    setLoading(true)\n    setError(null)\n\n    try {\n      const response = await fetch('/api/github-app/repositories')\n\n      if (response.status === 401) {\n        // Not authenticated - don't show error, just show install button\n        setHasCheckedAuth(true)\n        setRepositories([])\n        setLoading(false)\n        return\n      }\n\n      if (!response.ok) {\n        throw new Error('Failed to load repositories')\n      }\n\n      const data = await response.json()\n      setRepositories(data.repositories || [])\n      setHasCheckedAuth(true)\n    } catch (err) {\n      console.error('Failed to load repositories:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load repositories')\n      setHasCheckedAuth(true)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleInstallApp = () => {\n    if (typeof window === 'undefined') return\n\n    const redirectUri = `${window.location.origin}/api/github-app/callback`\n    const returnTo = encodeURIComponent('/repo-browser')\n    const state = `${Math.random().toString(36).substring(7)}_return=${returnTo}`\n    const clientId = process.env.NEXT_PUBLIC_GITHUB_APP_CLIENT_ID\n    const appName = process.env.NEXT_PUBLIC_GITHUB_APP_NAME\n\n    if (clientId) {\n      // If already have repos, go to app installation settings to add more\n      if (repositories.length > 0 && appName) {\n        window.location.href = `https://github.com/apps/${appName}/installations/new`\n      } else {\n        // Otherwise do OAuth flow\n        window.location.href = `https://github.com/login/oauth/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&state=${state}`\n      }\n    } else {\n      router.push(mode === 'demo' ? '/demo/settings?tab=1' : '/settings?tab=1')\n    }\n  }\n\n  const handleSelectRepo = (repo: Repository) => {\n    setSelectedRepo({\n      owner: repo.owner.login,\n      repo: repo.name,\n      branch: repo.default_branch,\n    })\n  }\n\n  if (loading) {\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '100%',\n          gap: 2,\n        }}\n      >\n        <CircularProgress size={48} />\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Loading repositories...\n        </Typography>\n      </Box>\n    )\n  }\n\n  // Show install prompt if not authenticated or no repos\n  if (hasCheckedAuth && repositories.length === 0 && !error) {\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '100%',\n          px: 3,\n        }}\n      >\n        <Box\n          sx={{\n            maxWidth: 600,\n            textAlign: 'center',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            gap: 3,\n          }}\n        >\n          <GitHubIcon sx={{ fontSize: 80, color: 'text.secondary', opacity: 0.5 }} />\n\n          <Box>\n            <Typography variant=\"h5\" fontWeight={600} gutterBottom>\n              No GitHub Repository Connected\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Install the GitHub App and authorize access to browse your application code.\n            </Typography>\n          </Box>\n\n          <Box sx={{ display: 'flex', gap: 2 }}>\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              startIcon={<GitHubIcon />}\n              onClick={handleInstallApp}\n            >\n              Install GitHub App\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"large\"\n              startIcon={<SettingsIcon />}\n              onClick={() => router.push(mode === 'demo' ? '/demo/settings?tab=1' : '/settings?tab=1')}\n            >\n              Settings\n            </Button>\n          </Box>\n        </Box>\n      </Box>\n    )\n  }\n\n  return (\n    <Box sx={{ height: '100%', overflow: 'auto' }}>\n      <PageHeader\n        title=\"Select Repository\"\n        subtitle=\"Choose a repository to browse and manage your application code\"\n        onRefresh={loadRepositories}\n        actions={\n          <Button\n            variant=\"outlined\"\n            startIcon={<GitHubIcon />}\n            onClick={handleInstallApp}\n          >\n            Add Repository\n          </Button>\n        }\n      />\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\n          {error}\n          <Button size=\"small\" onClick={loadRepositories} sx={{ ml: 2 }}>\n            Retry\n          </Button>\n        </Alert>\n      )}\n\n      <Grid container spacing={3}>\n        {repositories.map((repo) => (\n          <Grid size={{ xs: 12, sm: 12, md: 12, lg: 8, xl: 6 }} key={repo.full_name}>\n            <ButtonBase\n              onClick={() => handleSelectRepo(repo)}\n              sx={{\n                width: '100%',\n                height: '100%',\n                display: 'block',\n                textAlign: 'left',\n                borderRadius: (theme) => `${theme.shape.borderRadius}px`,\n                transition: 'transform 0.2s',\n                '&:hover': {\n                  transform: 'translateY(-4px)',\n                },\n              }}\n            >\n              <GlassPanel\n                sx={{\n                  height: '100%',\n                  cursor: 'pointer',\n                  p: 3,\n                }}\n              >\n                <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 2.5 }}>\n                  <Avatar\n                    src={repo.owner.avatar_url}\n                    alt={repo.owner.login}\n                    sx={{ width: 56, height: 56 }}\n                  >\n                    <GitHubIcon />\n                  </Avatar>\n                  <Box sx={{ flex: 1, minWidth: 0 }}>\n                    <Typography\n                      variant=\"h6\"\n                      fontWeight={600}\n                      sx={{\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                        whiteSpace: 'nowrap',\n                        mb: 0.5,\n                      }}\n                    >\n                      {repo.name}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {repo.owner.login}\n                    </Typography>\n                  </Box>\n                </Box>\n\n                <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n                  <Chip\n                    icon={repo.private ? <LockIcon /> : <PublicIcon />}\n                    label={repo.private ? 'Private' : 'Public'}\n                    size=\"small\"\n                  />\n                  <Chip\n                    label={repo.default_branch}\n                    size=\"small\"\n                  />\n                </Box>\n              </GlassPanel>\n            </ButtonBase>\n          </Grid>\n        ))}\n      </Grid>\n    </Box>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3550, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/app/app/repo-browser/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport Box from '@mui/material/Box'\nimport Typography from '@mui/material/Typography'\nimport Alert from '@mui/material/Alert'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport Fab from '@mui/material/Fab'\nimport Tooltip from '@mui/material/Tooltip'\nimport AddIcon from '@mui/icons-material/Add'\nimport { useGitHubStore, useModeStore } from '@/lib/core/store'\nimport { useRouter, useSearchParams } from 'next/navigation'\nimport { FileTree } from '@/app/components/repo-browser/file-tree'\nimport { FileViewer } from '@/app/components/repo-browser/file-viewer'\nimport { AddAppModal } from '@/app/components/repo-browser/add-app-modal'\nimport { RepoSelector } from '@/app/components/repo-browser/repo-selector'\nimport { usePageSearch } from '@/lib/contexts/search-context'\nimport { mockGitHubRepo } from '@/lib/mocks/github-data'\n\nexport default function RepoBrowserPage() {\n  const { selectedRepo, selectedBranch, setSelectedBranch, setSelectedRepo } = useGitHubStore()\n  const mode = useModeStore((state) => state.mode)\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const [selectedFile, setSelectedFile] = useState<string | null>(null)\n  const [addAppModalOpen, setAddAppModalOpen] = useState(false)\n\n  const [sidebarWidth, setSidebarWidth] = useState(300)\n  const [isResizing, setIsResizing] = useState(false)\n  const [startX, setStartX] = useState(0)\n  const [startWidth, setStartWidth] = useState(300)\n  const [isCreatingPR, setIsCreatingPR] = useState(false)\n  const [prError, setPrError] = useState<string | null>(null)\n  const sidebarRef = useRef<HTMLDivElement>(null)\n  const searchQuery = usePageSearch('Search files...')\n  const sidebarWidthLoaded = useRef(false)\n\n  // Load sidebar width from localStorage on mount\n  useEffect(() => {\n    const saved = localStorage.getItem('repo-browser-sidebar-width')\n    if (saved) {\n      const width = parseInt(saved, 10)\n      if (width >= 200 && width <= 600) {\n        setSidebarWidth(width)\n      }\n    }\n    sidebarWidthLoaded.current = true\n  }, [])\n\n  // Save sidebar width to localStorage (only after initial load)\n  useEffect(() => {\n    if (sidebarWidthLoaded.current) {\n      localStorage.setItem('repo-browser-sidebar-width', sidebarWidth.toString())\n    }\n  }, [sidebarWidth])\n\n  // Load last selected file from localStorage on mount\n  useEffect(() => {\n    if (selectedRepo) {\n      const storageKey = `repo-browser-file-${selectedRepo.owner}-${selectedRepo.repo}-${selectedBranch}`\n      const savedFile = localStorage.getItem(storageKey)\n      if (savedFile) {\n        setSelectedFile(savedFile)\n      }\n    }\n  }, [selectedRepo, selectedBranch])\n\n  // Save selected file to localStorage\n  useEffect(() => {\n    if (selectedRepo && selectedFile) {\n      const storageKey = `repo-browser-file-${selectedRepo.owner}-${selectedRepo.repo}-${selectedBranch}`\n      localStorage.setItem(storageKey, selectedFile)\n    }\n  }, [selectedRepo, selectedBranch, selectedFile])\n\n  // Set demo repo in demo mode\n  useEffect(() => {\n    if (mode === 'demo' && !selectedRepo) {\n      setSelectedRepo(mockGitHubRepo)\n      setSelectedFile(null) // Clear selected file when switching to demo repo\n    }\n  }, [mode, selectedRepo, setSelectedRepo])\n\n  // Clear selected file when repo changes\n  useEffect(() => {\n    setSelectedFile(null)\n  }, [selectedRepo?.owner, selectedRepo?.repo])\n\n  // Clean up GitHub App callback URL parameter\n  useEffect(() => {\n    const githubAppStatus = searchParams.get('github_app')\n    if (githubAppStatus === 'connected' || githubAppStatus === 'installed') {\n      router.replace('/repo-browser', { scroll: false })\n    }\n  }, [searchParams, router])\n\n  useEffect(() => {\n    if (selectedRepo?.branch && !selectedBranch) {\n      setSelectedBranch(selectedRepo.branch)\n    }\n  }, [selectedRepo, selectedBranch, setSelectedBranch])\n\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isResizing) return\n      e.preventDefault()\n\n      const delta = e.clientX - startX\n      const newWidth = startWidth + delta\n\n      if (newWidth >= 200 && newWidth <= 600) {\n        setSidebarWidth(newWidth)\n      }\n    }\n\n    const handleMouseUp = () => {\n      setIsResizing(false)\n      document.body.style.cursor = ''\n      document.body.style.userSelect = ''\n    }\n\n    if (isResizing) {\n      document.body.style.cursor = 'col-resize'\n      document.body.style.userSelect = 'none'\n      document.addEventListener('mousemove', handleMouseMove)\n      document.addEventListener('mouseup', handleMouseUp)\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove)\n      document.removeEventListener('mouseup', handleMouseUp)\n      document.body.style.cursor = ''\n      document.body.style.userSelect = ''\n    }\n  }, [isResizing, startX, startWidth])\n\n  const handleFileSelect = (path: string) => {\n    setSelectedFile(path)\n  }\n\n  const handleCreatePR = async (content: string, _originalContent: string, sha: string) => {\n    if (!selectedRepo || !selectedFile) return\n\n    setIsCreatingPR(true)\n    setPrError(null)\n\n    try {\n      const branchName = `update-${selectedFile.replace(/\\//g, '-')}-${Date.now()}`\n\n      const response = await fetch('/api/github/create-pr', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          owner: selectedRepo.owner,\n          repo: selectedRepo.repo,\n          branch: branchName,\n          baseBranch: selectedBranch,\n          filePath: selectedFile,\n          content,\n          sha,\n          commitMessage: `Update ${selectedFile}`,\n          prTitle: `Update ${selectedFile}`,\n          prBody: `Updated configuration file: ${selectedFile}`,\n        }),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Failed to create PR')\n      }\n\n      const data = await response.json()\n\n      // PR created successfully - data contains { number, url }\n\n      alert(`Pull Request created successfully! #${data.number}\\n${data.url}`)\n    } catch (err) {\n      const error = err as Error\n      setPrError(error.message || 'Failed to create PR')\n    } finally {\n      setIsCreatingPR(false)\n    }\n  }\n\n  if (!selectedRepo) {\n    return <RepoSelector />\n  }\n\n  return (\n    <Box sx={{ height: '100%', width: '100%', display: 'flex', overflow: 'hidden', gap: 3 }}>\n      {/* File Tree Sidebar */}\n      <Box\n        ref={sidebarRef}\n        sx={{\n          width: sidebarWidth,\n          minWidth: sidebarWidth,\n          maxWidth: sidebarWidth,\n          height: '100%',\n          position: 'relative',\n          flexShrink: 0,\n          display: 'flex',\n          flexDirection: 'column',\n        }}\n      >\n          <FileTree\n            owner={selectedRepo.owner}\n            repo={selectedRepo.repo}\n            branch={selectedBranch}\n            onFileSelect={handleFileSelect}\n            selectedFile={selectedFile || undefined}\n            searchQuery={searchQuery}\n          />\n\n          {/* Resize Handle */}\n          <Box\n            onMouseDown={(e) => {\n              e.preventDefault()\n              setStartX(e.clientX)\n              setStartWidth(sidebarWidth)\n              setIsResizing(true)\n            }}\n            sx={{\n              position: 'absolute',\n              right: -4,\n              top: 0,\n              bottom: 0,\n              width: 8,\n              cursor: 'col-resize',\n              backgroundColor: 'transparent',\n              '&:hover': {\n                backgroundColor: 'primary.main',\n              },\n              transition: 'background-color 0.2s',\n              zIndex: 10,\n            }}\n          />\n        </Box>\n\n        {/* Main Content Area */}\n        <Box sx={{ flex: 1, overflow: 'hidden', display: 'flex', flexDirection: 'column', minWidth: 0 }}>\n          {isCreatingPR && (\n            <Alert severity=\"info\" sx={{ mb: 2 }}>\n              <CircularProgress size={16} sx={{ mr: 1 }} />\n              Creating Pull Request...\n            </Alert>\n          )}\n          {prError && (\n            <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => setPrError(null)}>\n              {prError}\n            </Alert>\n          )}\n\n          {selectedFile && selectedFile.match(/\\.(yaml|yml|json|md|txt|gitignore|sh|py|js|ts|tsx|jsx|css|html|xml|env|conf|cfg)$|^\\.gitignore$|^\\.env/) ? (\n            <FileViewer\n              owner={selectedRepo.owner}\n              repo={selectedRepo.repo}\n              branch={selectedBranch}\n              filePath={selectedFile}\n              onCreatePR={handleCreatePR}\n            />\n          ) : selectedFile ? (\n            <Alert severity=\"info\">\n              Preview not available for this file type: {selectedFile}\n            </Alert>\n          ) : (\n            <Box\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                height: '100%',\n              }}\n            >\n              <Typography variant=\"body1\" color=\"text.secondary\">\n                Select a file from the tree to view\n              </Typography>\n            </Box>\n          )}\n        </Box>\n\n        {/* Add App FAB Button */}\n        <Tooltip title=\"Add new application\" placement=\"left\">\n          <Fab\n            color=\"primary\"\n            onClick={() => setAddAppModalOpen(true)}\n            sx={{\n              position: 'fixed',\n              bottom: 32,\n              right: 32,\n              zIndex: 1000,\n            }}\n          >\n            <AddIcon />\n          </Fab>\n        </Tooltip>\n\n        {/* Add App Modal */}\n        <AddAppModal\n          open={addAppModalOpen}\n          onClose={() => setAddAppModalOpen(false)}\n        />\n      </Box>\n    )\n}\n"],"names":[],"mappings":"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"}}]
}