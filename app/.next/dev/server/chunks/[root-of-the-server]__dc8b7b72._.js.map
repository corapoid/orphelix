{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/app/api/contexts/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { execSync } from 'child_process'\n\ninterface KubeContext {\n  name: string\n  cluster: string\n  user: string\n  namespace?: string\n  current: boolean\n}\n\nexport async function GET() {\n  try {\n    // Get contexts with details\n    const output = execSync('kubectl config get-contexts', { encoding: 'utf-8' })\n\n    const lines = output.split('\\n').filter(line => line.trim())\n    const contexts: KubeContext[] = []\n\n    // Skip header line\n    for (let i = 1; i < lines.length; i++) {\n      const line = lines[i]\n      if (!line.trim()) continue\n\n      const isCurrent = line.startsWith('*')\n      const parts = line.replace(/^\\*?\\s+/, '').split(/\\s+/)\n\n      if (parts.length >= 3) {\n        contexts.push({\n          name: parts[0],\n          cluster: parts[1],\n          user: parts[2],\n          // Use namespace from context, fallback to 'default'\n          namespace: parts[3] || 'default',\n          current: isCurrent,\n        })\n      }\n    }\n\n    return NextResponse.json({ contexts })\n  } catch (error) {\n    console.error('[API] Failed to get kubectl contexts:', error)\n    return NextResponse.json(\n      {\n        error: 'Failed to get kubectl contexts',\n        details: error instanceof Error ? error.message : 'Unknown error',\n        contexts: [],\n      },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAUO,eAAe;IACpB,IAAI;QACF,4BAA4B;QAC5B,MAAM,SAAS,IAAA,+HAAQ,EAAC,+BAA+B;YAAE,UAAU;QAAQ;QAE3E,MAAM,QAAQ,OAAO,KAAK,CAAC,MAAM,MAAM,CAAC,CAAA,OAAQ,KAAK,IAAI;QACzD,MAAM,WAA0B,EAAE;QAElC,mBAAmB;QACnB,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;YACrC,MAAM,OAAO,KAAK,CAAC,EAAE;YACrB,IAAI,CAAC,KAAK,IAAI,IAAI;YAElB,MAAM,YAAY,KAAK,UAAU,CAAC;YAClC,MAAM,QAAQ,KAAK,OAAO,CAAC,WAAW,IAAI,KAAK,CAAC;YAEhD,IAAI,MAAM,MAAM,IAAI,GAAG;gBACrB,SAAS,IAAI,CAAC;oBACZ,MAAM,KAAK,CAAC,EAAE;oBACd,SAAS,KAAK,CAAC,EAAE;oBACjB,MAAM,KAAK,CAAC,EAAE;oBACd,oDAAoD;oBACpD,WAAW,KAAK,CAAC,EAAE,IAAI;oBACvB,SAAS;gBACX;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAS;IACtC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yCAAyC;QACvD,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,OAAO;YACP,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAClD,UAAU,EAAE;QACd,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}