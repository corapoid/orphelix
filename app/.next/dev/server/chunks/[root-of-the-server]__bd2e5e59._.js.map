{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/lib/core/api-helpers.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\n\n/**\n * Extract namespace from request query parameters\n * Returns empty string if not provided\n */\nexport function getNamespaceFromRequest(request: NextRequest): string {\n  const searchParams = request.nextUrl.searchParams\n  return searchParams.get('namespace') || ''\n}\n\n/**\n * Extract context name from request query parameters\n * Returns undefined if not provided (will use default context)\n */\nexport function getContextFromRequest(request: NextRequest): string | undefined {\n  const searchParams = request.nextUrl.searchParams\n  const context = searchParams.get('context')\n  return context || undefined\n}\n\n/**\n * Build API URL with namespace query parameter\n */\nexport function buildApiUrl(path: string, namespace: string): string {\n  const url = new URL(path, typeof window !== 'undefined' ? window.location.origin : 'http://localhost:3000')\n  url.searchParams.set('namespace', namespace)\n  return url.toString()\n}\n\n/**\n * Handle Kubernetes API errors and return appropriate NextResponse\n * Handles 401 Unauthorized, 403 Forbidden, and other common errors\n */\nexport function handleK8sError(error: unknown, resourceType: string): NextResponse {\n  console.error(`[API] Failed to fetch ${resourceType}:`, error)\n\n  // Check if it's an authorization error (401)\n  if (error && typeof error === 'object' && 'code' in error) {\n    if (error.code === 401) {\n      return NextResponse.json(\n        {\n          error: 'Unauthorized',\n          message: `You do not have permission to access ${resourceType} in this namespace`,\n          code: 401\n        },\n        { status: 401 }\n      )\n    }\n\n    // Check if it's a forbidden error (403)\n    if (error.code === 403) {\n      return NextResponse.json(\n        {\n          error: 'Forbidden',\n          message: `Access to ${resourceType} is forbidden`,\n          code: 403\n        },\n        { status: 403 }\n      )\n    }\n  }\n\n  // Generic error response\n  return NextResponse.json(\n    { error: `Failed to fetch ${resourceType}` },\n    { status: 500 }\n  )\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAMO,SAAS,wBAAwB,OAAoB;IAC1D,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;IACjD,OAAO,aAAa,GAAG,CAAC,gBAAgB;AAC1C;AAMO,SAAS,sBAAsB,OAAoB;IACxD,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;IACjD,MAAM,UAAU,aAAa,GAAG,CAAC;IACjC,OAAO,WAAW;AACpB;AAKO,SAAS,YAAY,IAAY,EAAE,SAAiB;IACzD,MAAM,MAAM,IAAI,IAAI,MAAM,sCAAgC,0BAAyB;IACnF,IAAI,YAAY,CAAC,GAAG,CAAC,aAAa;IAClC,OAAO,IAAI,QAAQ;AACrB;AAMO,SAAS,eAAe,KAAc,EAAE,YAAoB;IACjE,QAAQ,KAAK,CAAC,CAAC,sBAAsB,EAAE,aAAa,CAAC,CAAC,EAAE;IAExD,6CAA6C;IAC7C,IAAI,SAAS,OAAO,UAAU,YAAY,UAAU,OAAO;QACzD,IAAI,MAAM,IAAI,KAAK,KAAK;YACtB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBACE,OAAO;gBACP,SAAS,CAAC,qCAAqC,EAAE,aAAa,kBAAkB,CAAC;gBACjF,MAAM;YACR,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,wCAAwC;QACxC,IAAI,MAAM,IAAI,KAAK,KAAK;YACtB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBACE,OAAO;gBACP,SAAS,CAAC,UAAU,EAAE,aAAa,aAAa,CAAC;gBACjD,MAAM;YACR,GACA;gBAAE,QAAQ;YAAI;QAElB;IACF;IAEA,yBAAyB;IACzB,OAAO,gJAAY,CAAC,IAAI,CACtB;QAAE,OAAO,CAAC,gBAAgB,EAAE,cAAc;IAAC,GAC3C;QAAE,QAAQ;IAAI;AAElB"}},
    {"offset": {"line": 269, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/lib/k8s/client.ts"],"sourcesContent":["/**\n * Kubernetes Client Configuration\n *\n * This module provides a configured Kubernetes client for interacting with\n * a Kubernetes cluster. It supports multiple authentication methods:\n * - Kubeconfig file (~/.kube/config)\n * - In-cluster configuration (for running inside a pod)\n * - Manual configuration\n */\n\nimport * as k8s from '@kubernetes/client-node'\n\nlet kc: k8s.KubeConfig | null = null\nlet k8sAppsApi: k8s.AppsV1Api | null = null\nlet k8sCoreApi: k8s.CoreV1Api | null = null\nlet k8sAutoscalingApi: k8s.AutoscalingV2Api | null = null\nlet k8sEventsApi: k8s.EventsV1Api | null = null\nlet k8sNetworkingApi: k8s.NetworkingV1Api | null = null\nlet k8sBatchApi: k8s.BatchV1Api | null = null\n\n/**\n * Initialize Kubernetes client\n * Tries in-cluster config first, then falls back to kubeconfig file\n * IMPORTANT: For AWS EKS, we must reload config on every call to refresh tokens\n *\n * @param contextName - Optional context name to switch to. If not provided, uses current context.\n */\nexport function initK8sClient(contextName?: string): void {\n  // Reset client to force reload (needed for AWS EKS exec auth)\n  kc = new k8s.KubeConfig()\n\n  // Always use kubeconfig file for development (not in-cluster)\n  // In-cluster config is only for when running inside Kubernetes pod\n  try {\n    // Load from kubeconfig file (~/.kube/config)\n    kc.loadFromDefault()\n\n    // Switch to specified context if provided\n    if (contextName) {\n      kc.setCurrentContext(contextName)\n    }\n\n    const cluster = kc.getCurrentCluster()\n    const currentCtx = kc.getCurrentContext()\n\n    // Validate cluster configuration\n    if (!cluster?.server) {\n      throw new Error(`Cluster server URL is not configured for context: ${contextName || currentCtx}`)\n    }\n  } catch (error) {\n    console.error('[K8s] Failed to load Kubernetes configuration:', error)\n    throw new Error('Failed to initialize Kubernetes client. Make sure kubeconfig is properly configured.')\n  }\n\n  // Initialize API clients (recreate on every call for fresh tokens)\n  k8sAppsApi = kc.makeApiClient(k8s.AppsV1Api)\n  k8sCoreApi = kc.makeApiClient(k8s.CoreV1Api)\n  k8sAutoscalingApi = kc.makeApiClient(k8s.AutoscalingV2Api)\n  k8sEventsApi = kc.makeApiClient(k8s.EventsV1Api)\n  k8sNetworkingApi = kc.makeApiClient(k8s.NetworkingV1Api)\n  k8sBatchApi = kc.makeApiClient(k8s.BatchV1Api)\n}\n\n/**\n * Get Apps V1 API client (for Deployments, StatefulSets, DaemonSets)\n * @param contextName - Optional context name to switch to\n */\nexport function getAppsApi(contextName?: string): k8s.AppsV1Api {\n  // Always reinitialize for AWS EKS to refresh tokens\n  initK8sClient(contextName)\n  return k8sAppsApi!\n}\n\n/**\n * Get Core V1 API client (for Pods, Services, ConfigMaps, Secrets, Nodes, PVs, PVCs)\n * @param contextName - Optional context name to switch to\n */\nexport function getCoreApi(contextName?: string): k8s.CoreV1Api {\n  // Always reinitialize for AWS EKS to refresh tokens\n  initK8sClient(contextName)\n  return k8sCoreApi!\n}\n\n/**\n * Get Autoscaling V2 API client (for HPAs)\n * @param contextName - Optional context name to switch to\n */\nexport function getAutoscalingApi(contextName?: string): k8s.AutoscalingV2Api {\n  // Always reinitialize for AWS EKS to refresh tokens\n  initK8sClient(contextName)\n  return k8sAutoscalingApi!\n}\n\n/**\n * Get Events V1 API client\n * @param contextName - Optional context name to switch to\n */\nexport function getEventsApi(contextName?: string): k8s.EventsV1Api {\n  // Always reinitialize for AWS EKS to refresh tokens\n  initK8sClient(contextName)\n  return k8sEventsApi!\n}\n\n/**\n * Get Networking V1 API client (for Ingress)\n * @param contextName - Optional context name to switch to\n */\nexport function getNetworkingApi(contextName?: string): k8s.NetworkingV1Api {\n  // Always reinitialize for AWS EKS to refresh tokens\n  initK8sClient(contextName)\n  return k8sNetworkingApi!\n}\n\n/**\n * Get Batch V1 API client (for Jobs, CronJobs)\n * @param contextName - Optional context name to switch to\n */\nexport function getBatchApi(contextName?: string): k8s.BatchV1Api {\n  // Always reinitialize for AWS EKS to refresh tokens\n  initK8sClient(contextName)\n  return k8sBatchApi!\n}\n\n/**\n * Get KubeConfig instance\n */\nexport function getKubeConfig(): k8s.KubeConfig {\n  if (!kc) {\n    initK8sClient()\n  }\n  return kc!\n}\n\n/**\n * Check if client is initialized and can connect to cluster\n */\nexport async function checkConnection(): Promise<boolean> {\n  try {\n    const coreApi = getCoreApi()\n    await coreApi.listNamespace()\n    return true\n  } catch (error) {\n    console.error('[K8s] Connection check failed:', error)\n    return false\n  }\n}\n\n/**\n * Reset client (useful for testing or reconnecting)\n */\nexport function resetClient(): void {\n  kc = null\n  k8sAppsApi = null\n  k8sCoreApi = null\n  k8sAutoscalingApi = null\n  k8sEventsApi = null\n  k8sNetworkingApi = null\n  k8sBatchApi = null\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC;;;;;;;;;;;;;;;;;;;;;;AAED;AAAA;AAAA;;AAEA,IAAI,KAA4B;AAChC,IAAI,aAAmC;AACvC,IAAI,aAAmC;AACvC,IAAI,oBAAiD;AACrD,IAAI,eAAuC;AAC3C,IAAI,mBAA+C;AACnD,IAAI,cAAqC;AASlC,SAAS,cAAc,WAAoB;IAChD,8DAA8D;IAC9D,KAAK,IAAI,gLAAc;IAEvB,8DAA8D;IAC9D,mEAAmE;IACnE,IAAI;QACF,6CAA6C;QAC7C,GAAG,eAAe;QAElB,0CAA0C;QAC1C,IAAI,aAAa;YACf,GAAG,iBAAiB,CAAC;QACvB;QAEA,MAAM,UAAU,GAAG,iBAAiB;QACpC,MAAM,aAAa,GAAG,iBAAiB;QAEvC,iCAAiC;QACjC,IAAI,CAAC,SAAS,QAAQ;YACpB,MAAM,IAAI,MAAM,CAAC,kDAAkD,EAAE,eAAe,YAAY;QAClG;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kDAAkD;QAChE,MAAM,IAAI,MAAM;IAClB;IAEA,mEAAmE;IACnE,aAAa,GAAG,aAAa,CAAC,qLAAa;IAC3C,aAAa,GAAG,aAAa,CAAC,qLAAa;IAC3C,oBAAoB,GAAG,aAAa,CAAC,4LAAoB;IACzD,eAAe,GAAG,aAAa,CAAC,uLAAe;IAC/C,mBAAmB,GAAG,aAAa,CAAC,2LAAmB;IACvD,cAAc,GAAG,aAAa,CAAC,sLAAc;AAC/C;AAMO,SAAS,WAAW,WAAoB;IAC7C,oDAAoD;IACpD,cAAc;IACd,OAAO;AACT;AAMO,SAAS,WAAW,WAAoB;IAC7C,oDAAoD;IACpD,cAAc;IACd,OAAO;AACT;AAMO,SAAS,kBAAkB,WAAoB;IACpD,oDAAoD;IACpD,cAAc;IACd,OAAO;AACT;AAMO,SAAS,aAAa,WAAoB;IAC/C,oDAAoD;IACpD,cAAc;IACd,OAAO;AACT;AAMO,SAAS,iBAAiB,WAAoB;IACnD,oDAAoD;IACpD,cAAc;IACd,OAAO;AACT;AAMO,SAAS,YAAY,WAAoB;IAC9C,oDAAoD;IACpD,cAAc;IACd,OAAO;AACT;AAKO,SAAS;IACd,IAAI,CAAC,IAAI;QACP;IACF;IACA,OAAO;AACT;AAKO,eAAe;IACpB,IAAI;QACF,MAAM,UAAU;QAChB,MAAM,QAAQ,aAAa;QAC3B,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO;IACT;AACF;AAKO,SAAS;IACd,KAAK;IACL,aAAa;IACb,aAAa;IACb,oBAAoB;IACpB,eAAe;IACf,mBAAmB;IACnB,cAAc;AAChB"}},
    {"offset": {"line": 399, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/lib/k8s/api.ts"],"sourcesContent":["/**\n * Kubernetes API Functions\n *\n * This module provides functions to interact with Kubernetes resources\n * using the official @kubernetes/client-node library.\n */\n\nimport * as k8s from '@kubernetes/client-node'\nimport { getAppsApi, getCoreApi, getAutoscalingApi, getNetworkingApi, getBatchApi } from './client'\nimport type {\n  Deployment,\n  StatefulSet,\n  DaemonSet,\n  Pod,\n  Node,\n  ConfigMap,\n  Secret,\n  HPA,\n  PersistentVolume,\n  PersistentVolumeClaim,\n  Event,\n  DeploymentStatus,\n  PodStatus,\n  NodeStatus,\n  PVStatus,\n  PVCStatus,\n  Service,\n  ServicePort,\n  Ingress,\n  IngressRule,\n  ResourceWithLabels,\n  LabelGroup,\n  IngressPath,\n  IngressTLS,\n  Job,\n  JobStatus,\n  JobCondition,\n  CronJob,\n  Namespace,\n  NamespaceStatus,\n  ResourceQuota,\n  LimitRange,\n  LimitRangeItem,\n} from '@/types/kubernetes'\n\n/**\n * Helper: Calculate age from timestamp\n */\nfunction calculateAge(timestamp: Date | string | undefined): string {\n  if (!timestamp) return 'Unknown'\n  const date = typeof timestamp === 'string' ? new Date(timestamp) : timestamp\n  const now = new Date()\n  const diffMs = now.getTime() - date.getTime()\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24))\n\n  if (diffDays === 0) {\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\n    if (diffHours === 0) {\n      const diffMins = Math.floor(diffMs / (1000 * 60))\n      return `${diffMins}m`\n    }\n    return `${diffHours}h`\n  }\n  return `${diffDays}d`\n}\n\n/**\n * Deployments API\n */\nexport async function fetchDeployments(namespace: string, contextName?: string): Promise<Deployment[]> {\n  const appsApi = getAppsApi(contextName)\n  const response = await appsApi.listNamespacedDeployment({ namespace })\n\n  return response.items.map((dep) => {\n    const readyReplicas = dep.status?.readyReplicas || 0\n    const availableReplicas = dep.status?.availableReplicas || 0\n    const unavailableReplicas = dep.status?.unavailableReplicas || 0\n\n    let status: DeploymentStatus = 'Available'\n    if (unavailableReplicas > 0) {\n      status = 'Degraded'\n    } else if (readyReplicas < (dep.spec?.replicas || 0)) {\n      status = 'Progressing'\n    }\n\n    return {\n      name: dep.metadata?.name || '',\n      namespace: dep.metadata?.namespace || namespace,\n      status,\n      replicas: {\n        desired: dep.spec?.replicas || 0,\n        ready: readyReplicas,\n        available: availableReplicas,\n        unavailable: unavailableReplicas,\n      },\n      strategy: dep.spec?.strategy?.type || 'RollingUpdate',\n      age: calculateAge(dep.metadata?.creationTimestamp),\n      labels: dep.metadata?.labels || {},\n      selector: dep.spec?.selector?.matchLabels || {},\n      configMaps: extractConfigMapNames(dep),\n      secrets: extractSecretNames(dep),\n    }\n  })\n}\n\nexport async function fetchDeployment(name: string, namespace: string, contextName?: string): Promise<Deployment | null> {\n  try {\n    const appsApi = getAppsApi(contextName)\n    const response = await appsApi.readNamespacedDeployment({ name, namespace })\n    const dep = response\n\n    const readyReplicas = dep.status?.readyReplicas || 0\n    const availableReplicas = dep.status?.availableReplicas || 0\n    const unavailableReplicas = dep.status?.unavailableReplicas || 0\n\n    let status: DeploymentStatus = 'Available'\n    if (unavailableReplicas > 0) {\n      status = 'Degraded'\n    } else if (readyReplicas < (dep.spec?.replicas || 0)) {\n      status = 'Progressing'\n    }\n\n    return {\n      name: dep.metadata?.name || '',\n      namespace: dep.metadata?.namespace || namespace,\n      status,\n      replicas: {\n        desired: dep.spec?.replicas || 0,\n        ready: readyReplicas,\n        available: availableReplicas,\n        unavailable: unavailableReplicas,\n      },\n      strategy: dep.spec?.strategy?.type || 'RollingUpdate',\n      age: calculateAge(dep.metadata?.creationTimestamp),\n      labels: dep.metadata?.labels || {},\n      selector: dep.spec?.selector?.matchLabels || {},\n      configMaps: extractConfigMapNames(dep),\n      secrets: extractSecretNames(dep),\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch deployment ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * Helper: Extract ConfigMap names from deployment\n */\nfunction extractConfigMapNames(dep: k8s.V1Deployment): string[] {\n  const configMaps = new Set<string>()\n  const containers = dep.spec?.template?.spec?.containers || []\n\n  containers.forEach((container) => {\n    // From envFrom\n    container.envFrom?.forEach((envFrom) => {\n      if (envFrom.configMapRef?.name) {\n        configMaps.add(envFrom.configMapRef.name)\n      }\n    })\n\n    // From env\n    container.env?.forEach((env) => {\n      if (env.valueFrom?.configMapKeyRef?.name) {\n        configMaps.add(env.valueFrom.configMapKeyRef.name)\n      }\n    })\n  })\n\n  // From volumes\n  dep.spec?.template?.spec?.volumes?.forEach((volume) => {\n    if (volume.configMap?.name) {\n      configMaps.add(volume.configMap.name)\n    }\n  })\n\n  return Array.from(configMaps)\n}\n\n/**\n * Helper: Extract Secret names from deployment\n */\nfunction extractSecretNames(dep: k8s.V1Deployment): string[] {\n  const secrets = new Set<string>()\n  const containers = dep.spec?.template?.spec?.containers || []\n\n  containers.forEach((container) => {\n    // From envFrom\n    container.envFrom?.forEach((envFrom) => {\n      if (envFrom.secretRef?.name) {\n        secrets.add(envFrom.secretRef.name)\n      }\n    })\n\n    // From env\n    container.env?.forEach((env) => {\n      if (env.valueFrom?.secretKeyRef?.name) {\n        secrets.add(env.valueFrom.secretKeyRef.name)\n      }\n    })\n  })\n\n  // From volumes\n  dep.spec?.template?.spec?.volumes?.forEach((volume) => {\n    if (volume.secret?.secretName) {\n      secrets.add(volume.secret.secretName)\n    }\n  })\n\n  // Image pull secrets\n  dep.spec?.template?.spec?.imagePullSecrets?.forEach((secret) => {\n    if (secret.name) {\n      secrets.add(secret.name)\n    }\n  })\n\n  return Array.from(secrets)\n}\n\n/**\n * StatefulSets API\n */\n\nexport async function fetchStatefulSets(namespace: string, contextName?: string): Promise<StatefulSet[]> {\n  try {\n    const appsApi = getAppsApi(contextName)\n    const response = await appsApi.listNamespacedStatefulSet({ namespace })\n\n    return response.items.map((sts) => {\n      const readyReplicas = sts.status?.readyReplicas || 0\n      const desired = sts.spec?.replicas || 0\n\n      let status: DeploymentStatus = 'Available'\n      if (readyReplicas < desired) {\n        status = 'Progressing'\n      }\n      if (readyReplicas === 0 && desired > 0) {\n        status = 'Degraded'\n      }\n\n      return {\n        name: sts.metadata?.name || '',\n        namespace: sts.metadata?.namespace || namespace,\n        replicas: {\n          desired,\n          ready: readyReplicas,\n          current: sts.status?.currentReplicas || 0,\n          updated: sts.status?.updatedReplicas || 0,\n        },\n        status,\n        age: calculateAge(sts.metadata?.creationTimestamp),\n        labels: sts.metadata?.labels || {},\n        selector: sts.spec?.selector?.matchLabels || {},\n        serviceName: sts.spec?.serviceName || '',\n        updateStrategy: sts.spec?.updateStrategy?.type || 'RollingUpdate',\n        podManagementPolicy: sts.spec?.podManagementPolicy || 'OrderedReady',\n        persistentVolumeClaims: extractPVCNames(sts),\n        configMaps: extractConfigMapNamesFromStatefulSet(sts),\n        secrets: extractSecretNamesFromStatefulSet(sts),\n      }\n    })\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch statefulsets in namespace ${namespace}:`, error)\n    return []\n  }\n}\n\nexport async function fetchStatefulSet(\n  name: string,\n  namespace: string,\n  contextName?: string\n): Promise<StatefulSet | null> {\n  try {\n    const appsApi = getAppsApi(contextName)\n    const response = await appsApi.readNamespacedStatefulSet({ name, namespace })\n    const sts = response\n\n    const readyReplicas = sts.status?.readyReplicas || 0\n    const desired = sts.spec?.replicas || 0\n\n    let status: DeploymentStatus = 'Available'\n    if (readyReplicas < desired) {\n      status = 'Progressing'\n    }\n    if (readyReplicas === 0 && desired > 0) {\n      status = 'Degraded'\n    }\n\n    return {\n      name: sts.metadata?.name || name,\n      namespace: sts.metadata?.namespace || namespace,\n      replicas: {\n        desired,\n        ready: readyReplicas,\n        current: sts.status?.currentReplicas || 0,\n        updated: sts.status?.updatedReplicas || 0,\n      },\n      status,\n      age: calculateAge(sts.metadata?.creationTimestamp),\n      labels: sts.metadata?.labels || {},\n      selector: sts.spec?.selector?.matchLabels || {},\n      serviceName: sts.spec?.serviceName || '',\n      updateStrategy: sts.spec?.updateStrategy?.type || 'RollingUpdate',\n      podManagementPolicy: sts.spec?.podManagementPolicy || 'OrderedReady',\n      persistentVolumeClaims: extractPVCNames(sts),\n      configMaps: extractConfigMapNamesFromStatefulSet(sts),\n      secrets: extractSecretNamesFromStatefulSet(sts),\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch statefulset ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * DaemonSets API\n */\n\nexport async function fetchDaemonSets(namespace: string, contextName?: string): Promise<DaemonSet[]> {\n  try {\n    const appsApi = getAppsApi(contextName)\n    const response = await appsApi.listNamespacedDaemonSet({ namespace })\n\n    return response.items.map((ds) => ({\n      name: ds.metadata?.name || '',\n      namespace: ds.metadata?.namespace || namespace,\n      desired: ds.status?.desiredNumberScheduled || 0,\n      current: ds.status?.currentNumberScheduled || 0,\n      ready: ds.status?.numberReady || 0,\n      upToDate: ds.status?.updatedNumberScheduled || 0,\n      available: ds.status?.numberAvailable || 0,\n      status: getDaemonSetStatus(ds.status),\n      age: calculateAge(ds.metadata?.creationTimestamp),\n      labels: ds.metadata?.labels || {},\n      selector: ds.spec?.selector?.matchLabels || {},\n      updateStrategy: ds.spec?.updateStrategy?.type || 'RollingUpdate',\n      configMaps: extractConfigMapNamesFromDaemonSet(ds),\n      secrets: extractSecretNamesFromDaemonSet(ds),\n    }))\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch daemonsets in namespace ${namespace}:`, error)\n    return []\n  }\n}\n\nexport async function fetchDaemonSet(\n  name: string,\n  namespace: string,\n  contextName?: string\n): Promise<DaemonSet | null> {\n  try {\n    const appsApi = getAppsApi(contextName)\n    const response = await appsApi.readNamespacedDaemonSet({ name, namespace })\n    const ds = response\n\n    return {\n      name: ds.metadata?.name || name,\n      namespace: ds.metadata?.namespace || namespace,\n      desired: ds.status?.desiredNumberScheduled || 0,\n      current: ds.status?.currentNumberScheduled || 0,\n      ready: ds.status?.numberReady || 0,\n      upToDate: ds.status?.updatedNumberScheduled || 0,\n      available: ds.status?.numberAvailable || 0,\n      status: getDaemonSetStatus(ds.status),\n      age: calculateAge(ds.metadata?.creationTimestamp),\n      labels: ds.metadata?.labels || {},\n      selector: ds.spec?.selector?.matchLabels || {},\n      updateStrategy: ds.spec?.updateStrategy?.type || 'RollingUpdate',\n      configMaps: extractConfigMapNamesFromDaemonSet(ds),\n      secrets: extractSecretNamesFromDaemonSet(ds),\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch daemonset ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * Helper: Extract PVC names from StatefulSet\n */\nfunction extractPVCNames(sts: k8s.V1StatefulSet): string[] {\n  const pvcTemplates = sts.spec?.volumeClaimTemplates || []\n  return pvcTemplates.map((pvc) => pvc.metadata?.name || '').filter(Boolean)\n}\n\n/**\n * Helper: Extract ConfigMap names from StatefulSet\n */\nfunction extractConfigMapNamesFromStatefulSet(sts: k8s.V1StatefulSet): string[] {\n  const configMaps = new Set<string>()\n  const containers = sts.spec?.template?.spec?.containers || []\n\n  containers.forEach((container) => {\n    container.envFrom?.forEach((envFrom) => {\n      if (envFrom.configMapRef?.name) {\n        configMaps.add(envFrom.configMapRef.name)\n      }\n    })\n    container.env?.forEach((env) => {\n      if (env.valueFrom?.configMapKeyRef?.name) {\n        configMaps.add(env.valueFrom.configMapKeyRef.name)\n      }\n    })\n  })\n\n  sts.spec?.template?.spec?.volumes?.forEach((volume) => {\n    if (volume.configMap?.name) {\n      configMaps.add(volume.configMap.name)\n    }\n  })\n\n  return Array.from(configMaps)\n}\n\n/**\n * Helper: Extract Secret names from StatefulSet\n */\nfunction extractSecretNamesFromStatefulSet(sts: k8s.V1StatefulSet): string[] {\n  const secrets = new Set<string>()\n  const containers = sts.spec?.template?.spec?.containers || []\n\n  containers.forEach((container) => {\n    container.envFrom?.forEach((envFrom) => {\n      if (envFrom.secretRef?.name) {\n        secrets.add(envFrom.secretRef.name)\n      }\n    })\n    container.env?.forEach((env) => {\n      if (env.valueFrom?.secretKeyRef?.name) {\n        secrets.add(env.valueFrom.secretKeyRef.name)\n      }\n    })\n  })\n\n  sts.spec?.template?.spec?.volumes?.forEach((volume) => {\n    if (volume.secret?.secretName) {\n      secrets.add(volume.secret.secretName)\n    }\n  })\n\n  sts.spec?.template?.spec?.imagePullSecrets?.forEach((secret) => {\n    if (secret.name) {\n      secrets.add(secret.name)\n    }\n  })\n\n  return Array.from(secrets)\n}\n\n/**\n * Helper: Extract ConfigMap names from DaemonSet\n */\nfunction extractConfigMapNamesFromDaemonSet(ds: k8s.V1DaemonSet): string[] {\n  const configMaps = new Set<string>()\n  const containers = ds.spec?.template?.spec?.containers || []\n\n  containers.forEach((container) => {\n    container.envFrom?.forEach((envFrom) => {\n      if (envFrom.configMapRef?.name) {\n        configMaps.add(envFrom.configMapRef.name)\n      }\n    })\n    container.env?.forEach((env) => {\n      if (env.valueFrom?.configMapKeyRef?.name) {\n        configMaps.add(env.valueFrom.configMapKeyRef.name)\n      }\n    })\n  })\n\n  ds.spec?.template?.spec?.volumes?.forEach((volume) => {\n    if (volume.configMap?.name) {\n      configMaps.add(volume.configMap.name)\n    }\n  })\n\n  return Array.from(configMaps)\n}\n\n/**\n * Helper: Extract Secret names from DaemonSet\n */\nfunction extractSecretNamesFromDaemonSet(ds: k8s.V1DaemonSet): string[] {\n  const secrets = new Set<string>()\n  const containers = ds.spec?.template?.spec?.containers || []\n\n  containers.forEach((container) => {\n    container.envFrom?.forEach((envFrom) => {\n      if (envFrom.secretRef?.name) {\n        secrets.add(envFrom.secretRef.name)\n      }\n    })\n    container.env?.forEach((env) => {\n      if (env.valueFrom?.secretKeyRef?.name) {\n        secrets.add(env.valueFrom.secretKeyRef.name)\n      }\n    })\n  })\n\n  ds.spec?.template?.spec?.volumes?.forEach((volume) => {\n    if (volume.secret?.secretName) {\n      secrets.add(volume.secret.secretName)\n    }\n  })\n\n  ds.spec?.template?.spec?.imagePullSecrets?.forEach((secret) => {\n    if (secret.name) {\n      secrets.add(secret.name)\n    }\n  })\n\n  return Array.from(secrets)\n}\n\n/**\n * Helper: Get DaemonSet status\n */\nfunction getDaemonSetStatus(status: k8s.V1DaemonSetStatus | undefined): DeploymentStatus {\n  if (!status) return 'Unknown'\n\n  const desired = status.desiredNumberScheduled || 0\n  const ready = status.numberReady || 0\n  const available = status.numberAvailable || 0\n\n  if (ready === 0) return 'Not Ready'\n  if (ready < desired) return 'Degraded'\n  if (available === desired && ready === desired) return 'Healthy'\n\n  return 'Unknown'\n}\n\n/**\n * Helper: Extract ConfigMap names from pod\n */\nfunction extractConfigMapNamesFromPod(pod: k8s.V1Pod): string[] {\n  const configMaps = new Set<string>()\n  const containers = pod.spec?.containers || []\n\n  containers.forEach((container) => {\n    // From envFrom\n    container.envFrom?.forEach((envFrom) => {\n      if (envFrom.configMapRef?.name) {\n        configMaps.add(envFrom.configMapRef.name)\n      }\n    })\n\n    // From env\n    container.env?.forEach((env) => {\n      if (env.valueFrom?.configMapKeyRef?.name) {\n        configMaps.add(env.valueFrom.configMapKeyRef.name)\n      }\n    })\n  })\n\n  // From volumes\n  pod.spec?.volumes?.forEach((volume) => {\n    if (volume.configMap?.name) {\n      configMaps.add(volume.configMap.name)\n    }\n  })\n\n  return Array.from(configMaps)\n}\n\n/**\n * Helper: Extract Secret names from pod\n */\nfunction extractSecretNamesFromPod(pod: k8s.V1Pod): string[] {\n  const secrets = new Set<string>()\n  const containers = pod.spec?.containers || []\n\n  containers.forEach((container) => {\n    // From envFrom\n    container.envFrom?.forEach((envFrom) => {\n      if (envFrom.secretRef?.name) {\n        secrets.add(envFrom.secretRef.name)\n      }\n    })\n\n    // From env\n    container.env?.forEach((env) => {\n      if (env.valueFrom?.secretKeyRef?.name) {\n        secrets.add(env.valueFrom.secretKeyRef.name)\n      }\n    })\n  })\n\n  // From volumes\n  pod.spec?.volumes?.forEach((volume) => {\n    if (volume.secret?.secretName) {\n      secrets.add(volume.secret.secretName)\n    }\n  })\n\n  // Image pull secrets\n  pod.spec?.imagePullSecrets?.forEach((secret) => {\n    if (secret.name) {\n      secrets.add(secret.name)\n    }\n  })\n\n  return Array.from(secrets)\n}\n\n/**\n * Pods API\n */\nexport async function fetchPods(namespace: string, contextName?: string, labelSelector?: string): Promise<Pod[]> {\n  const coreApi = getCoreApi(contextName)\n  const response = await coreApi.listNamespacedPod({\n    namespace,\n    labelSelector,\n  })\n\n  return response.items.map((pod) => {\n    const containerStatuses = pod.status?.containerStatuses || []\n    const totalRestarts = containerStatuses.reduce(\n      (sum, cs) => sum + (cs.restartCount || 0),\n      0\n    )\n\n    return {\n      name: pod.metadata?.name || '',\n      namespace: pod.metadata?.namespace || namespace,\n      status: (pod.status?.phase as PodStatus) || 'Unknown',\n      nodeName: pod.spec?.nodeName || 'Unknown',\n      ip: pod.status?.podIP || 'Unknown',\n      restartCount: totalRestarts,\n      age: calculateAge(pod.metadata?.creationTimestamp),\n      labels: pod.metadata?.labels || {},\n      containers: containerStatuses.map((cs) => ({\n        name: cs.name,\n        image: cs.image || '',\n        ready: cs.ready || false,\n        restartCount: cs.restartCount || 0,\n      })),\n      configMaps: extractConfigMapNamesFromPod(pod),\n      secrets: extractSecretNamesFromPod(pod),\n    }\n  })\n}\n\n/**\n * Helper: Parse probe configuration\n */\nfunction parseProbe(probe: any): any {\n  if (!probe) return undefined\n\n  const result: any = {\n    initialDelaySeconds: probe.initialDelaySeconds,\n    periodSeconds: probe.periodSeconds,\n    timeoutSeconds: probe.timeoutSeconds,\n    successThreshold: probe.successThreshold,\n    failureThreshold: probe.failureThreshold,\n  }\n\n  if (probe.httpGet) {\n    result.type = 'httpGet'\n    result.httpGet = {\n      path: probe.httpGet.path || '/',\n      port: probe.httpGet.port,\n      scheme: probe.httpGet.scheme || 'HTTP',\n    }\n  } else if (probe.tcpSocket) {\n    result.type = 'tcpSocket'\n    result.tcpSocket = {\n      port: probe.tcpSocket.port,\n    }\n  } else if (probe.exec) {\n    result.type = 'exec'\n    result.exec = {\n      command: probe.exec.command || [],\n    }\n  } else if (probe.grpc) {\n    result.type = 'grpc'\n  }\n\n  return result\n}\n\nexport async function fetchPod(name: string, namespace: string, contextName?: string): Promise<Pod | null> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNamespacedPod({ name, namespace })\n    const pod = response\n\n    const containerStatuses = pod.status?.containerStatuses || []\n    const containerSpecs = pod.spec?.containers || []\n    const totalRestarts = containerStatuses.reduce(\n      (sum, cs) => sum + (cs.restartCount || 0),\n      0\n    )\n\n    return {\n      name: pod.metadata?.name || '',\n      namespace: pod.metadata?.namespace || namespace,\n      status: (pod.status?.phase as PodStatus) || 'Unknown',\n      nodeName: pod.spec?.nodeName || 'Unknown',\n      ip: pod.status?.podIP || 'Unknown',\n      restartCount: totalRestarts,\n      age: calculateAge(pod.metadata?.creationTimestamp),\n      labels: pod.metadata?.labels || {},\n      containers: containerSpecs.map((spec) => ({\n        name: spec.name,\n        image: spec.image || '',\n        ready: containerStatuses.find((cs) => cs.name === spec.name)?.ready || false,\n        restartCount: containerStatuses.find((cs) => cs.name === spec.name)?.restartCount || 0,\n        livenessProbe: parseProbe(spec.livenessProbe),\n        readinessProbe: parseProbe(spec.readinessProbe),\n        startupProbe: parseProbe(spec.startupProbe),\n      })),\n      containerStatuses: containerStatuses.map((cs) => ({\n        name: cs.name,\n        ready: cs.ready || false,\n        restartCount: cs.restartCount || 0,\n        state: {\n          waiting: cs.state?.waiting ? {\n            reason: cs.state.waiting.reason || '',\n            message: cs.state.waiting.message,\n          } : undefined,\n          running: cs.state?.running ? {\n            startedAt: cs.state.running.startedAt?.toISOString() || '',\n          } : undefined,\n          terminated: cs.state?.terminated ? {\n            exitCode: cs.state.terminated.exitCode || 0,\n            reason: cs.state.terminated.reason || '',\n            message: cs.state.terminated.message,\n            startedAt: cs.state.terminated.startedAt?.toISOString() || '',\n            finishedAt: cs.state.terminated.finishedAt?.toISOString() || '',\n          } : undefined,\n        },\n        lastState: cs.lastState ? {\n          waiting: cs.lastState.waiting ? {\n            reason: cs.lastState.waiting.reason || '',\n            message: cs.lastState.waiting.message,\n          } : undefined,\n          running: cs.lastState.running ? {\n            startedAt: cs.lastState.running.startedAt?.toISOString() || '',\n          } : undefined,\n          terminated: cs.lastState.terminated ? {\n            exitCode: cs.lastState.terminated.exitCode || 0,\n            reason: cs.lastState.terminated.reason || '',\n            message: cs.lastState.terminated.message,\n            startedAt: cs.lastState.terminated.startedAt?.toISOString() || '',\n            finishedAt: cs.lastState.terminated.finishedAt?.toISOString() || '',\n          } : undefined,\n        } : undefined,\n      })),\n      configMaps: extractConfigMapNamesFromPod(pod),\n      secrets: extractSecretNamesFromPod(pod),\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch pod ${name}:`, error)\n    return null\n  }\n}\n\nexport async function fetchPodLogs(\n  name: string,\n  namespace: string,\n  contextName?: string,\n  container?: string,\n  tail = 100,\n  previous = false\n): Promise<string> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNamespacedPodLog({\n      name,\n      namespace,\n      container,\n      tailLines: tail,\n      previous,\n      timestamps: true,\n    })\n    return response\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch logs for pod ${name}:`, error)\n    throw error\n  }\n}\n\n/**\n * Nodes API\n */\nexport async function fetchNodes(contextName?: string): Promise<Node[]> {\n  const coreApi = getCoreApi(contextName)\n  const response = await coreApi.listNode({})\n\n  return response.items.map((node) => {\n    const conditions = node.status?.conditions || []\n    const readyCondition = conditions.find((c) => c.type === 'Ready')\n    let status: NodeStatus = 'Unknown'\n    if (readyCondition) {\n      status = readyCondition.status === 'True' ? 'Ready' : 'NotReady'\n    }\n\n    const roles = node.metadata?.labels\n      ? Object.keys(node.metadata.labels)\n          .filter((label) => label.startsWith('node-role.kubernetes.io/'))\n          .map((label) => label.replace('node-role.kubernetes.io/', ''))\n      : []\n\n    return {\n      name: node.metadata?.name || '',\n      status,\n      roles: roles.length > 0 ? roles : ['<none>'],\n      version: node.status?.nodeInfo?.kubeletVersion || 'Unknown',\n      capacity: {\n        cpu: node.status?.capacity?.cpu || '0',\n        memory: node.status?.capacity?.memory || '0',\n        pods: node.status?.capacity?.pods || '0',\n      },\n      allocatable: {\n        cpu: node.status?.allocatable?.cpu || '0',\n        memory: node.status?.allocatable?.memory || '0',\n        pods: node.status?.allocatable?.pods || '0',\n      },\n      age: calculateAge(node.metadata?.creationTimestamp),\n      labels: node.metadata?.labels || {},\n      conditions: conditions.map((c) => ({\n        type: c.type || '',\n        status: c.status || '',\n        reason: c.reason || '',\n        message: c.message || '',\n        lastTransitionTime: c.lastTransitionTime?.toString() || '',\n      })),\n    }\n  })\n}\n\nexport async function fetchNode(name: string, contextName?: string): Promise<Node | null> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNode({ name })\n    const node = response\n\n    const conditions = node.status?.conditions || []\n    const readyCondition = conditions.find((c) => c.type === 'Ready')\n    let status: NodeStatus = 'Unknown'\n    if (readyCondition) {\n      status = readyCondition.status === 'True' ? 'Ready' : 'NotReady'\n    }\n\n    const roles = node.metadata?.labels\n      ? Object.keys(node.metadata.labels)\n          .filter((label) => label.startsWith('node-role.kubernetes.io/'))\n          .map((label) => label.replace('node-role.kubernetes.io/', ''))\n      : []\n\n    return {\n      name: node.metadata?.name || '',\n      status,\n      roles: roles.length > 0 ? roles : ['<none>'],\n      version: node.status?.nodeInfo?.kubeletVersion || 'Unknown',\n      capacity: {\n        cpu: node.status?.capacity?.cpu || '0',\n        memory: node.status?.capacity?.memory || '0',\n        pods: node.status?.capacity?.pods || '0',\n      },\n      allocatable: {\n        cpu: node.status?.allocatable?.cpu || '0',\n        memory: node.status?.allocatable?.memory || '0',\n        pods: node.status?.allocatable?.pods || '0',\n      },\n      age: calculateAge(node.metadata?.creationTimestamp),\n      labels: node.metadata?.labels || {},\n      conditions: conditions.map((c) => ({\n        type: c.type || '',\n        status: c.status || '',\n        reason: c.reason || '',\n        message: c.message || '',\n        lastTransitionTime: c.lastTransitionTime?.toString() || '',\n      })),\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch node ${name}:`, error)\n    return null\n  }\n}\n\nexport async function fetchNodeEvents(nodeName: string): Promise<Event[]> {\n  return fetchResourceEvents('Node', nodeName, '')\n}\n\nexport async function fetchNodePods(nodeName: string, namespace?: string, contextName?: string): Promise<Pod[]> {\n  try {\n    const coreApi = getCoreApi(contextName)\n\n    // If no namespace provided, we can't list pods (no cluster-level permission)\n    if (!namespace) {\n      console.warn('[K8s] Cannot fetch node pods without namespace (no cluster-level permission)')\n      return []\n    }\n\n    // List pods in the specified namespace only\n    const response = await coreApi.listNamespacedPod({\n      namespace,\n      fieldSelector: `spec.nodeName=${nodeName}`,\n    })\n\n    return response.items.map((pod) => {\n      const containerStatuses = pod.status?.containerStatuses || []\n      const totalRestarts = containerStatuses.reduce(\n        (sum, cs) => sum + (cs.restartCount || 0),\n        0\n      )\n\n      return {\n        name: pod.metadata?.name || '',\n        namespace: pod.metadata?.namespace || '',\n        status: (pod.status?.phase as PodStatus) || 'Unknown',\n        nodeName: pod.spec?.nodeName || 'Unknown',\n        ip: pod.status?.podIP || 'Unknown',\n        restartCount: totalRestarts,\n        age: calculateAge(pod.metadata?.creationTimestamp),\n        labels: pod.metadata?.labels || {},\n        containers: containerStatuses.map((cs) => ({\n          name: cs.name,\n          image: cs.image || '',\n          ready: cs.ready || false,\n          restartCount: cs.restartCount || 0,\n        })),\n        configMaps: extractConfigMapNamesFromPod(pod),\n        secrets: extractSecretNamesFromPod(pod),\n      }\n    })\n  } catch (error: any) {\n    // Silently handle 403 (permission denied) - just return empty array\n    if (error?.code !== 403) {\n      console.error(`[K8s] Failed to fetch pods for node ${nodeName}:`, error)\n    }\n    return []\n  }\n}\n\n/**\n * ConfigMaps API\n */\nexport async function fetchConfigMaps(namespace: string, contextName?: string): Promise<ConfigMap[]> {\n  const coreApi = getCoreApi(contextName)\n  const response = await coreApi.listNamespacedConfigMap({ namespace })\n\n  return response.items.map((cm) => ({\n    name: cm.metadata?.name || '',\n    namespace: cm.metadata?.namespace || namespace,\n    data: cm.data || {},\n    age: calculateAge(cm.metadata?.creationTimestamp),\n    labels: cm.metadata?.labels || {},\n  }))\n}\n\nexport async function fetchConfigMap(name: string, namespace: string, contextName?: string): Promise<ConfigMap | null> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNamespacedConfigMap({ name, namespace })\n    const cm = response\n\n    return {\n      name: cm.metadata?.name || '',\n      namespace: cm.metadata?.namespace || namespace,\n      data: cm.data || {},\n      age: calculateAge(cm.metadata?.creationTimestamp),\n      labels: cm.metadata?.labels || {},\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch configmap ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * Secrets API\n */\nexport async function fetchSecrets(namespace: string, contextName?: string): Promise<Secret[]> {\n  const coreApi = getCoreApi(contextName)\n  const response = await coreApi.listNamespacedSecret({ namespace })\n\n  return response.items.map((secret) => {\n    // For list view, we don't include the actual data (only for detail view)\n    const data: Record<string, string> = {}\n    if (secret.data) {\n      for (const key of Object.keys(secret.data)) {\n        data[key] = '' // Empty placeholder for list view\n      }\n    }\n\n    return {\n      name: secret.metadata?.name || '',\n      namespace: secret.metadata?.namespace || namespace,\n      type: secret.type || 'Opaque',\n      keys: Object.keys(secret.data || {}),\n      data,\n      age: calculateAge(secret.metadata?.creationTimestamp),\n      labels: secret.metadata?.labels || {},\n    }\n  })\n}\n\nexport async function fetchSecret(name: string, namespace: string, contextName?: string): Promise<Secret | null> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNamespacedSecret({ name, namespace })\n    const secret = response\n\n    // Convert data to Record<string, string> (values are base64 encoded)\n    const data: Record<string, string> = {}\n    if (secret.data) {\n      for (const [key, value] of Object.entries(secret.data)) {\n        data[key] = value as string\n      }\n    }\n\n    return {\n      name: secret.metadata?.name || '',\n      namespace: secret.metadata?.namespace || namespace,\n      type: secret.type || 'Opaque',\n      keys: Object.keys(secret.data || {}),\n      data,\n      age: calculateAge(secret.metadata?.creationTimestamp),\n      labels: secret.metadata?.labels || {},\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch secret ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * HPAs API\n */\nexport async function fetchHPAs(namespace: string, contextName?: string): Promise<HPA[]> {\n  const autoscalingApi = getAutoscalingApi(contextName)\n  const response = await autoscalingApi.listNamespacedHorizontalPodAutoscaler({ namespace })\n\n  return response.items.map((hpa) => {\n    const currentReplicas = hpa.status?.currentReplicas || 0\n    const desiredReplicas = hpa.status?.desiredReplicas || 0\n    const minReplicas = hpa.spec?.minReplicas || 1\n    const maxReplicas = hpa.spec?.maxReplicas || 1\n\n    // Extract CPU metrics\n    const cpuMetric = hpa.status?.currentMetrics?.find(\n      (m) => m.type === 'Resource' && m.resource?.name === 'cpu'\n    )\n    const cpuCurrent = cpuMetric?.resource?.current?.averageUtilization || 0\n\n    const cpuTargetMetric = hpa.spec?.metrics?.find(\n      (m) => m.type === 'Resource' && m.resource?.name === 'cpu'\n    )\n    const cpuTarget = cpuTargetMetric?.resource?.target?.averageUtilization || 0\n\n    return {\n      name: hpa.metadata?.name || '',\n      namespace: hpa.metadata?.namespace || namespace,\n      targetRef: {\n        kind: hpa.spec?.scaleTargetRef?.kind || '',\n        name: hpa.spec?.scaleTargetRef?.name || '',\n      },\n      minReplicas,\n      maxReplicas,\n      currentReplicas,\n      desiredReplicas,\n      metrics: [\n        {\n          type: 'Resource' as const,\n          resource: {\n            name: 'cpu',\n            target: {\n              type: 'Utilization' as const,\n              averageUtilization: cpuTarget,\n            },\n            current: {\n              averageUtilization: cpuCurrent,\n            },\n          },\n        },\n      ],\n      age: calculateAge(hpa.metadata?.creationTimestamp),\n      labels: hpa.metadata?.labels || {},\n    }\n  })\n}\n\n/**\n * PersistentVolumes API\n */\nexport async function fetchPVs(contextName?: string): Promise<PersistentVolume[]> {\n  const coreApi = getCoreApi(contextName)\n  const response = await coreApi.listPersistentVolume({})\n\n  return response.items.map((pv) => ({\n    name: pv.metadata?.name || '',\n    capacity: pv.spec?.capacity?.storage || '0',\n    accessModes: pv.spec?.accessModes || [],\n    reclaimPolicy: pv.spec?.persistentVolumeReclaimPolicy || 'Retain',\n    status: (pv.status?.phase as PVStatus) || 'Unknown',\n    claim: pv.spec?.claimRef\n      ? `${pv.spec.claimRef.namespace}/${pv.spec.claimRef.name}`\n      : '',\n    storageClass: pv.spec?.storageClassName || '',\n    age: calculateAge(pv.metadata?.creationTimestamp),\n  }))\n}\n\n/**\n * PersistentVolumeClaims API\n */\nexport async function fetchPVCs(namespace: string, contextName?: string): Promise<PersistentVolumeClaim[]> {\n  const coreApi = getCoreApi(contextName)\n  const response = await coreApi.listNamespacedPersistentVolumeClaim({ namespace })\n\n  return response.items.map((pvc) => ({\n    name: pvc.metadata?.name || '',\n    namespace: pvc.metadata?.namespace || namespace,\n    status: (pvc.status?.phase as PVCStatus) || 'Unknown',\n    volume: pvc.spec?.volumeName || '',\n    capacity: pvc.status?.capacity?.storage || '0',\n    accessModes: pvc.spec?.accessModes || [],\n    storageClass: pvc.spec?.storageClassName || '',\n    age: calculateAge(pvc.metadata?.creationTimestamp),\n    labels: pvc.metadata?.labels || {},\n  }))\n}\n\n/**\n * Events API\n */\nexport async function fetchEvents(namespace?: string, contextName?: string, timeRangeHours = 24): Promise<Event[]> {\n  const coreApi = getCoreApi(contextName)\n  const response = namespace\n    ? await coreApi.listNamespacedEvent({ namespace })\n    : await coreApi.listEventForAllNamespaces({})\n\n  // Calculate cutoff time\n  const cutoffTime = new Date()\n  cutoffTime.setHours(cutoffTime.getHours() - timeRangeHours)\n\n  // Filter events by time range and map to our Event type\n  return response.items\n    .filter((event) => {\n      const lastTimestamp = event.lastTimestamp || event.eventTime\n      if (!lastTimestamp) return false\n\n      const eventTime = new Date(lastTimestamp.toString())\n      return eventTime >= cutoffTime\n    })\n    .map((event) => ({\n      type: (event.type as 'Normal' | 'Warning') || 'Normal',\n      reason: event.reason || '',\n      message: event.message || '',\n      kind: event.involvedObject?.kind || '',\n      name: event.involvedObject?.name || '',\n      namespace: event.involvedObject?.namespace || '',\n      count: event.count || 1,\n      firstTimestamp: event.firstTimestamp?.toString() || '',\n      lastTimestamp: event.lastTimestamp?.toString() || '',\n    }))\n    .sort((a, b) => {\n      // Sort by lastTimestamp descending (most recent first)\n      const aTime = new Date(a.lastTimestamp).getTime()\n      const bTime = new Date(b.lastTimestamp).getTime()\n      return bTime - aTime\n    })\n}\n\nexport async function fetchResourceEvents(\n  kind: string,\n  name: string,\n  namespace: string,\n  contextName?: string\n): Promise<Event[]> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const fieldSelector = `involvedObject.kind=${kind},involvedObject.name=${name}`\n    const response = await coreApi.listNamespacedEvent({\n      namespace,\n      fieldSelector,\n    })\n\n    return response.items.map((event) => ({\n      type: (event.type as 'Normal' | 'Warning') || 'Normal',\n      reason: event.reason || '',\n      message: event.message || '',\n      kind: event.involvedObject?.kind || '',\n      name: event.involvedObject?.name || '',\n      namespace: event.involvedObject?.namespace || '',\n      count: event.count || 1,\n      firstTimestamp: event.firstTimestamp?.toString() || '',\n      lastTimestamp: event.lastTimestamp?.toString() || '',\n    }))\n  } catch (error: any) {\n    // Silently handle 403 (permission denied) - just return empty array\n    if (error?.code !== 403) {\n      console.error(`[API] Failed to fetch Node events:`, error)\n    }\n    return []\n  }\n}\n\n/**\n * Fetch deployment as raw YAML string\n */\nexport async function fetchDeploymentYaml(name: string, namespace: string, contextName?: string): Promise<string | null> {\n  try {\n    const appsApi = getAppsApi(contextName)\n    const response = await appsApi.readNamespacedDeployment({ name, namespace })\n    \n    // Convert to YAML using js-yaml\n    // eslint-disable-next-line @typescript-eslint/no-require-imports\n    const yaml = require('js-yaml')\n    const yamlString = yaml.dump(response, { noRefs: true, sortKeys: true })\n    \n    return yamlString\n  } catch (error) {\n    console.error('[API] Failed to fetch deployment YAML:', error)\n    return null\n  }\n}\n\n/**\n * Fetch configmap as raw YAML string\n */\nexport async function fetchConfigMapYaml(name: string, namespace: string, contextName?: string): Promise<string | null> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNamespacedConfigMap({ name, namespace })\n    \n    // eslint-disable-next-line @typescript-eslint/no-require-imports\n    const yaml = require('js-yaml')\n    const yamlString = yaml.dump(response, { noRefs: true, sortKeys: true })\n    \n    return yamlString\n  } catch (error) {\n    console.error('[API] Failed to fetch configmap YAML:', error)\n    return null\n  }\n}\n\n/**\n * Fetch secret as raw YAML string\n */\nexport async function fetchSecretYaml(name: string, namespace: string, contextName?: string): Promise<string | null> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNamespacedSecret({ name, namespace })\n\n    // eslint-disable-next-line @typescript-eslint/no-require-imports\n    const yaml = require('js-yaml')\n    const yamlString = yaml.dump(response, { noRefs: true, sortKeys: true })\n\n    return yamlString\n  } catch (error) {\n    console.error('[API] Failed to fetch secret YAML:', error)\n    return null\n  }\n}\n\n/**\n * Services API\n */\nexport async function fetchServices(namespace: string, contextName?: string): Promise<Service[]> {\n  const coreApi = getCoreApi(contextName)\n  const response = await coreApi.listNamespacedService({ namespace })\n\n  return response.items.map((svc) => {\n    const ports: ServicePort[] = (svc.spec?.ports || []).map((port) => ({\n      name: port.name,\n      protocol: port.protocol || 'TCP',\n      port: port.port || 0,\n      targetPort: port.targetPort || 0,\n      nodePort: port.nodePort,\n    }))\n\n    return {\n      name: svc.metadata?.name || '',\n      namespace: svc.metadata?.namespace || namespace,\n      type: (svc.spec?.type as Service['type']) || 'ClusterIP',\n      clusterIP: svc.spec?.clusterIP || '',\n      externalIPs: svc.spec?.externalIPs,\n      ports,\n      selector: svc.spec?.selector || {},\n      age: calculateAge(svc.metadata?.creationTimestamp),\n      labels: svc.metadata?.labels || {},\n    }\n  })\n}\n\nexport async function fetchService(name: string, namespace: string, contextName?: string): Promise<Service | null> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNamespacedService({ name, namespace })\n    const svc = response\n\n    const ports: ServicePort[] = (svc.spec?.ports || []).map((port) => ({\n      name: port.name,\n      protocol: port.protocol || 'TCP',\n      port: port.port || 0,\n      targetPort: port.targetPort || 0,\n      nodePort: port.nodePort,\n    }))\n\n    return {\n      name: svc.metadata?.name || '',\n      namespace: svc.metadata?.namespace || namespace,\n      type: (svc.spec?.type as Service['type']) || 'ClusterIP',\n      clusterIP: svc.spec?.clusterIP || '',\n      externalIPs: svc.spec?.externalIPs,\n      ports,\n      selector: svc.spec?.selector || {},\n      age: calculateAge(svc.metadata?.creationTimestamp),\n      labels: svc.metadata?.labels || {},\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch service ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * Ingress API\n */\nexport async function fetchIngresses(namespace: string, contextName?: string): Promise<Ingress[]> {\n  const networkingApi = getNetworkingApi(contextName)\n  const response = await networkingApi.listNamespacedIngress({ namespace })\n\n  return response.items.map((ing) => {\n    // Extract hosts from rules\n    const hosts: string[] = []\n    const rules: IngressRule[] = (ing.spec?.rules || []).map((rule) => {\n      if (rule.host) {\n        hosts.push(rule.host)\n      }\n\n      const paths: IngressPath[] = (rule.http?.paths || []).map((path) => ({\n        path: path.path || '/',\n        pathType: path.pathType || 'Prefix',\n        backend: {\n          service: {\n            name: path.backend?.service?.name || '',\n            port: {\n              number: path.backend?.service?.port?.number,\n              name: path.backend?.service?.port?.name,\n            },\n          },\n        },\n      }))\n\n      return {\n        host: rule.host,\n        paths,\n      }\n    })\n\n    // Extract TLS configuration\n    const tls: IngressTLS[] | undefined = ing.spec?.tls?.map((tlsConfig) => ({\n      hosts: tlsConfig.hosts || [],\n      secretName: tlsConfig.secretName,\n    }))\n\n    return {\n      name: ing.metadata?.name || '',\n      namespace: ing.metadata?.namespace || namespace,\n      className: ing.spec?.ingressClassName,\n      hosts,\n      rules,\n      tls,\n      age: calculateAge(ing.metadata?.creationTimestamp),\n      labels: ing.metadata?.labels || {},\n    }\n  })\n}\n\nexport async function fetchIngress(name: string, namespace: string, contextName?: string): Promise<Ingress | null> {\n  try {\n    const networkingApi = getNetworkingApi(contextName)\n    const response = await networkingApi.readNamespacedIngress({ name, namespace })\n    const ing = response\n\n    // Extract hosts from rules\n    const hosts: string[] = []\n    const rules: IngressRule[] = (ing.spec?.rules || []).map((rule) => {\n      if (rule.host) {\n        hosts.push(rule.host)\n      }\n\n      const paths: IngressPath[] = (rule.http?.paths || []).map((path) => ({\n        path: path.path || '/',\n        pathType: path.pathType || 'Prefix',\n        backend: {\n          service: {\n            name: path.backend?.service?.name || '',\n            port: {\n              number: path.backend?.service?.port?.number,\n              name: path.backend?.service?.port?.name,\n            },\n          },\n        },\n      }))\n\n      return {\n        host: rule.host,\n        paths,\n      }\n    })\n\n    // Extract TLS configuration\n    const tls: IngressTLS[] | undefined = ing.spec?.tls?.map((tlsConfig) => ({\n      hosts: tlsConfig.hosts || [],\n      secretName: tlsConfig.secretName,\n    }))\n\n    return {\n      name: ing.metadata?.name || '',\n      namespace: ing.metadata?.namespace || namespace,\n      className: ing.spec?.ingressClassName,\n      hosts,\n      rules,\n      tls,\n      age: calculateAge(ing.metadata?.creationTimestamp),\n      labels: ing.metadata?.labels || {},\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch ingress ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * Jobs API\n */\nfunction calculateDuration(startTime?: string, completionTime?: string): string | undefined {\n  if (!startTime) return undefined\n\n  const start = new Date(startTime)\n  const end = completionTime ? new Date(completionTime) : new Date()\n  const diffMs = end.getTime() - start.getTime()\n\n  const seconds = Math.floor(diffMs / 1000)\n  const minutes = Math.floor(seconds / 60)\n  const hours = Math.floor(minutes / 60)\n\n  if (hours > 0) return `${hours}h ${minutes % 60}m`\n  if (minutes > 0) return `${minutes}m ${seconds % 60}s`\n  return `${seconds}s`\n}\n\nfunction determineJobStatus(job: k8s.V1Job): JobStatus {\n  const conditions = job.status?.conditions || []\n  const succeeded = job.status?.succeeded || 0\n  const failed = job.status?.failed || 0\n  const active = job.status?.active || 0\n\n  // Check conditions\n  const completeCondition = conditions.find(c => c.type === 'Complete' && c.status === 'True')\n  const failedCondition = conditions.find(c => c.type === 'Failed' && c.status === 'True')\n\n  if (completeCondition) return 'Complete'\n  if (failedCondition) return 'Failed'\n  if (active > 0) return 'Running'\n  if (succeeded === 0 && failed === 0 && active === 0) return 'Pending'\n\n  return 'Unknown'\n}\n\nexport async function fetchJobs(namespace: string, contextName?: string): Promise<Job[]> {\n  const batchApi = getBatchApi(contextName)\n  const response = await batchApi.listNamespacedJob({ namespace })\n\n  return response.items.map((job: k8s.V1Job) => {\n    const completions = job.spec?.completions || 1\n    const succeeded = job.status?.succeeded || 0\n    const failed = job.status?.failed || 0\n    const active = job.status?.active || 0\n    const status = determineJobStatus(job)\n\n    const conditions: JobCondition[] = (job.status?.conditions || []).map(c => ({\n      type: c.type || '',\n      status: c.status || '',\n      lastProbeTime: c.lastProbeTime?.toISOString(),\n      lastTransitionTime: c.lastTransitionTime?.toISOString(),\n      reason: c.reason,\n      message: c.message,\n    }))\n\n    return {\n      name: job.metadata?.name || '',\n      namespace: job.metadata?.namespace || namespace,\n      status,\n      completions,\n      succeeded,\n      failed,\n      active,\n      startTime: job.status?.startTime?.toISOString(),\n      completionTime: job.status?.completionTime?.toISOString(),\n      duration: calculateDuration(job.status?.startTime?.toISOString(), job.status?.completionTime?.toISOString()),\n      age: calculateAge(job.metadata?.creationTimestamp),\n      labels: job.metadata?.labels || {},\n      conditions,\n    }\n  })\n}\n\nexport async function fetchJob(name: string, namespace: string, contextName?: string): Promise<Job | null> {\n  try {\n    const batchApi = getBatchApi(contextName)\n    const response = await batchApi.readNamespacedJob({ name, namespace })\n    const job = response\n\n    const completions = job.spec?.completions || 1\n    const succeeded = job.status?.succeeded || 0\n    const failed = job.status?.failed || 0\n    const active = job.status?.active || 0\n    const status = determineJobStatus(job)\n\n    const conditions: JobCondition[] = (job.status?.conditions || []).map((c: any) => ({\n      type: c.type || '',\n      status: c.status || '',\n      lastProbeTime: c.lastProbeTime?.toISOString(),\n      lastTransitionTime: c.lastTransitionTime?.toISOString(),\n      reason: c.reason,\n      message: c.message,\n    }))\n\n    return {\n      name: job.metadata?.name || '',\n      namespace: job.metadata?.namespace || namespace,\n      status,\n      completions,\n      succeeded,\n      failed,\n      active,\n      startTime: job.status?.startTime?.toISOString(),\n      completionTime: job.status?.completionTime?.toISOString(),\n      duration: calculateDuration(job.status?.startTime?.toISOString(), job.status?.completionTime?.toISOString()),\n      age: calculateAge(job.metadata?.creationTimestamp),\n      labels: job.metadata?.labels || {},\n      conditions,\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch job ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * CronJobs API\n */\nexport async function fetchCronJobs(namespace: string, contextName?: string): Promise<CronJob[]> {\n  const batchApi = getBatchApi(contextName)\n  const response = await batchApi.listNamespacedCronJob({ namespace })\n\n  return response.items.map((cronJob: k8s.V1CronJob) => {\n    return {\n      name: cronJob.metadata?.name || '',\n      namespace: cronJob.metadata?.namespace || namespace,\n      schedule: cronJob.spec?.schedule || '',\n      suspend: cronJob.spec?.suspend || false,\n      active: cronJob.status?.active?.length || 0,\n      lastSchedule: cronJob.status?.lastScheduleTime?.toISOString(),\n      lastSuccessfulTime: cronJob.status?.lastSuccessfulTime?.toISOString(),\n      age: calculateAge(cronJob.metadata?.creationTimestamp),\n      labels: cronJob.metadata?.labels || {},\n    }\n  })\n}\n\nexport async function fetchCronJob(name: string, namespace: string, contextName?: string): Promise<CronJob | null> {\n  try {\n    const batchApi = getBatchApi(contextName)\n    const response = await batchApi.readNamespacedCronJob({ name, namespace })\n    const cronJob = response\n\n    return {\n      name: cronJob.metadata?.name || '',\n      namespace: cronJob.metadata?.namespace || namespace,\n      schedule: cronJob.spec?.schedule || '',\n      suspend: cronJob.spec?.suspend || false,\n      active: cronJob.status?.active?.length || 0,\n      lastSchedule: cronJob.status?.lastScheduleTime?.toISOString(),\n      lastSuccessfulTime: cronJob.status?.lastSuccessfulTime?.toISOString(),\n      age: calculateAge(cronJob.metadata?.creationTimestamp),\n      labels: cronJob.metadata?.labels || {},\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch cronjob ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * Timeout wrapper for API calls\n */\nfunction withTimeout<T>(promise: Promise<T>, timeoutMs: number = 10000): Promise<T> {\n  return Promise.race([\n    promise,\n    new Promise<T>((_, reject) =>\n      setTimeout(() => reject(new Error(`Request timeout after ${timeoutMs}ms`)), timeoutMs)\n    ),\n  ])\n}\n\n/**\n * Fetch all namespaces\n */\nexport async function fetchNamespaces(contextName?: string): Promise<Namespace[]> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await withTimeout(coreApi.listNamespace(), 10000)\n    const namespaces = response.items\n\n    return namespaces.map((ns) => {\n      const phase = ns.status?.phase || 'Unknown'\n      let status: NamespaceStatus = 'Unknown'\n      if (phase === 'Active') status = 'Active'\n      else if (phase === 'Terminating') status = 'Terminating'\n\n      return {\n        name: ns.metadata?.name || '',\n        status,\n        age: calculateAge(ns.metadata?.creationTimestamp),\n        labels: ns.metadata?.labels || {},\n        annotations: ns.metadata?.annotations || {},\n      }\n    })\n  } catch (error) {\n    console.error('[K8s] Failed to fetch namespaces:', error)\n    return []\n  }\n}\n\n/**\n * Fetch single namespace\n */\nexport async function fetchNamespace(name: string, contextName?: string): Promise<Namespace | null> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNamespace({ name })\n    const ns = response\n\n    const phase = ns.status?.phase || 'Unknown'\n    let status: NamespaceStatus = 'Unknown'\n    if (phase === 'Active') status = 'Active'\n    else if (phase === 'Terminating') status = 'Terminating'\n\n    return {\n      name: ns.metadata?.name || '',\n      status,\n      age: calculateAge(ns.metadata?.creationTimestamp),\n      labels: ns.metadata?.labels || {},\n      annotations: ns.metadata?.annotations || {},\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch namespace ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * Fetch all resource quotas in a namespace\n */\nexport async function fetchResourceQuotas(namespace: string, contextName?: string): Promise<ResourceQuota[]> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.listNamespacedResourceQuota({ namespace })\n    const quotas = response.items\n\n    return quotas.map((quota) => ({\n      name: quota.metadata?.name || '',\n      namespace: quota.metadata?.namespace || namespace,\n      age: calculateAge(quota.metadata?.creationTimestamp),\n      hard: quota.status?.hard || {},\n      used: quota.status?.used || {},\n      labels: quota.metadata?.labels || {},\n    }))\n  } catch (error: any) {\n    // Silently return empty array for 403 (permission denied)\n    // This is expected for users with namespace-scoped permissions\n    if (error?.statusCode === 403 || error?.code === 403) {\n      return []\n    }\n    // Re-throw other errors to be handled by the API route\n    throw error\n  }\n}\n\n/**\n * Fetch single resource quota\n */\nexport async function fetchResourceQuota(\n  name: string,\n  namespace: string,\n  contextName?: string\n): Promise<ResourceQuota | null> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNamespacedResourceQuota({ name, namespace })\n    const quota = response\n\n    return {\n      name: quota.metadata?.name || '',\n      namespace: quota.metadata?.namespace || namespace,\n      age: calculateAge(quota.metadata?.creationTimestamp),\n      hard: quota.status?.hard || {},\n      used: quota.status?.used || {},\n      labels: quota.metadata?.labels || {},\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch resource quota ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * Fetch all limit ranges in a namespace\n */\nexport async function fetchLimitRanges(namespace: string, contextName?: string): Promise<LimitRange[]> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.listNamespacedLimitRange({ namespace })\n    const limitRanges = response.items\n\n    return limitRanges.map((lr) => {\n      const limits: LimitRangeItem[] = (lr.spec?.limits || []).map((limit) => ({\n        type: limit.type || 'Container',\n        max: limit.max || undefined,\n        min: limit.min || undefined,\n        default: limit._default || undefined,\n        defaultRequest: limit.defaultRequest || undefined,\n        maxLimitRequestRatio: limit.maxLimitRequestRatio || undefined,\n      }))\n\n      return {\n        name: lr.metadata?.name || '',\n        namespace: lr.metadata?.namespace || namespace,\n        age: calculateAge(lr.metadata?.creationTimestamp),\n        limits,\n        labels: lr.metadata?.labels || {},\n      }\n    })\n  } catch (error: any) {\n    // Silently return empty array for 403 (permission denied)\n    // This is expected for users with namespace-scoped permissions\n    if (error?.statusCode === 403 || error?.code === 403) {\n      return []\n    }\n    // Re-throw other errors to be handled by the API route\n    throw error\n  }\n}\n\n/**\n * Fetch single limit range\n */\nexport async function fetchLimitRange(name: string, namespace: string, contextName?: string): Promise<LimitRange | null> {\n  try {\n    const coreApi = getCoreApi(contextName)\n    const response = await coreApi.readNamespacedLimitRange({ name, namespace })\n    const lr = response\n\n    const limits: LimitRangeItem[] = (lr.spec?.limits || []).map((limit) => ({\n      type: limit.type || 'Container',\n      max: limit.max || undefined,\n      min: limit.min || undefined,\n      default: limit._default || undefined,\n      defaultRequest: limit.defaultRequest || undefined,\n      maxLimitRequestRatio: limit.maxLimitRequestRatio || undefined,\n    }))\n\n    return {\n      name: lr.metadata?.name || '',\n      namespace: lr.metadata?.namespace || namespace,\n      age: calculateAge(lr.metadata?.creationTimestamp),\n      limits,\n      labels: lr.metadata?.labels || {},\n    }\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch limit range ${name}:`, error)\n    return null\n  }\n}\n\n/**\n * Fetch all resources with labels from a namespace\n */\nexport async function fetchResourcesWithLabels(\n  namespace: string,\n  contextName?: string\n): Promise<ResourceWithLabels[]> {\n  try {\n    const resources: ResourceWithLabels[] = []\n\n    // Fetch all resource types in parallel\n    const [\n      deployments,\n      statefulsets,\n      daemonsets,\n      pods,\n      services,\n      configmaps,\n      secrets,\n      jobs,\n      cronjobs,\n      ingresses,\n    ] = await Promise.all([\n      fetchDeployments(namespace, contextName),\n      fetchStatefulSets(namespace, contextName),\n      fetchDaemonSets(namespace, contextName),\n      fetchPods(namespace, contextName),\n      fetchServices(namespace, contextName),\n      fetchConfigMaps(namespace, contextName),\n      fetchSecrets(namespace, contextName),\n      fetchJobs(namespace, contextName),\n      fetchCronJobs(namespace, contextName),\n      fetchIngresses(namespace, contextName),\n    ])\n\n    // Convert each resource type to ResourceWithLabels\n    deployments.forEach((r) => {\n      resources.push({\n        name: r.name,\n        namespace: r.namespace,\n        kind: 'Deployment',\n        labels: r.labels,\n        annotations: {},\n      })\n    })\n\n    statefulsets.forEach((r) => {\n      resources.push({\n        name: r.name,\n        namespace: r.namespace,\n        kind: 'StatefulSet',\n        labels: r.labels,\n        annotations: {},\n      })\n    })\n\n    daemonsets.forEach((r) => {\n      resources.push({\n        name: r.name,\n        namespace: r.namespace,\n        kind: 'DaemonSet',\n        labels: r.labels,\n        annotations: {},\n      })\n    })\n\n    pods.forEach((r) => {\n      resources.push({\n        name: r.name,\n        namespace: r.namespace,\n        kind: 'Pod',\n        labels: r.labels,\n        annotations: {},\n      })\n    })\n\n    services.forEach((r) => {\n      resources.push({\n        name: r.name,\n        namespace: r.namespace,\n        kind: 'Service',\n        labels: r.labels,\n        annotations: {},\n      })\n    })\n\n    configmaps.forEach((r) => {\n      resources.push({\n        name: r.name,\n        namespace: r.namespace,\n        kind: 'ConfigMap',\n        labels: r.labels,\n        annotations: {},\n      })\n    })\n\n    secrets.forEach((r) => {\n      resources.push({\n        name: r.name,\n        namespace: r.namespace,\n        kind: 'Secret',\n        labels: r.labels,\n        annotations: {},\n      })\n    })\n\n    jobs.forEach((r) => {\n      resources.push({\n        name: r.name,\n        namespace: r.namespace,\n        kind: 'Job',\n        labels: r.labels,\n        annotations: {},\n      })\n    })\n\n    cronjobs.forEach((r) => {\n      resources.push({\n        name: r.name,\n        namespace: r.namespace,\n        kind: 'CronJob',\n        labels: r.labels,\n        annotations: {},\n      })\n    })\n\n    ingresses.forEach((r) => {\n      resources.push({\n        name: r.name,\n        namespace: r.namespace,\n        kind: 'Ingress',\n        labels: r.labels,\n        annotations: {},\n      })\n    })\n\n    return resources\n  } catch (error) {\n    console.error(`[K8s] Failed to fetch resources with labels:`, error)\n    return []\n  }\n}\n\n/**\n * Index all labels from resources\n */\nexport function indexLabels(resources: ResourceWithLabels[]): LabelGroup[] {\n  const labelMap = new Map<string, Map<string, { count: number; resourceTypes: Set<string> }>>()\n\n  // Index all labels\n  resources.forEach((resource) => {\n    Object.entries(resource.labels).forEach(([key, value]) => {\n      if (!labelMap.has(key)) {\n        labelMap.set(key, new Map())\n      }\n\n      const valueMap = labelMap.get(key)!\n      if (!valueMap.has(value)) {\n        valueMap.set(value, { count: 0, resourceTypes: new Set() })\n      }\n\n      const entry = valueMap.get(value)!\n      entry.count++\n      entry.resourceTypes.add(resource.kind)\n    })\n  })\n\n  // Convert to LabelGroup array\n  const labelGroups: LabelGroup[] = []\n  labelMap.forEach((valueMap, key) => {\n    const values: Array<{ value: string; count: number }> = []\n    let totalCount = 0\n    const resourceTypes = new Set<string>()\n\n    valueMap.forEach((entry, value) => {\n      values.push({ value, count: entry.count })\n      totalCount += entry.count\n      entry.resourceTypes.forEach((type) => resourceTypes.add(type))\n    })\n\n    // Sort values by count descending\n    values.sort((a, b) => b.count - a.count)\n\n    labelGroups.push({\n      key,\n      values,\n      totalCount,\n      resourceTypes: Array.from(resourceTypes),\n    })\n  })\n\n  // Sort label groups by totalCount descending\n  labelGroups.sort((a, b) => b.totalCount - a.totalCount)\n\n  return labelGroups\n}\n\n/**\n * Search resources by label selector\n * Supports syntax: key=value, key!=value, key, !key\n */\nexport function searchByLabelSelector(\n  resources: ResourceWithLabels[],\n  selector: string\n): ResourceWithLabels[] {\n  if (!selector.trim()) {\n    return resources\n  }\n\n  // Parse selector (simple implementation for common cases)\n  const selectors = selector.split(',').map((s) => s.trim())\n\n  return resources.filter((resource) => {\n    return selectors.every((sel) => {\n      // key=value\n      if (sel.includes('=') && !sel.includes('!=')) {\n        const [key, value] = sel.split('=').map((s) => s.trim())\n        return resource.labels[key] === value\n      }\n\n      // key!=value\n      if (sel.includes('!=')) {\n        const [key, value] = sel.split('!=').map((s) => s.trim())\n        return resource.labels[key] !== value\n      }\n\n      // !key (label not present)\n      if (sel.startsWith('!')) {\n        const key = sel.substring(1).trim()\n        return !(key in resource.labels)\n      }\n\n      // key (label present)\n      return sel in resource.labels\n    })\n  })\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2189, "column": 0}, "map": {"version":3,"sources":["file:///Users/dmakowski/git_priv/kubevista/app/api/dashboard/summary/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { getNamespaceFromRequest } from '@/lib/core/api-helpers'\nimport { fetchDeployments, fetchPods, fetchNodes, fetchConfigMaps, fetchSecrets, fetchHPAs, fetchPVs, fetchServices, fetchIngresses, fetchStatefulSets, fetchDaemonSets, fetchJobs, fetchCronJobs } from '@/lib/k8s/api'\nimport type { DashboardSummary } from '@/types/kubernetes'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const namespace = getNamespaceFromRequest(request)\n    // const context = getContextFromRequest(request) // TODO: use context when API supports it\n\n    if (!namespace) {\n      return NextResponse.json(\n        { error: 'Namespace parameter is required' },\n        { status: 400 }\n      )\n    }\n\n    // Fetch data in parallel\n    const [deployments, pods, nodes, configMaps, secrets, hpas, pvs, services, ingresses, statefulsets, daemonsets, jobs, cronjobs] = await Promise.all([\n      fetchDeployments(namespace),\n      fetchPods(namespace),\n      fetchNodes(),\n      fetchConfigMaps(namespace),\n      fetchSecrets(namespace),\n      fetchHPAs(namespace),\n      fetchPVs(),\n      fetchServices(namespace),\n      fetchIngresses(namespace),\n      fetchStatefulSets(namespace),\n      fetchDaemonSets(namespace),\n      fetchJobs(namespace),\n      fetchCronJobs(namespace),\n    ])\n\n    // Calculate summary\n    const totalDeployments = deployments.length\n    const healthyDeployments = deployments.filter((d) => d.status === 'Available').length\n    const totalPods = pods.length\n    const runningPods = pods.filter((p) => p.status === 'Running').length\n    const pendingPods = pods.filter((p) => p.status === 'Pending').length\n    const failedPods = pods.filter((p) => p.status === 'Failed').length\n    const totalNodes = nodes.length\n    const readyNodes = nodes.filter((n) => n.status === 'Ready').length\n\n    const summary: DashboardSummary = {\n      deployments: {\n        total: totalDeployments,\n        healthy: healthyDeployments,\n        degraded: totalDeployments - healthyDeployments,\n      },\n      pods: {\n        total: totalPods,\n        running: runningPods,\n        pending: pendingPods,\n        failed: failedPods,\n      },\n      nodes: {\n        total: totalNodes,\n        ready: readyNodes,\n        notReady: totalNodes - readyNodes,\n      },\n      configMaps: configMaps.length,\n      secrets: secrets.length,\n      hpa: hpas.length,\n      pv: {\n        total: pvs.length,\n        bound: pvs.filter((pv) => pv.status === 'Bound').length,\n      },\n      services: services.length,\n      ingress: ingresses.length,\n      jobs: {\n        total: jobs.length,\n        active: jobs.filter((j) => j.status === 'Running').length,\n        succeeded: jobs.filter((j) => j.status === 'Complete').length,\n        failed: jobs.filter((j) => j.status === 'Failed').length,\n      },\n      cronjobs: {\n        total: cronjobs.length,\n        active: cronjobs.filter((c) => !c.suspend).length,\n        suspended: cronjobs.filter((c) => c.suspend).length,\n      },\n      statefulsets: {\n        total: statefulsets.length,\n        ready: statefulsets.filter((s) => s.replicas.ready === s.replicas.desired).length,\n        notReady: statefulsets.filter((s) => s.replicas.ready !== s.replicas.desired).length,\n      },\n      daemonsets: {\n        total: daemonsets.length,\n        ready: daemonsets.filter((d) => d.ready === d.desired).length,\n        notReady: daemonsets.filter((d) => d.ready !== d.desired).length,\n      },\n    }\n\n    return NextResponse.json(summary)\n  } catch (error) {\n    console.error('[API] Failed to fetch dashboard summary:', error)\n    return NextResponse.json(\n      { error: 'Failed to fetch dashboard summary' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":"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"}}]
}